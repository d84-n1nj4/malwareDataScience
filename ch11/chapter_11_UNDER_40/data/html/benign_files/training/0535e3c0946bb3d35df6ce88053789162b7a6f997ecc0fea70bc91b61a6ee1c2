<!DOCTYPE html>
<html lang="en">  
<head>  
	<meta charset="utf-8"> 
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/> 
	<meta property="og:type" content="music.playlist" />
	<title>EP55: Let’s Do Lunch!</title>

			<link rel="stylesheet" type="text/css" href="//static.libsyn.com/p/assets/platform/fonts/libsyn-fonts.css?family=Open+Sans:300,400,600,700,800">
		<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
		<link rel="stylesheet" type="text/css" href="//static.libsyn.com/p/assets/platform/customplayer/custom-player-bootstrap.css?u=2017-10-01">
	
		
</head>
<body>
	 

<style>
/** Customizable Style **/
.container-fluid {
  position: absolute;
    top:0;
    left: 0;
    width: 100%;
    height: 100%;
}
.logo {
    background: url("//assets.libsyn.com/player_logo/90747?theme=custom") no-repeat center !important;
}

.nopadding svg {
  fill:#ac8104 !important;
}
.duration, .close-overlay:after, .playlist-item.current .playlist-item-title, .playlist-item.current .playlist-item-duration, .playlist-item.current .playlist-item-date, .playlist-item.current .playlist-item-info-link {
  color: #ac8104 ;
}

.play-bar, .loading .sk-rect, .spinner .bounce1, .spinner .bounce2, .spinner .bounce3, .nano > .nano-pane > .nano-slider  {
  background-color:#ac8104 !important;
}

.playlistItemDescription {
  height:185px;
}

.playlist-item.current .playlist-item-status {
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' x='0px' y='0px' width='26px' height='26px' viewBox='0 0 26 26' enable-background='new 0 0 26 26' xml:space='preserve'><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='19' y1='3' x2='19' y2='22'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='22' y1='9' x2='22' y2='16'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='25' y1='11' x2='25' y2='14'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='16' y1='7' x2='16' y2='18'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='10' y1='9' x2='10' y2='16'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='13' y1='11' x2='13' y2='14'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='7' y1='4' x2='7' y2='21'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='1' y1='11' x2='1' y2='14'/><line fill='none' stroke='%23ac8104' stroke-width='1.9' stroke-linecap='round' stroke-linejoin='round' stroke-miterlimit='10' x1='4' y1='8' x2='4' y2='17'/></svg>") no-repeat center;
}

.playlist-item-info-link.active {
    background: url("data:image/svg+xml;utf8,<svg fill='white' version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 50 50' enable-background='new 0 0 50 50' xml:space='preserve'><path fill='%23ac8104' stroke='%23ac8104' stroke-width='1' stroke-linecap='round' stroke-miterlimit='10' d='M25,2C11.7,2,1,11.5,1,23.2c0,6,2.8,11.4,7.4,15.3c-1.3,5.3-7.6,7.5-7.2,9c4,2.3,14.8-2.1,18.2-3.6c1.8,0.4,3.6,0.6,5.5,0.6c13.3,0,24-9.5,24-21.2S38.3,2,25,2z'/><path stroke='white' stroke-width='3' d='M23.8,16.2c-0.2,0-0.4-0.1-0.4-0.4v-2.6c0-0.2,0.1-0.4,0.4-0.4h2.4c0.2,0,0.4,0.1,0.4,0.4v2.6c0,0.2-0.1,0.4-0.4,0.4H23.8zM23.9,34.3c-0.2,0-0.4-0.1-0.4-0.4V20.5c0-0.2,0.1-0.4,0.4-0.4h2.3c0.2,0,0.4,0.1,0.4,0.4v13.5c0,0.2-0.1,0.4-0.4,0.4H23.9z'/></svg>") no-repeat;
}


.playlist {
  height: calc(300px - 90px);
}
.playlist-item-desc {
  height:240px;
}
@media (max-width: 992px) {
  .prev-thirty, .skip-thirty {
    display:none;
  }
  .prev,.elapsed, .skip {
    width:33.2%;
  }
}

.podcast-title {
  color:grey;
}

</style>

<div class="container-fluid" style="padding-left:0px;padding-right:0px;">

  <!-- rss overlay, hidden initially -->
  <div class="dark-overlay" id="rss-overlay">
  	<a class="close-overlay"></a>
  	<div class="lightbox-inset">
  		<div class="row rss-row">
  		  				<div class="col-xs-2 text-center rss-col">
  					<a class="resource-button-link" href="http://hollywoodandlevine.libsyn.com/rss" target="_blank"><img class="resource-button img-responsive" src="//static.libsyn.com/p/assets/platform/customplayer/images/rss.png"></a>
  				</div>
  			  				<div class="col-xs-2 text-center rss-col">
  					<a class="resource-button-link" href="http://hollywoodandlevine.libsyn.com/podcast" target="_blank"><img class="resource-button img-responsive" src="//static.libsyn.com/p/assets/platform/customplayer/images/website.png"></a>
  				</div>
  			  				<div class="col-xs-2 text-center rss-col">
  					<a class="resource-button-link" href="https://itunes.apple.com/us/podcast/hollywood-levine/id1191112800?mt=2&ls=1" target="_blank"><img class="resource-button img-responsive" src="//static.libsyn.com/p/assets/platform/customplayer/images/itunes.png"></a>
  				</div>
  			  				<div class="col-xs-2 text-center rss-col">
  					<a class="resource-button-link" href="http://www.stitcher.com/s?fid=145391&refid=stpr" target="_blank"><img class="resource-button img-responsive" src="//static.libsyn.com/p/assets/platform/customplayer/images/stitcher.png"></a>
  				</div>
  			  				<div class="col-xs-2 text-center rss-col">
  					<a class="resource-button-link" href="https://play.google.com/music/listen#/ps/Idjgyicvpubnhooktq2g5gohkou" target="_blank"><img class="resource-button img-responsive" src="//static.libsyn.com/p/assets/platform/customplayer/images/google_play.png"></a>
  				</div>
  			  		</div>
  	</div>
  </div>

  <!-- access denied overlay, hidden initially -->
  <div class="dark-overlay" id="denied-overlay" >
        <div class="lightbox-inset">
      <div class="row">
        <div class="col-xs-1">
          <img src="//static.libsyn.com/p/assets/platform/customplayer/images/lock-black.svg" style="height:100% !important;width:auto;">
        </div>
        <div class="col-xs-11">
          This content requires a premium subscription. <br> 
          Please <a target="_blank" href="https://my.libsyn.com/auth/login/show_id/90747"> log in </a> or <a target="_blank" href="https://my.libsyn.com/show/view/id/90747"> subscribe </a> to continue.
        </div>
      </div>
    </div>
  </div>

  <!-- embed overlay, hidden initially -->
  <div class="dark-overlay" id="embed-overlay">
  	<a class="close-overlay"></a>
  	<div class="lightbox-inset">
  		<textarea id="embed-code-display" onclick="this.focus();this.select()" readonly="readonly"><iframe style="border: none" src="//html5-player.libsyn.com/embed/episode/id/6147467/height/300/theme/custom/autoplay/no/autonext/no/thumbnail/yes/preload/no/no_addthis/no/direction/backward/render-playlist/yes/custom-color/ac8104/" height="300" width="100%" scrolling="no"  allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen></iframe></textarea>
  	</div>
  </div>

  <!-- share overlay, hidden initially -->
  <div class="dark-overlay" id="share-overlay">
  	<a class="close-overlay"></a>
  	<div class="lightbox-inset">
  		<div class="sharethis-inline-share-buttons" data-url="http://traffic.libsyn.com/force-cdn/highwinds/hollywoodandlevine/EP055_Hollywood__Levine.mp3?dest-id=451633" data-title="EP55: Let’s Do Lunch!" data-image="https://assets.libsyn.com/secure/item/6147467/?height=90&width=90"></div>
  	</div>
  </div>

  <div class="row player nopadding">

    <!-- thumbnail -->
        <div class="col-xs-1 nopadding thumbnail">
          <img src="https://assets.libsyn.com/secure/item/6147467/?height=90&width=90" class="thumbnail-image">
      <video id="video" preload="none" poster="https://assets.libsyn.com/secure/item/6147467/?height=90&width=90" style="display:none;">
      </video>
    </div>

    <!-- right controls -->
        <div class="col-xs-11 right-side nopadding">
          <div class="row nopadding" style="max-width:100% !important;overflow:hidden;">
        <div class="col-md-12 col-xs-12 right-side-top nopadding">
          <div class="row nopadding">
            <div class="col-md-1 col-xs-1 play-pause nopadding">
              <!-- load -->
              <div class="loading">
                  <div class="sk-rect sk-rect1" style="color:#ac8104;"></div>
                  <div class="sk-rect sk-rect2"></div>
                  <div class="sk-rect sk-rect3"></div>
                  <div class="sk-rect sk-rect4"></div>
                  <div class="sk-rect sk-rect5"></div>
              </div>
              <!-- play -->
              <svg class="play img-responsive center-block" role="button" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;color:" xml:space="preserve">
                <path d="M10,5.251v39.497L43.572,25L10,5.251z"/>
              </svg> 
              <!-- pause -->
        			<svg class="pause img-responsive" role="button" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="100px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;margin-left:15%;display:none;" xml:space="preserve">
        			<g>
        				<path d="M12,42h10V8H12V42z"/>
        				<path d="M28,8v34h10V8H28z"/>
        			</g>
        			</svg>
            </div>
            <div class="col-md-11 col-xs-11 seek nopadding">
              <div class="row nopadding">
                <div class="col-lg-12 col-xs-12 podcast-title nopadding">
                  Hollywood & Levine                  <p class="reset-view pull-right">
                    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" style="width:80% !important;height:80%!important;margin-top:2px;" viewBox="0 0 26 26" enable-background="new 0 0 26 26" xml:space="preserve">
                        <path fill="#ac8104" d="M21.125,0H4.875C2.182,0,0,2.182,0,4.875v16.25C0,23.818,2.182,26,4.875,26h16.25 C23.818,26,26,23.818,26,21.125V4.875C26,2.182,23.818,0,21.125,0z M18.78,17.394l-1.388,1.387c-0.254,0.255-0.67,0.255-0.924,0 L13,15.313L9.533,18.78c-0.255,0.255-0.67,0.255-0.925-0.002L7.22,17.394c-0.253-0.256-0.253-0.669,0-0.926l3.468-3.467L7.221,9.534 c-0.254-0.256-0.254-0.672,0-0.925l1.388-1.388c0.255-0.257,0.671-0.257,0.925,0L13,10.689l3.468-3.468 c0.255-0.257,0.671-0.257,0.924,0l1.388,1.386c0.254,0.255,0.254,0.671,0.001,0.927l-3.468,3.467l3.468,3.467 C19.033,16.725,19.033,17.138,18.78,17.394z"/>
                    </svg>
                  </p>
                  <p class="full-screen pull-right">
                      <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="Layer_1" x="0px" y="0px" style="width:80% !important;height:80%!important;margin-top:2px;float:left;" viewBox="0 0 26 26" enable-background="new 0 0 26 26" xml:space="preserve">
                      <path fill="#ac8104" d="M16.234,8.154c-0.221-0.223-0.221-0.584,0-0.806l7.055-7.053c0.221-0.223,0.582-0.223,0.805,0l1.61,1.611  c0.222,0.222,0.222,0.583,0,0.805L18.65,9.767c-0.221,0.221-0.584,0.221-0.805-0.001L16.234,8.154z" style="top:50%;left:50%;margin-right:-50%;"/>

                      <path fill="#ac8104" d="M25.191,0h-7.244C17.62,0,17.325,0.196,17.2,0.499c-0.125,0.302-0.056,0.649,0.175,0.881l7.245,7.245  c0.155,0.154,0.36,0.236,0.571,0.236c0.104,0,0.209-0.02,0.31-0.062C25.803,8.675,26,8.38,26,8.053V0.809  C26,0.361,25.639,0,25.191,0z"/>
                      <path fill="#ac8104" d="M8.154,9.766c-0.223,0.221-0.584,0.221-0.806,0L0.296,2.711c-0.223-0.221-0.223-0.582,0-0.805l1.611-1.61  c0.222-0.222,0.583-0.222,0.805,0L9.767,7.35C9.987,7.57,9.987,7.934,9.766,8.154L8.154,9.766z"/>
                      <path fill="#ac8104" d="M0,0.809v7.244C0,8.38,0.196,8.675,0.499,8.8C0.801,8.925,1.148,8.855,1.38,8.625L8.625,1.38  c0.154-0.155,0.236-0.36,0.236-0.571c0-0.104-0.02-0.209-0.062-0.31C8.675,0.197,8.38,0,8.053,0H0.809C0.361,0,0,0.361,0,0.809z"/>
                      <path fill="#ac8104" d="M9.765,17.846c0.222,0.223,0.222,0.584,0,0.806l-7.054,7.053c-0.221,0.223-0.583,0.223-0.805,0l-1.61-1.611  c-0.222-0.222-0.222-0.583,0-0.805l7.053-7.055c0.221-0.221,0.584-0.221,0.806,0.001L9.765,17.846z"/>
                      <path fill="#ac8104" d="M0.809,26h7.244c0.327,0,0.622-0.196,0.747-0.499c0.125-0.302,0.056-0.649-0.175-0.881L1.38,17.375  c-0.155-0.154-0.361-0.236-0.571-0.236c-0.104,0-0.209,0.02-0.31,0.062C0.197,17.325,0,17.62,0,17.947v7.244  C0,25.639,0.362,26,0.809,26z"/>
                      <path fill="#ac8104" d="M17.846,16.234c0.223-0.221,0.584-0.221,0.806,0l7.053,7.055c0.223,0.221,0.223,0.582,0,0.805l-1.611,1.61  c-0.222,0.222-0.583,0.222-0.805,0l-7.055-7.054c-0.221-0.221-0.221-0.584,0.001-0.805L17.846,16.234z"/>
                      <path fill="#ac8104" d="M26,25.191v-7.244c0-0.327-0.196-0.622-0.499-0.747c-0.302-0.125-0.649-0.056-0.881,0.175l-7.245,7.245  c-0.154,0.155-0.236,0.36-0.236,0.571c0,0.104,0.02,0.209,0.062,0.31C17.325,25.803,17.62,26,17.947,26h7.244  C25.639,26,26,25.639,26,25.191z"/>
                    </svg>
                  </p>
                </div>
                <div class="col-lg-12 col-xs-12 episode-title nopadding">
                  EP55: Let’s Do Lunch!                </div>
                <div class="col-lg-12 col-xs-12 seek-bar nopadding">   
                  <div class="play-bar" ></div>             
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-12 col-xs-12 right-side-bottom nopadding">
          <div class="row nopadding">

            <div class="col-xs-3 bottom-controls duration nopadding">
              <div class="row nopadding">
                                <div class="col-xs-5ths nopadding prev center-block">
                  <svg role="button" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" class="track-btn" xml:space="preserve">
                    <polygon style="fill:none;stroke:#ac8104;stroke-width:4;stroke-miterlimit:10;" points="2,25 25,40 25,26.304 46,40 46,10 25,23.696 25,10 "/>
                  </svg>
                </div>
                                <div class="col-xs-5ths nopadding prev-thirty center-block">
                  30<svg role="button" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve" style="height:11px;width:auto;margin-top:1px;">
                  <polyline fill="none" stroke="#ac8104" stroke-width="5" stroke-linecap="round" stroke-miterlimit="10" points="17.442,24.945 
                  7.499,15 17.443,5.055 "/>
                  <path fill="none" stroke="#ac8104" stroke-width="5" stroke-linecap="round" stroke-miterlimit="10" d="M38,44
                  c0,0,2.943-5.346,2.943-14c0-8.756-5.645-15-18-15C13.266,15,8,15,8,15"/>
                  </svg>
                </div>
                <div class="col-xs-5ths nopadding elapsed text-center">
                  00:00:00                </div>
                <div class="col-xs-5ths nopadding skip-thirty center-block">
                  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve" style="height:11px;width:auto;margin-top:1px;">
                  <polyline fill="none" stroke="#ac8104" stroke-width="5" stroke-linecap="round" stroke-miterlimit="10" points="33,25 42.891,15 33,5 "/>
                  <path fill="none" stroke="#ac8104" stroke-width="5" stroke-linecap="round" stroke-miterlimit="10" d="M12,44c0,0-3-5.346-3-14c0-8.756,5.644-15,18-15c9.677,0,14,0,14,0"/>
                  </svg>30
                </div>
                                <div class="col-xs-5ths nopadding skip center-block">
                  <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" class="track-btn" xml:space="preserve">
                  <polygon style="fill:none;stroke:#ac8104;stroke-width:4;stroke-miterlimit:10;" points="48,25 25,10 25,23.696 4,10 4,40 25,26.304 25,40 "/>
                  </svg>
                </div>
                              </div>
            </div>

            <div class="col-xs-4 bottom-controls connections nopadding">
                <div class="col-xs-3 nopadding share" id="rss" data-div-open="rss-overlay">
                  <img src="//static.libsyn.com/p/assets/platform/customplayer/images/rss-sm.png" class="share-img" style="height:15px !important;">
                </div>
                <div class="col-xs-3 nopadding share" id="download">
                  <img src="//static.libsyn.com/p/assets/platform/customplayer/images/download.png" class="share-img">
                </div>
                <div class="col-xs-3 nopadding share" id="embed" data-div-open="embed-overlay">
                  <img src="//static.libsyn.com/p/assets/platform/customplayer/images/embed.png" class="share-img">
                </div>
                <div class="col-xs-3 nopadding share" id="share" data-div-open="share-overlay">
                  <img src="//static.libsyn.com/p/assets/platform/customplayer/images/share.png" class="share-img" style="max-height:22px !important;">
                </div>
            </div>

            <div class="col-xs-2 bottom-controls logo nopadding">
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>

    <div class="playlist nano">
    <div class="playlist-content nano-content">
    </div>
    <div class="spinner">
        <div class="waitcircle bounce1"></div>
        <div class="waitcircle bounce2"></div>
        <div class="waitcircle bounce3"></div>
      </div>
  </div>
  </div>

<script type="text/javascript" src="//cdn.jsdelivr.net/npm/jquery@2.1.3/dist/jquery.min.js"></script>
<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script type="text/javascript" src="//static.libsyn.com/p/assets/platform/customplayer/jquery.nanoscroller.min.js"></script>
<script type="text/javascript" src="//cdn.embed.ly/player-0.0.12.min.js"></script>


<script>

var debug = false;
var ua = navigator.userAgent;
var isIosRequest = ((ua.indexOf('iPhone') != -1 || ua.indexOf('iPad') != -1 || ua.indexOf('iPod') != -1));
var userHasPremiumAccess = false;
var premiumDownloadEnabled = false;
var useThumbnail = true;
var category = "";
var renderPlaylist = true;

var addthis_config = {};
addthis_config.pubid = 'ra-57f683ee47f14d2b';

var mode = "audio";
if(mode == "video"){
  var player = document.getElementById("video");
  if(!renderPlaylist){
    renderVideoMode();
  }
} else {
  var audioPlayer;
  var player = audioPlayer = new Audio();
}
player.preload = "none";

/***** BEGIN UTILITIES ***/

function convertTimeToSeconds(hms){
  var a = hms.split(':');
  var seconds = (+a[0]) * 60 * 60 + (+a[1]) * 60 + (+a[2]); 
  return seconds;
}

function returnWidthPercent(elem){
  var pa= elem.offsetParent || elem;
  return ((elem.offsetWidth/pa.offsetWidth)*100).toFixed(2)+'%';
}

function returnSecondsToHms(d) {
    d = Number(d);
    var h = Math.floor(d / 3600);
    var m = Math.floor(d % 3600 / 60);
    var s = Math.floor(d % 3600 % 60);
    return (h < 10 ? "0" : "") + h + ":" + (m < 10 ? "0" : "") + m + ":" + (s < 10 ? "0" : "") + s;
}

//get items, add to playlist
function retrieveItems(){
  $.ajax({
      url: '/embed/list/id/451633/offset/' + offset + '/size/' + totalTracksToFillPlaylist + '/sort_by_field/release_date/sort_by_direction/' + sort + '/category/'+category,
      success: function(data) { 
        if(data.length == 0){
          $(".nano").unbind("scrollend");
        }
        for(var i = 0; i < data.length; i++) {
          if(origItem != data[i].item_id){
            data[i].duration_seconds = convertTimeToSeconds(data[i].duration);

            //need to do one quick ping for IOS, ping request will be deleted after one ping
            if(isIosRequest && !data[i].is_free && data[i].media_url != data[i].media_url_libsyn){
              data[i].prepend_ping = data[i].media_url.replace('libsyn.com/', 'libsyn.com/libsyn-ping-only/true/');
              data[i].media_url = data[i].media_url_libsyn;              
            }

            addToPlaylist(data[i]);
          }
        }
        offset = offset + totalTracksToFillPlaylist;
    }
  });
}

jQuery.fn.scrollTo = function(elem, speed) {
    if(renderPlaylist){
      $(this).animate({
          scrollTop:  $(this).scrollTop() - $(this).offset().top + $(elem).offset().top 
        }, speed == undefined ? 1000 : speed); 
      return this;
    }
     
};
/***** END UTILITIES ***/

/*** BEGIN INITALIZE PLAYER ***/  
var premium_access = false;
var currentTrack = 0;
var currentTimeStart = 0;

//stupid IE
var ua = window.navigator.userAgent;
var msie = ua.indexOf("MSIE ");
if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) {
  player.addEventListener('loadeddata', function() {
      player.currentTime = 0;
      if(debug) console.log("Player to start at " + currentTimeStart + " seconds");
      player.removeEventListener('loadeddata', arguments.callee);
    }, false);
} else {
  player.currentTime = 0;
}



if(debug) console.log("Player set to start at " + player.currentTime + " seconds");
var offset = 0;
var totalTracksToFillPlaylist = 10;
var sort = "DESC";
var playList = new Array();
var category = "";
var origItem = 6147467;
var autoPlay = false;
/*** END INITALIZE PLAYER ***/ 



function renderVideoMode(){
  mode = "video";
  $("#video").css({"width":"100%", "height":"100%"}).show();
  $(".player").css("height","100% !important");
  winHeight = window.innerHeight - 92;
  $(".thumbnail").css({"width":"100%","max-width":"100%","background":"#000"}).height(winHeight);
  $(".thumbnail-image").hide();
  $(".right-side").css("width","100%");
  $(".full-screen, .reset-view").show();
  $(".playlist").hide();
  document.querySelector('style').textContent += "@media only screen and (max-width:1106px) { .right-side { width: 100%; }}";
  document.querySelector('style').textContent += "@media only screen and (max-width: 410px) { .thumbnail { display:block; }}";
}

function renderAudioMode(){
  mode = "audio";
  $("#video, .full-screen, .reset-view").hide();
  $(".right-side").css("width","calc(100% - 90px)");
  $(".right-side").removeClass("col-xs-12").addClass("col-xs-11");
  $(".thumbnail").css({"height":"90px","max-width":"100%", "width":"90px"});
  $(".thumbnail").removeClass("col-xs-12").addClass("col-xs-1");     
  $(".thumbnail-image").show();
  $(".playlist").slideDown();
  document.querySelector("style").textContent += "@media only screen and (max-width: 410px) { .thumbnail { display:none; }}";
}

function updateDynamicContent(embedCode,downloadURL){

  //update embed code
  $("#embed-code-display").val(embedCode);

  //update download link
  if(playList[currentTrack].is_free || (!playList[currentTrack].is_free && userHasPremiumAccess && premiumDownloadEnabled)) {
      //free to download
      $("#download").css('opacity','1').unbind().on("click", function() { 
          window.open(downloadURL,"_blank");
          return false;
      });

  } else {
      //item is premium, lock it down
      $("#download").unbind().on("click", function() { 
          return false;
      });
      $("#download").unbind().css('opacity','.30');
  }
}

function updatePlayer(trackChanged){

    if(debug) console.log("Updating player to track " + currentTrack);

    var isVideo = playList[currentTrack].is_video;
    if(isVideo && mode == "audio"){
      player = document.getElementById("video");
      player.poster = playList[currentTrack].thumbnail_url;
    }
    else if(!isVideo && mode == "video"){
      player = audioPlayer;     
    }
    
    player.src = playList[currentTrack].media_url;
    if(debug) console.log("media loaded");
    //if(debug) console.log(playList[currentTrack].media_url);
    currentDuration = playList[currentTrack].duration_seconds;

    if(trackChanged){
      //stupid IE
      var ua = window.navigator.userAgent;
      var msie = ua.indexOf("MSIE ");
      if (msie > 0 || !!navigator.userAgent.match(/Trident.*rv\:11\./)) {
        player.addEventListener('loadeddata', function() {
            player.currentTime = 0;
            if(debug) console.log("Player to start at 0 seconds");
            player.removeEventListener('loadeddata', arguments.callee);
          }, false);
      } else {
        player.currentTime = 0;
      }

      $(".sharethis-inline-share-buttons").attr({
          'data-url': playList[currentTrack].permalink_url,
          'data-image': playList[currentTrack].thumbnail_url,
          'data-title': playList[currentTrack].item_title
      });
      $("title").html(playList[currentTrack].item_title);

      if(debug) console.log("Resetting player to start at 0 seconds");
    } else {
      //player.currentTime = currentTimeStart;
      player.addEventListener('loadeddata', function() {
        player.currentTime = currentTimeStart;
        if(debug) console.log("Player to start at " + currentTimeStart + " seconds");
        player.removeEventListener('loadeddata', arguments.callee);
      }, false);
      
    }

    

    $(".thumbnail-image").attr("src", playList[currentTrack].thumbnail_url);
    $(".episode-title").html(playList[currentTrack].item_title);

    //move playlist along
    $('.playlist-item.current').removeClass("current");
    itemTrack = $("#track"+currentTrack);
    itemTrack.addClass("current");
    $(".playlist-content").scrollTo(itemTrack, 1000);

    //update dynamic controls if we need to
    if(playList[currentTrack].embed_code == null || playList[currentTrack].download_link == null){

      var itemId = playList[currentTrack].item_id;
      $.ajax({
          url: '/embed/getitemdetails',
          type: "GET",
          data : { 
            item_id : itemId,
            height : "300",
            autoplay : "false",
            direction : "backward",
            thumbnail : "1",
            theme : "custom",
            customcolor : "ac8104",
            renderplaylist : "true"
          },
          success: function(data) {
            //update the embed code
            updateDynamicContent(data.embed_code,data.download_link);
          }
      });

  } else {
    updateDynamicContent(playList[currentTrack].embed_code,playList[currentTrack].download_link);
  }
}

function playPlayer(trackChanged){
  //remove overlay
  $(".dark-overlay").fadeOut();

  //if track has changed
  if(trackChanged){

    //pause the player
    pausePlayer();

    //check for premium
    if(!playList[currentTrack].is_free && !premium_access){
      //denied
      $("#denied-overlay").slideDown("fast");
      return false;
    }

    //update the player
    updatePlayer(trackChanged);
    
  } 

  var isVideo = playList[currentTrack].is_video;
  if(isVideo && mode == "audio"){
    renderVideoMode();   
  }
  else if(!isVideo && mode == "video"){   
    renderAudioMode();
  }

  //play track
  player.play();
  $(".play").hide();
  $(".pause").show();
}

function pausePlayer() {
  currentTimeStart = player.currentTime;
  player.pause();
  $(".pause").hide();
  $(".play").show();
}

function addToPlaylist(item){
  totalTracks = playList.length;
  newIndex = totalTracks;
  playList[newIndex] = item;
  var html = '<div class="playlist-item '+ (currentTrack == newIndex ? "current" : "") +'" id="track'+newIndex+'" data-index="'+newIndex+'">';
  html += '<div class="playlist-item-thumb">';
  html += '<img src="'+ item.thumbnail_url +'"></div>';
  if(!item.is_free && !premium_access){
    html += '<div class="playlist-item-status denied"></div>';
  } else {
    html += '<div class="playlist-item-status standby"></div>';
  }
  
  html += '<div class="playlist-item-info">';
  html += '<div class="playlist-item-title">'+item.item_title+'</div>';
  html += '<div class="playlist-item-duration">'+item.duration +'</div>';
  html += '<div class="playlist-item-date">'+item.release_date;
  html += '<div class="playlist-item-info-link" data-item-id="'+item.item_id +'">';
  html += '</div></div></div></div>';      
  html += '<div id="desc-'+item.item_id+'" class="playlist-item-desc">No description found</div>';

  $(".playlist-content").append(html);
}

$(function() {
  
  /***** ADD INITAL TRACK ***********/
  var playlistItem = {"item_id":6147467,"item_title":"EP55: Let\u2019s Do Lunch!","item_subtitle":"","duration":"00:33:23","media_url":"http:\/\/traffic.libsyn.com\/force-cdn\/highwinds\/hollywoodandlevine\/EP055_Hollywood__Levine.mp3?dest-id=451633","media_url_libsyn":"http:\/\/traffic.libsyn.com\/force-cdn\/highwinds\/hollywoodandlevine\/EP055_Hollywood__Levine.mp3?dest-id=451633","download_link":"http:\/\/traffic.libsyn.com\/forcedn\/hollywoodandlevine\/EP055_Hollywood__Levine.mp3?dest-id=451633","permalink_url":"http:\/\/traffic.libsyn.com\/hollywoodandlevine\/EP055_Hollywood__Levine.mp3?dest-id=451633","embed_code":"<iframe style=\"border: none\" src=\"\/\/html5-player.libsyn.com\/embed\/episode\/id\/6147467\/height\/300\/theme\/custom\/autoplay\/no\/autonext\/no\/thumbnail\/yes\/preload\/no\/no_addthis\/no\/direction\/backward\/render-playlist\/yes\/custom-color\/ac8104\/\" height=\"300\" width=\"100%\" scrolling=\"no\"  allowfullscreen webkitallowfullscreen mozallowfullscreen oallowfullscreen msallowfullscreen><\/iframe>","media_type":"mp3","release_date":"Jan 18, 2018","thumbnail_url":"https:\/\/assets.libsyn.com\/secure\/item\/6147467\/?height=90&width=90","is_video":false,"is_free":true};
  // have to add duration in seconds
  playlistItem.duration_seconds = convertTimeToSeconds("00:33:23");
  currentDuration = playlistItem.duration_seconds;
  addToPlaylist(playlistItem);
  updatePlayer(false);
  if(autoPlay){
    playPlayer(false);
  }
  /***** END ADD INITAL TRACK ***********/


  /***** BEGIN EVENT LISTENERS ***********/
  $(".play").on("click", function() { 
    playPlayer(false);
  });

  $(".pause").on("click", function() {
    pausePlayer(false);
  });

  $(".seek-bar").on("click", function(e) {

    // to get part of width of progress bar clicked
    var widthclicked = e.pageX - $(this).offset().left.toFixed();
    var curSeekWidth = $(this).width();
    var seekPercentage = ((widthclicked / curSeekWidth) * 100).toFixed();
    var curDuration = playList[currentTrack].duration_seconds;
    var audioSeekInSeconds = ((seekPercentage / 100) * curDuration).toFixed();

    $(".play-bar").width(seekPercentage + "%");
    currentTimeStart = audioSeekInSeconds;
    player.currentTime = currentTimeStart;
    playPlayer(false);
    if(debug) console.log("seek bar clicked");
  });

  $(".skip-thirty").on("click", function(e) {
    var curTime = player.currentTime;
    currentTimeStart = curTime + 30;
    player.currentTime = currentTimeStart;
    playPlayer(false);
  });

  $(".prev-thirty").on("click", function(e) {
    var curTime = player.currentTime;
    currentTimeStart = curTime - 30;
    player.currentTime = currentTimeStart;
    playPlayer(false);
  });

  $(".skip").on("click", function(e) {
    currentTrack = currentTrack + 1;
    playPlayer(true);
  });

  $(".prev").on("click", function(e) {
    currentTrack = currentTrack - 1;
    playPlayer(true);
  });

  $(".full-screen").on("click", function() {
    if (player.requestFullscreen) {
      player.requestFullscreen();
    } else if (player.mozRequestFullScreen) {
      player.mozRequestFullScreen();
    } else if (player.webkitRequestFullscreen) {
      player.webkitRequestFullscreen();
    } else if (player.webkitEnterFullScreen) {
      player.webkitEnterFullScreen();
    }
  });

  $(".reset-view").on("click", function() {
      pausePlayer();
      renderAudioMode();
  });

  player.onwaiting = function() {
    $(".loading").show();
    if(debug) console.log("waiting");
  };

  player.onplaying = function() {
    $(".loading").hide();
    if(debug) console.log("playing");
  };
  player.onpause = function(event) {
    event.preventDefault();
    pausePlayer();
    if(debug) console.log("paused");
  };
  player.onseeking = function() {
    $(".loading").show();
    if(debug) console.log("seeking");
  };
  player.onseeked = function() {
    $(".loading").hide();
    if(debug) console.log("done seeking");
  };
  player.ontimeupdate = function() {
    var curTime = Math.ceil(this.currentTime);
    var seekPercentage = ((curTime / currentDuration) * 100);
    //if(debug) console.log(curTime + " / " +currentDuration+ " = "+ seekPercentage);
    $(".play-bar").width(seekPercentage + "%");
    var timeElapsed = returnSecondsToHms(Math.ceil(curTime));
    $(".elapsed").html(timeElapsed);
    parent.postMessage(timeElapsed,'*');    
  };

  player.onended = function() {
    if(renderPlaylist){
        currentTrack = currentTrack + 1;
        playPlayer(true);
    }
  };

  $("#video").on("timeupdate", function(e) {
    var curTime = Math.ceil(this.currentTime);
    var seekPercentage = ((curTime / currentDuration) * 100);
    //console.log(curTime + " / " +currentDuration+ " = "+ seekPercentage);
    $(".play-bar").width(seekPercentage + "%");
    var timeElapsed = returnSecondsToHms(Math.ceil(curTime));
    $(".elapsed").html(timeElapsed);
  });

  $("#video").on("click", function(e) {
    if(debug) console.log("video clicked");
    if(this.paused) {
      if(debug) console.log("video WAS paused");
      $(".play").trigger("click");
      if(debug) console.log("video now playing");
    } else {
      if(debug) console.log("video WAS playing");
      $(".pause").trigger("click");
      if(debug) console.log("video now paused");
    }
  });


  /****** END EVENT LISTENERS ***********/

 /***** BEGIN OVERLAYS/POPUPS LISTENERS ***********/
 $(".close-overlay").on( "click", function() {
    $(".dark-overlay").slideUp();
  });

  var shareThisLoaded = false;
  $("#share, #rss, #embed").on("click", function() {

    var shareThisLoaded = false;
    if($(this).attr("id") == "share"){
      if(!shareThisLoaded){
        var stscript = document.createElement('script');
        stscript.setAttribute('type', 'text/javascript');
        stscript.setAttribute('src', '//platform-api.sharethis.com/js/sharethis.js#property=59cd45ccfeebe0001600e94e&product=inline-share-buttons');
        document.head.appendChild(stscript);
        shareThisLoaded = true;
      }         
    }
    
    var overlayDiv = $(this).data('div-open');
    $("#"+overlayDiv).slideDown(200, "swing");
  });


  /***** END OVERLAYS/POPUPS LISTENERS ***********/

  /**************PLAYLIST ACTIONS *********/
  
  if(renderPlaylist){

    var playListHeight = $(".playlist").height();
    var trackHeight = 50;
    totalTracksToFillPlaylist = Math.ceil(playListHeight/trackHeight) + 1;

    //add initial media into playlist
    retrieveItems(); 

    //add playlist event listeners
    $(document.body).on('click', '.playlist-item-info-link' ,function(){
      var itemId = $(this).data('item-id');
      //load description if necessary
      var curDesc = $("#desc-"+itemId).html();
      if(curDesc == "No description found"){
        $.ajax({
          url: '/embed/getitemdetails',
          type: "GET",
          data : { 
            item_id : itemId
          },
          success: function(data) {
            if (data.item_body != '') {   
              var itemDesc = data.item_body.replace("<p></p>", "");   
              $("#desc-"+itemId).html(itemDesc).find('a').each(function(){
                $(this).attr("target", "_blank");
              });
            } 
          }
        });
      }
      $(this).toggleClass("active");
      $("#desc-"+itemId).slideToggle("fast");
      $(".playlist-content").scrollTo($(this), 1000);
    });

    $(document.body).on('click', '.playlist-item-thumb, .playlist-item-status, .playlist-item-title' ,function(){
      var itemTrack = $(this).closest('.playlist-item');
      var selectedTrackIndex = itemTrack.data('index');      
      currentTrack = selectedTrackIndex;
      playPlayer(true);
    });

    $(".nano").on("scrollend", function(e){
         $(".spinner").fadeIn();
          retrieveItems();
          $(".spinner").fadeOut();
    });    
  }
  /**************************************/

  $(".resource-button-link").on("click", function(event) {
      event.preventDefault();
      var href = $(this).attr("href");
      window.open(href);
  });  
});

if(renderPlaylist){
  $(window).load(function(){
    $(".nano").nanoScroller({ alwaysVisible: true});
  });
}

/*embed.ly reciever */
var adapter = playerjs.HTML5Adapter(player);
adapter.ready();
</script> 
	<script>
		$('#premium-launch-link').click(function(){
			$(this).closest(".libsyn-overlay").hide();
		});
	</script>
</body>
</html>
