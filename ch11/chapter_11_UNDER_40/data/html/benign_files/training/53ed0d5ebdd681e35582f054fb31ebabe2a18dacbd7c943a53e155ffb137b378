<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
    <meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
    <title>微端注册页面</title>
    <link rel="stylesheet" type="text/css" charset="UTF-8" href="//cdn.51img1.com/v6/game/platform/act/wd/wd_common.css?v=201407283" />
<link rel="stylesheet" type="text/css" href="//cdn.51img1.com/v6/game/platform/act/wd/sr/css/style.css?v=20171115" /><script type="text/javascript" src="//cdn.51img1.com/v6/global/js/jquery.js?v=201710193" charset="UTF-8"></script>
<script type="text/javascript" src="//cdn.51img1.com/v6/global/js/global.js?v=201708123" charset="UTF-8"></script>
<script type="text/javascript" src="//cdn.51img1.com/v6/passport/js/weilogin.js?v=201711153" charset="UTF-8"></script>
<script type="text/javascript" src="//cdn.51img1.com/v6/game/platform/act/wd/wd_reg.js?v=201601093" charset="UTF-8"></script>
<script type="text/javascript" src="//cdn.51img1.com/v6/passport/js/aes.js?v=201601093" charset="UTF-8"></script>
<script type="text/javascript" src="//cdn.51img1.com/v6/passport/js/pad-zeropadding.js?v=201601093" charset="UTF-8"></script>
<script type="text/javascript">
eval(function(p,a,c,k,e,d){
	/*var aess_confdig = {"key":"b8c07555631720f80cbf854d9d3d1e47"};*/
	e=function(c){return c};if(!''.replace(/^/,String)){while(c--){d[c]=k[c]||c}k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c])}}return p}('3 2={"1":"0","4":"5","8":"7","6":"9"};',10,10,'1234577290ABCDEF1264147890ACAE45|iv|aes_config|var|key|8038ceffed239acb2c4708873c07ed4e|k1c|b5a2b157e3526345e903397caa32194c|k1|d80eed6ff3a6c7f5d6e9da9b0be224c1'.split('|'),0,{}))

</script>    <style type="text/css">
        html{overflow: hidden;}
    </style>
</head>

<body  class="body_wt" >
    <div class="wrap_box">
                <iframe id="_ajax_iframediv_" src="//passport.51.com/login/proxy" style="display:none;"  ></iframe>
        <div class="bd_login_zc">
            <table>
                <tr>
                    <td><label for="name">&nbsp;&nbsp;&nbsp;帐号：</label></td>
                    <td><input class="username" type="text" name="username" id="username" /><i id="username_ico_id" ></i></td>
                </tr>
                <tr height="19">
                    <td>&nbsp;</td>
                    <td class="prompt"><span id="username_msg_id">用户名在6-16位之间</span></td></tr>
                <tr>
                    <td><label for="password">&nbsp;&nbsp;&nbsp;密码：</label></td>
                    <td><input class="nserpw" type="password" name="password" id="password" /><i id="password_ico_id" ></i></td>
                </tr>
                <tr height="19">
                    <td>&nbsp;</td>
                    <td  class="prompt"><span id="password_msg_id">6-20个字符（区分大小写)</span></td></tr>
                <tr>
                    <td><label for="password">&nbsp;&nbsp;&nbsp;确认密码：</label></td>
                    <td><input class="nserpw" type="password" name="password_2" id="password_2" onkeydown="if (event.keyCode == 13)
                                badao_reg_js.register();" /><i id="password_ico_id2" ></i></td>
                </tr>
                <tr height="19">
                    <td>&nbsp;</td>
                    <td class="prompt"><span id="password_2_msg_id">重复输入上面输入的密码</span></td></tr>

                <tr style="display: none;">
                    <td><label for="password">&nbsp;&nbsp;&nbsp;姓名：</label></td>
                    <td><input class="nserpw" type="text" name="realname" id="realname" /><i id="realname_ico_id" ></i></td>
                </tr>
                <tr style="display: none;" height="19">
                    <td>&nbsp;</td>
                    <td class="prompt"><span id="realname_msg_id">真实姓名</span></td></tr>
                <tr style="display: none;">
                    <td><label for="password">&nbsp;&nbsp;&nbsp;身份证：</label></td>
                    <td><input class="nserpw" type="text" name="idcard" id="idcard" /><i id="idcard_ico_id" ></i></td>
                </tr>
                <tr style="display: none;" height="19">
                    <td>&nbsp;</td>
                    <td class="prompt"><span id="idcard_msg_id">身份证号码</span></td></tr>
            </table>

            <p class="bd_zc"><a href="###" style="cursor: pointer;" onclick="badao_reg_js.register();">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a></p>
            <span  style="cursor: pointer;" class="weixin_user" onclick="badao_reg_js.weixin_login();" id="weixin_login_span">微信用户登录</span>
            <span  style="cursor: pointer;"  class="old_user" onclick="badao_reg_js.go_to_login()">老用户登录</span>
            <span  style="cursor: pointer;" class="qq_user" onclick="badao_reg_js.qqLogin();" id="qq_login_span">QQ用户登录</span>
                    </div>
            </div>
    <script type="text/javascript">
        var checkidcard = !$('#realname').is(':hidden');
        document.domain = "51.com";
        function loadbgimg() {
            var img = new Image();
            img.src = '//tg.51.com/tools/images/bgroud.gif?v=' + Math.random();
        }
        loadbgimg();
        var port = {
            gourl: "http://micro.51.com/client/index/sr/?from=1_33_483_41627_2578_wdsrsc&site_css=", from_encode: "1_33_483_41627_2578_wdsrsc",
                    getgourl: function () {
                        return this.gourl;
                    },
                    jump_url: function (url) {
                        location.href = url;
                    },
                    getfromencode: function () {
                        return this.from_encode;
                    }
                }

                var badao_reg_js = {
                    username_code: '-1',
                    username_msg: '用户名在6-16位之间',
                    password_code: '-1',
                    password_msg: '6-20个字符（区分大小写)',
                    password_2_code: '-1',
                    password_2_msg: '',
                    realname_code: '-1',
                    realname_msg: '真实姓名',
                    idcard_code: '-1',
                    idcard_msg: '身份证号码',
                    allow_submit: 'ok',
                    init: function () {
                        this.username_code = '-1';
                        this.username_msg = '';
                        //this.display_username_msg();
                    },
                    password_init: function () {
                        this.password_code = '-1';
                        this.password_msg = '6-20个字符（区分大小写)';
                        //this.display_password_msg();
                    },
                    password_2_init: function () {
                        this.password_2_code = '-1';
                        this.password_2_msg = '';
                        //this.display_password_2_msg();
                    },
                    realname_init: function () {
                        this.realname_code = '-1';
                        this.realname_msg = '';
                        //this.display_realname_msg();
                    },
                    idcard_init: function () {
                        this.idcard_code = '-1';
                        this.idcard_msg = '';
                        //this.display_idcard_msg();
                    },
                    get_username: function () {
                        return $('#username').val();
                    },
                    check_username: function () {
                        this.username_code == '-1';
                        this.username_msg = '';
                        var username = this.get_username();
                        var u_sub = username.substr(0, 1);
                        var pattern = /^[a-zA-Z][a-zA-Z0-9_]{1,14}[a-zA-Z0-9]$/i;
                        var patternLastChar = /^[a-zA-Z0-9_]{1,15}_$/i;
                        var patternFirstChar = /^[0-9_][a-zA-Z0-9_]{1,14}$/i;
                        if (username == '') {
                            this.username_code = '2001';
                            this.username_msg = '用户名在6-16位之间';
                        } else if (!(u_sub >= 'a' && u_sub <= 'z' || u_sub >= 'A' && u_sub <= 'Z')) {
                            this.username_code = '2002';
                            this.username_msg = '首字符必须为字母';
                        } else if (!(username.length > 2 && username.length < 17)) {
                            this.username_code = '2003';
                            this.username_msg = '帐号长度3-16位';
                        } else if (patternFirstChar.test(username)) {
                            this.username_code = '2004';
                            this.username_msg = '必须以字母开头';
                        } else if (patternLastChar.test(username)) {
                            this.username_code = '2005';
                            this.username_msg = '不能以下划线结尾';
                        } else if (!pattern.test(username)) {
                            this.username_code = '2006';
                            this.username_msg = '帐号只允许字母、数字、下划线组合';
                        } else if (username.toLowerCase().indexOf("xx") != -1) {
                            this.username_code = '2007';
                            this.username_msg = '帐号中不能包含xx';
                        }
                        if (this.username_code == '-1') {
                            this.check_username_exsit();
                        } else {
                            this.display_username_msg();
                        }
                    },
                    display_username_msg: function () {
                        if ('-1' != this.username_code) {
                            $("#username_ico_id").removeClass().addClass('wrong');
                            $("#username_msg_id").html(this.username_msg);
                        } else {
                            $("#username_ico_id").removeClass().addClass('right');
                            $("#username_msg_id").html('');
                        }
                    },
                    display_password_msg: function () {
                        if ('-1' != this.password_code) {
                            $("#password_ico_id").removeClass().addClass('wrong');
                            $("#password_msg_id").html(this.password_msg);
                        } else {
                            $("#password_ico_id").removeClass().addClass('right');
                            $("#password_msg_id").html('');
                        }
                    },
                    display_password_2_msg: function () {
                        if ('-1' != this.password_2_code) {
                            $("#password_ico_id2").removeClass().addClass('wrong');
                            $("#password_2_msg_id").html(this.password_2_msg);
                        } else {
                            $("#password_ico_id2").removeClass().addClass('right');
                            $("#password_2_msg_id").html('');
                        }
                    },
                    display_realname_msg: function () {
                        if ('-1' != this.realname_code) {
                            $("#realname_ico_id").removeClass().addClass('wrong');
                            $("#realname_msg_id").html(this.realname_msg);
                        } else {
                            $("#realname_ico_id").removeClass().addClass('right');
                            $("#realname_msg_id").html('');
                        }
                    },
                    display_idcard_msg: function () {
                        if ('-1' != this.idcard_code) {
                            $("#idcard_ico_id").removeClass().addClass('wrong');
                            $("#idcard_msg_id").html(this.idcard_msg);
                        } else {
                            $("#idcard_ico_id").removeClass().addClass('right');
                            $("#idcard_msg_id").html('');
                        }
                    },
                    check_username_exsit: function () {
                        var username = this.get_username();
                        var params_data = {chn: 'game', user: username};
                        var parmas = {
                            'data': params_data,
                            'dataType': 'json',
                            'type': 'POST',
                            'url': 'http://passport.51.com/reg/checkusernameapi',
                            'callback': badao_reg_js.checkusernameapi_callback,
                            'async': false
                        };
                        quickRegister._ajax(parmas);
                    },
                    checkusernameapi_callback: function (data) {
                        if ('object' == typeof data) {
                            if (data.ret == 1) {
                                badao_reg_js.username_code = '-1';
                                badao_reg_js.username_msg = '';
                            } else if (data.ret == -2) {
                                badao_reg_js.username_code = '2008';
                                badao_reg_js.username_msg = '您输入的帐号已经被注册';
                            } else {
                                badao_reg_js.username_code = '2009';
                                badao_reg_js.username_msg = '您输入的帐号已经被注册';
                            }
                            badao_reg_js.display_username_msg();
                        }
                    },
                    check_password: function () {
                        //badao_reg_js.password_init();
                        badao_reg_js.password_code == '-1';
                        var password = $('#password').val();
                        if (password.length < 6 || password.length > 20) {
                            badao_reg_js.password_code = '3001';
                            badao_reg_js.password_msg = '6-20个字符（区分大小写)';
                        }
                        badao_reg_js.display_password_msg();
                    },
                    check_password_2: function () {
                        badao_reg_js.password_2_code = '-1';
                        var password = $('#password').val();
                        var password_2 = $('#password_2').val();
                        if (password_2.length < 6) {
                            badao_reg_js.password_2_code = '4003';
                            badao_reg_js.password_2_msg = '密码不少于6位';
                        }
                        if (password_2 == "") {
                            badao_reg_js.password_2_code = '4002';
                            badao_reg_js.password_2_msg = '请输入确认密码';
                        }
                        if (password != password_2) {
                            badao_reg_js.password_2_code = '4001';
                            badao_reg_js.password_2_msg = '两次输入的密码不一致';
                        }
                        badao_reg_js.display_password_2_msg();
                    },
                    check_realname: function () {
                        badao_reg_js.realname_code == '-1';
                        var realname = $('#realname').val();
                        if (realname.length < 2 || realname.length > 5) {
                            badao_reg_js.realname_code = '5001';
                            badao_reg_js.realname_msg = '真实姓名由2-5个汉字组成';
                        } else if (!/^[\u4E00-\u9FA5]+$/.test(realname)) {
                            badao_reg_js.realname_code = '5002';
                            badao_reg_js.realname_msg = '姓名只能由中文组成';
                        }
                        badao_reg_js.display_realname_msg();
                    },
                    check_idcard: function () {
                        badao_reg_js.realname_code == '-1';
                        var idcard = $('#idcard').val();
                        if (idcard.length < 2) {
                            badao_reg_js.idcard_code = '6001';
                            badao_reg_js.idcard_msg = '请输入正确的身份证号码';
                            badao_reg_js.display_idcard_msg();
                        } else if (!/^[0-9]+[x|X]?$/.test(idcard)) {
                            //格式有误
                            badao_reg_js.idcard_code = '6002';
                            badao_reg_js.idcard_msg = '输入的身份证号码有误';
                            badao_reg_js.display_idcard_msg();
                        } else if (idcard.length != 15 && idcard.length != 18) {
                            //位数不对
                            badao_reg_js.idcard_code = '6003';
                            badao_reg_js.idcard_msg = '输入的身份证号码位数不正确';
                            badao_reg_js.display_idcard_msg();
                        } else {
                            var tourl = '//' + fodomain.get_domain('passport') + '/reg/checkCID?callback=?&cid=' + idcard;
                            $.getJSON(tourl, '', function (o) {
                                if (o && parseInt(o.status) == 1) {
                                    badao_reg_js.idcard_code = '-1';
                                    badao_reg_js.username_msg = '';
                                } else {
                                    badao_reg_js.idcard_code = '6004';
                                    badao_reg_js.username_msg = '输入的身份证号码有误';
                                }
                                badao_reg_js.display_idcard_msg();
                            });
                        }
                    },
                    doc_init: function () {
                        $("#username").bind("focus", function () {
                            badao_reg_js.init()
                        }).bind('blur', function () {
                            badao_reg_js.check_username()
                        });
                        $("#password").bind("focus", function () {
                            badao_reg_js.password_init()
                        }).bind('blur', function () {
                            badao_reg_js.check_password()
                        });
                        $("#password_2").bind("focus", function () {
                            badao_reg_js.password_2_init()
                        }).bind('blur', function () {
                            badao_reg_js.check_password_2()
                        });
                        if (checkidcard) {
                            $("#realname").bind("focus", function () {
                                // console.log(1);
                                badao_reg_js.realname_init()
                            }).bind('blur', function () {
                                // console.log(2);
                                badao_reg_js.check_realname()
                            });
                            $("#idcard").bind("focus", function () {
                                // console.log(3);
                                badao_reg_js.idcard_init()
                            }).bind('blur', function () {
                                // console.log(4);
                                badao_reg_js.check_idcard()
                            });
                        }

                    },
                    getHL: function (text) {
                        text = $.trim(text);
                        var h = text.charAt(0);
                        var l = text.charAt((text.length - 1));
                        return h + '' + l;
                    },
                    aes: function (text) {
                        text = $.trim(text);
                        var key = aes_config.key;
                        var iv = aes_config.iv;
                        key = CryptoJS.enc.Utf8.parse(key);
                        iv = CryptoJS.enc.Utf8.parse(iv);
                        var encrypted = CryptoJS.AES.encrypt(text, key, {
                            iv: iv,
                            mode: CryptoJS.mode.CBC,
                            padding: CryptoJS.pad.ZeroPadding

                        }).toString();
                        return encrypted;
                    },
                    check_all: function () {
                        badao_reg_js.check_username();
                        badao_reg_js.check_password();
                        badao_reg_js.check_password_2();
                        if (checkidcard) {
                            badao_reg_js.check_realname();
                            badao_reg_js.check_idcard();
                        }
                    },
                    register: function () {
                        loadbgimg();
                        badao_reg_js.check_all();
                        setTimeout(badao_reg_js.register_do, 1000);
                        return false;
                    },
                    register_do: function () {
                        if (badao_reg_js.username_code != '-1' || badao_reg_js.password_code != '-1' || badao_reg_js.password_2_code != '-1') {

                            badao_reg_js.display_username_msg();
                            badao_reg_js.display_password_msg();
                            badao_reg_js.display_password_2_msg();
                            if (checkidcard) {
                                if (badao_reg_js.realname_code != '-1' || badao_reg_js.idcard_code != '-1') {
                                    badao_reg_js.display_realname_msg();
                                    badao_reg_js.display_idcard_msg();
                                    return false;
                                }
                            }

                            return false;
                        } else {
                            if (checkidcard) {
                                if (badao_reg_js.realname_code != '-1' || badao_reg_js.idcard_code != '-1') {
                                    badao_reg_js.display_realname_msg();
                                    badao_reg_js.display_idcard_msg();
                                    return false;
                                }
                            }
                            var gourl = encodeURIComponent(port.getgourl());
                            var from = port.getfromencode();
                            var username = badao_reg_js.get_username();
                            var password = $("#password").val();
                            var password_2 = $("#password_2").val();
                            var reg_url = encodeURIComponent(location.href);
                            var referer_url = encodeURIComponent(document.referrer);
                            var json_data = {'chn': 'game', 'type': 'username', 'user': username, 'pass': password, 'repass': password_2, 'sex': 1, 'from': from, 'reg_url': reg_url, 'referer_url': referer_url, 'redirect_url': gourl};
                            if (checkidcard) {
                                var realname = $("#realname").val();
                                var idcard = $("#idcard").val();
                                json_data.realname = realname;
                                json_data.idcard = idcard;
                            }
                            /*
                             var parmas = {
                             'data': json_data,
                             'dataType': 'json',
                             'type': 'POST',
                             'url': 'http://passport.51.com/reg/qajaxapi',
                             'callback': badao_reg_js.qajaxapi_callback,
                             'async': false
                             };
                             quickRegister._ajax(parmas);
                             */
                            if (typeof aes_config != "undefined") {
                                //加密传输
                                json_data.aes = 1;
                                json_data.user_ht = badao_reg_js.getHL(username);
                                json_data.user = badao_reg_js.aes(username);
                                json_data.password_ht = badao_reg_js.getHL(password);
                                json_data.pass = badao_reg_js.aes(password);
                                json_data.repassword_ht = badao_reg_js.getHL(password_2);
                                json_data.repass = badao_reg_js.aes(password_2);
                            }
                            var url = '//passport.51.com/reg/qJsonpApi';
                            if (navigator.appName == "Microsoft Internet Explorer" && navigator.appVersion.split(";")[1].replace(/[ ]/g, "") == "MSIE7.0") {
                                url = 'http:' + url;
                            } else {
                                url = 'https:' + url;
                            }
                            $.ajax({
                                url: url,
                                data: json_data,
                                dataType: "jsonp",
                                jsonp: "callback",
                                async: false,
                                success: function (api_data) {
                                    badao_reg_js.qajaxapi_callback(api_data);
                                }
                            });
                        }

                    },
                    qajaxapi_callback: function (data) {
                        //console.dir(e);
                        if ('object' == typeof data) {
                            if (data.ret == 1) {
                                badao_reg_js.allow_submit = "no";
                                port.jump_url(data.url);
                            } else {
                                loadbgimg();
                                alert(data.errmsg);
                                if (data.errno == 3002) {
                                    location.reload();
                                }
                            }
                        }
                    },
                    weixin_login: function () {
                        weilogin._gourl = encodeURIComponent("http://micro.51.com/client/index/sr/?from=1_33_483_41627_2578_wdsrsc&site_css=");
                                    weilogin.wechatLogin();

                                },
                                go_to_login: function () {
                                    location.href = "http://micro.51.com/client/index/sr/?f_reg=1&from=1_33_483_41627_2578_wdsrsc&site_css=";
                                            },
                                            qqLogin: function () {
                                                weilogin._login3open = false;
                                                    weilogin._login3open = true;
                                                    weilogin._gourl = encodeURIComponent("http://micro.51.com/client/index/sr/?from=1_33_483_41627_2578_wdsrsc&site_css=");
                                                            weilogin.qqLogin();
                                                        }
                                                    };

                                                    badao_reg_js.doc_init();

    </script>

        <script type="text/javascript">
        function wd_pic(url) {
            var aaa = new Image();
            aaa.src = url;
        }
setTimeout(function(){wd_pic("http://www.4dwan.com/install/wd/a.html?mac=5a501cb013d817.71550040&time=1515199664&game_ename=sr&ch=wdsrsc&token=0d607fb87a4925c8c58bd55bd1d501b2&fb=1_33_483_41627_2578_wdsrsc")},1000);
    </script>
    </body>
</html>