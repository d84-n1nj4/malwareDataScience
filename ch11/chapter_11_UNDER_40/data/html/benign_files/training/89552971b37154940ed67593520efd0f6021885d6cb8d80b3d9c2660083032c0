<html><head></head><body><pre style="word-wrap: break-word; white-space: pre-wrap;">jQuery.autocomplete_gd=function(input,options){var me=this;var $input=jQuery(input).attr("autocomplete","off");if(options.inputClass)$input.addClass(options.inputClass);var results=document.createElement("div");var $results=jQuery(results);$results.show().addClass(options.resultsClass).css("position","absolute");if(options.width&gt;0)$results.css("width",options.width);jQuery("body").append(results);input.autocompleter=me;var timeout=null;var prev="";var active=-1;var cache={};var keyb=false;var hasFocus=false;var lastKeyPressCode=null;function flushCache(){cache={};cache.data={};cache.length=0}flushCache();if(options.data!=null){var sFirstChar="",stMatchSets={},row=[];if(typeof options.url!="string")options.cacheLength=1;for(var i=0;i&lt;options.data.length;i++){row=typeof options.data[i]=="string"?[options.data[i]]:options.data[i];if(row[0].length&gt;0){sFirstChar=row[0].substring(0,1).toLowerCase();if(!stMatchSets[sFirstChar])stMatchSets[sFirstChar]=[];stMatchSets[sFirstChar].push(row)}}for(var k in stMatchSets){options.cacheLength++;addToCache(k,stMatchSets[k])}}$input.keydown(function(e){lastKeyPressCode=e.keyCode;switch(e.keyCode){case 38:e.preventDefault();moveSelect(-1);break;case 40:e.preventDefault();moveSelect(1);break;case 9:case 13:if(selectCurrent()){$input.get(0).blur();e.preventDefault()}break;default:active=-1;if(timeout)clearTimeout(timeout);timeout=setTimeout(function(){onChange()},options.delay);break}}).focus(function(){hasFocus=true}).blur(function(){hasFocus=false;hideResults()});hideResultsNow();function onChange(){if(lastKeyPressCode==46||lastKeyPressCode&gt;8&amp;&amp;lastKeyPressCode&lt;32)return $results.show();var v=$input.val();if(v==prev)return;prev=v;if(v.length&gt;=options.minChars){$input.addClass(options.loadingClass);requestData(v)}else{$input.removeClass(options.loadingClass);$results.show()}}function moveSelect(step){var lis=jQuery("li",results);if(!lis)return;active+=step;if(active&lt;0){active=0}else if(active&gt;=lis.size()){active=lis.size()-1}lis.removeClass("ac_over");jQuery(lis[active]).addClass("ac_over")}function selectCurrent(){var li=jQuery("li.ac_over",results)[0];if(!li){var $li=jQuery("li",results);if(options.selectOnly){if($li.length==1)li=$li[0]}else if(options.selectFirst){li=$li[0]}}if(li){selectItem(li);return true}else{return false}}function selectItem(li){if(!li){li=document.createElement("li");li.extra=[];li.selectValue=""}var v=jQuery.trim(li.selectValue?li.selectValue:li.innerHTML);input.lastSelected=v;prev=v;$results.html("");$input.val(v);hideResultsNow();if(options.onItemSelect)setTimeout(function(){options.onItemSelect(li,$input.parents("form"))},1)}function createSelection(start,end){var field=$input.get(0);if(field.createTextRange){var selRange=field.createTextRange();selRange.collapse(true);selRange.moveStart("character",start);selRange.moveEnd("character",end);selRange.select()}else if(field.setSelectionRange){field.setSelectionRange(start,end)}else{if(field.selectionStart){field.selectionStart=start;field.selectionEnd=end}}field.focus()}function autoFill(sValue){if(lastKeyPressCode!=8){$input.val($input.val()+sValue.substring(prev.length));createSelection(prev.length,sValue.length)}}function showResults(){$results.appendTo("body");$results.css({display:"block"});var pos=findPos(input);var iWidth=options.width&gt;0?options.width:$input.outerWidth();$results.css({width:parseInt(iWidth)+"px",top:$input.offset().top+$input.outerHeight(true),left:pos.x+"px"}).show()}function hideResults(){if(jQuery(".ac_results:hover").length!=0){return setTimeout(hideResults,100)}if(timeout)clearTimeout(timeout);timeout=setTimeout(hideResultsNow,200)}function hideResultsNow(){$results.css({display:"none"});if(timeout)clearTimeout(timeout);$input.removeClass(options.loadingClass);if($results.is(":visible")){$results.show()}if(options.mustMatch){var v=$input.val();if(v!=input.lastSelected){selectItem(null)}}}function receiveData(q,data){if(data){$input.removeClass(options.loadingClass);results.innerHTML="";if(!hasFocus||data.length==0)return hideResultsNow();if(jQuery.browser.msie){$results.append(document.createElement("iframe"))}results.appendChild(dataToDom(data));if(options.autoFill&amp;&amp;$input.val().toLowerCase()==q.toLowerCase())autoFill(data[0][0]);showResults()}else{hideResultsNow()}}function parseData(data){if(!data)return null;var parsed=[];var rows=data.split(options.lineSeparator);for(var i=0;i&lt;rows.length;i++){var row=jQuery.trim(rows[i]);if(row){parsed[parsed.length]=row.split(options.cellSeparator)}}return parsed}function dataToDom(data){var ul=document.createElement("ul");var num=data.length;if(options.maxItemsToShow&gt;0&amp;&amp;options.maxItemsToShow&lt;num)num=options.maxItemsToShow;for(var i=0;i&lt;num;i++){var row=data[i];if(!row)continue;var li=document.createElement("li");if(options.formatItem){li.innerHTML=options.formatItem(row,i,num);li.selectValue=row[0]}else{li.innerHTML=row[0];li.selectValue=row[0]}var extra=null;if(row.length&gt;1){extra=[];for(var j=1;j&lt;row.length;j++){extra[extra.length]=row[j]}}li.extra=extra;ul.appendChild(li);jQuery(li).hover(function(){jQuery("li",ul).removeClass("ac_over");jQuery(this).addClass("ac_over");active=jQuery("li",ul).indexOf(jQuery(this).get(0))},function(){jQuery(this).removeClass("ac_over")}).click(function(e){e.preventDefault();e.stopPropagation();selectItem(this)})}return ul}function requestData(q){if(!options.matchCase)q=q.toLowerCase();var data=options.cacheLength?loadFromCache(q):null;if(data&amp;&amp;data.length){receiveData(q,data)}else if(typeof options.url=="string"&amp;&amp;options.url.length&gt;0){jQuery.ajax({url:makeUrl(q),type:"GET",dataType:"html",beforeSend:function(){geodir_search_wait(1)},success:function(data,textStatus,xhr){data=parseData(data);addToCache(q,data);receiveData(q,data);geodir_search_wait(0)},error:function(xhr,textStatus,errorThrown){console.log(textStatus);geodir_search_wait(0)}})}else{$input.removeClass(options.loadingClass)}}function makeUrl(q){var sform=jQuery($input).closest("form");var url=options.url+"&amp;q="+encodeURI(q);for(var i in options.extraParams){url+="&amp;"+i+"="+encodeURI(options.extraParams[i])}if($input.attr("name")==geodir_advanced_search_js_msg.autocomplete_field_name){if(sform.find('[name="set_location_type"]').length){url+="&amp;_ltype="+encodeURI(sform.find('[name="set_location_type"]').val())}if(sform.find('[name="set_location_val"]').length){url+="&amp;_lval="+encodeURI(sform.find('[name="set_location_val"]').val())}if(sform.find('[name="gd_hood_s"]').length){url+="&amp;_lhood="+encodeURI(sform.find('[name="gd_hood_s"]').val())}}return url}function loadFromCache(q){if(gdNearChanged){flushCache();gdNearChanged=false;return null}if(!q)return null;if(cache.data[q])return cache.data[q];if(options.matchSubset){for(var i=q.length-1;i&gt;=options.minChars;i--){var qs=q.substr(0,i);var c=cache.data[qs];if(c){var csub=[];for(var j=0;j&lt;c.length;j++){var x=c[j];var x0=x[0];if(matchSubset(x0,q)){csub[csub.length]=x}}return csub}}}return null}function matchSubset(s,sub){if(!options.matchCase)s=s.toLowerCase();var i=s.indexOf(sub);if(i==-1)return false;return i==0||options.matchContains}this.flushCache=function(){flushCache()};this.setExtraParams=function(p){options.extraParams=p};this.findValue=function(){var q=$input.val();if(!options.matchCase)q=q.toLowerCase();var data=options.cacheLength?loadFromCache(q):null;if(data&amp;&amp;data.length){findValueCallback(q,data)}else if(typeof options.url=="string"&amp;&amp;options.url.length&gt;0){jQuery.get(makeUrl(q),function(data){data=parseData(data);addToCache(q,data);findValueCallback(q,data)})}else{findValueCallback(q,null)}};function findValueCallback(q,data){if(data)$input.removeClass(options.loadingClass);var num=data?data.length:0;var li=null;for(var i=0;i&lt;num;i++){var row=data[i];if(row[0].toLowerCase()==q.toLowerCase()){li=document.createElement("li");if(options.formatItem){li.innerHTML=options.formatItem(row,i,num);li.selectValue=row[0]}else{li.innerHTML=row[0];li.selectValue=row[0]}var extra=null;if(row.length&gt;1){extra=[];for(var j=1;j&lt;row.length;j++){extra[extra.length]=row[j]}}li.extra=extra}}if(options.onFindValue)setTimeout(function(){options.onFindValue(li)},1)}function addToCache(q,data){if(!data||!q||!options.cacheLength)return;if(!cache.length||cache.length&gt;options.cacheLength){flushCache();cache.length++}else if(!cache[q]){cache.length++}cache.data[q]=data}function findPos(obj){var curleft=obj.offsetLeft||0;var curtop=obj.offsetTop||0;while(obj=obj.offsetParent){curleft+=obj.offsetLeft;curtop+=obj.offsetTop}return{x:curleft,y:curtop}}};jQuery.fn.autocomplete_gd=function(url,options,data){options=options||{};options.url=url;options.data=typeof data=="object"&amp;&amp;data.constructor==Array?data:null;options.inputClass=options.inputClass||"ac_input";options.resultsClass=options.resultsClass||"ac_results";options.lineSeparator=options.lineSeparator||"\n";options.cellSeparator=options.cellSeparator||"|";options.minChars=options.minChars||1;options.delay=options.delay||400;options.matchCase=options.matchCase||0;options.matchSubset=options.matchSubset||1;options.matchContains=options.matchContains||0;options.cacheLength=options.cacheLength||1;options.mustMatch=options.mustMatch||0;options.extraParams=options.extraParams||{};options.loadingClass=options.loadingClass||"ac_loading";options.selectFirst=options.selectFirst||false;options.selectOnly=options.selectOnly||false;options.maxItemsToShow=options.maxItemsToShow||-1;options.autoFill=options.autoFill||false;options.width=parseInt(options.width,10)||0;this.each(function(){var input=this;new jQuery.autocomplete_gd(input,options)});return this};jQuery.fn.autocompleteArray=function(data,options){return this.autocomplete_gd(null,options,data)};jQuery.fn.indexOf=function(e){for(var i=0;i&lt;this.length;i++){if(this[i]==e)return i}return-1};(function(){})();function geodir_search_setup_ac(){if(geodir_advanced_search_js_msg.geodir_location_manager_active==1&amp;&amp;geodir_advanced_search_js_msg.geodir_enable_autocompleter_near==1){jQuery(".snear").each(function(){jQuery(this).keyup(function(){jQuery(this).removeClass("near-country near-region near-city")})});jQuery("input[name=snear]").autocomplete_gd(geodir_advanced_search_js_msg.geodir_admin_ajax_url+"?action=geodir_autocompleter_near_ajax_action",{delay:500,minChars:parseInt(geodir_var.as_min_char),matchSubset:1,matchContains:1,cacheLength:1,formatItem:formatItemNear,onItemSelect:onSelectItemNear,autoFill:false})}if(jQuery(".search_by_post").val()){gd_s_post_type=jQuery(".search_by_post").val()}else if(jQuery('.geodir-search input[name="stype"]').val()){gd_s_post_type=jQuery('.geodir-search input[name="stype"]').val()}else{gd_s_post_type="gd_place"}setTimeout(function(){jQuery(".search_by_post").change(function(){gd_s_post_type=jQuery(this).val();jQuery(".ac_results").remove();jQuery.each(gdsa,function(index,item){if(this.autocompleter){this.autocompleter.setExtraParams({post_type:gd_s_post_type});this.autocompleter.flushCache()}})})},100);if(geodir_advanced_search_js_msg.geodir_enable_autocompleter==1){try{var gdsa=jQuery(".geodir_submit_search").closest("form").find("input[name="+geodir_advanced_search_js_msg.autocomplete_field_name+"]").autocomplete_gd(geodir_advanced_search_js_msg.geodir_admin_ajax_url+"?action=geodir_autocompleter_ajax_action",{delay:500,minChars:parseInt(geodir_var.as_min_char),matchSubset:1,matchContains:1,cacheLength:1,formatItem:formatItem,onItemSelect:onSelectItem,autoFill:false,extraParams:{post_type:gd_s_post_type}})}catch(e){}}if(jQuery(".gd-adv-search-labels label").length){jQuery(".gd-adv-search-labels label").live("click",function(event){var dataName=jQuery(this).attr("data-name");var dataNames=jQuery(this).attr("data-names");if(typeof dataName!="undefined"||jQuery(this).hasClass("gd-adv-search-near")){if(jQuery(this).hasClass("gd-adv-search-near")){dataName="snear"}var dataEl=jQuery("form.geodir-listing-search").find('[name="'+dataName+'"]');gd_adv_search_deselect(dataEl);if(typeof dataNames!="undefined"){dataEl=jQuery("form.geodir-listing-search").find('[name="'+dataNames+'"]');gd_adv_search_deselect(dataEl)}jQuery("form.geodir-listing-search").find(".geodir_submit_search").click()}})}jQuery(".geodir_advance_search_widget.geodir-advance-search-searched").each(function(){var $this=this;if(jQuery($this).attr("data-show-adv")=="search"){jQuery(".showFilters",$this).trigger("click")}});jQuery(".customize_filter",".geodir-filter-container").each(function(){var $cont=this;var $form=jQuery($cont).closest("form");var $adv_show=jQuery($form).closest(".geodir_advance_search_widget").attr("data-show-adv");if($adv_show=="always"&amp;&amp;typeof jQuery(".showFilters",$form).html()!="undefined"){jQuery(".showFilters",$form).remove();if(!jQuery(".customize_filter",$form).is(":visible")){jQuery(".customize_filter",$form).slideToggle(500)}}})}jQuery(document).ready(function($){gdsText=jQuery('input[type="button"].geodir_submit_search').val();jQuery(".geodir_submit_search").click(function(){var $form=jQuery(this).closest("form");geodir_search_wait(1);var is_near_me=false;var $snear=jQuery(".snear",$form).val();if($snear==geodir_advanced_search_js_msg.msg_Near+" "+geodir_advanced_search_js_msg.msg_Me){is_near_me=true}else if($snear==geodir_advanced_search_js_msg.msg_Near+" "+geodir_advanced_search_js_msg.msg_User_defined){is_near_me=true}else if($snear.match("^"+geodir_advanced_search_js_msg.msg_In)){is_near_me=true}if(jQuery(".sgeo_lat").val()!=""&amp;&amp;jQuery(".sgeo_lon").val()!=""&amp;&amp;!is_near_me){jQuery(".sgeo_lat").val("");jQuery(".sgeo_lon").val("")}return false});geodir_search_setup_ac();jQuery("body").on("geodir_setup_search_form",function(){geodir_search_setup_ac();gdSetupUserLoc()})});function gd_adv_search_deselect(el){var fType=jQuery(el).prop("type");switch(fType){case"checkbox":case"radio":jQuery(el).prop("checked",false);break}jQuery(el).val("")}function gdGetLocation(box){jQuery(".snear").removeClass("near-country near-region near-city");if(box&amp;&amp;box.prop("checked")!=true){gdClearUserLoc();return}if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){lat=position.coords.latitude;lon=position.coords.longitude;gdSetUserLocation(position.coords.latitude,position.coords.longitude,1)},gdLocationError,gdLocationOptions)}else{alert(geodir_advanced_search_js_msg.GEOLOCATION_NOT_SUPPORTED)}}function gdClearUserLoc(){lat="";lon="";my_location="";userMarkerActive=true;gdSetUserLocation(lat,lon,my_location)}function setusermarker(new_lat,new_lon,map_id){if(window.gdMaps=="osm"){setusermarker_osm(new_lat,new_lon,map_id);return}var image=new google.maps.MarkerImage(geodir_advanced_search_js_msg.geodir_advanced_search_plugin_url+"/css/map_me.png",null,null,new google.maps.Point(8,8),new google.maps.Size(17,17));if(map_id){goMap=jQuery("#"+map_id).goMap()}if(gdUmarker["visible"]){return}if(typeof goMap=="undefined"){return}var coord=new google.maps.LatLng(lat,lon);gdUmarker=jQuery.goMap.createMarker({optimized:false,flat:true,draggable:true,id:"map_me",title:"Set Location",position:coord,visible:true,clickable:true,icon:image});jQuery.goMap.createListener({type:"marker",marker:"map_me"},"dragend",function(){latLng=gdUmarker.getPosition();lat=latLng.lat();lon=latLng.lng();gdSetUserLocation(lat,lon,0)});userMarkerActive=true}function setusermarker_osm(new_lat,new_lon,map_id){if(map_id){goMap=jQuery("#"+map_id).goMap()}if(jQuery.goMap.gdUmarker){return}if(typeof goMap=="undefined"){return}gdUmarker=jQuery.goMap.createMarker({optimized:false,flat:true,draggable:true,id:"map_me",title:"Set Location",position:new L.latLng(lat,lon),visible:true,clickable:true,addToMap:true});gdUmarker.setIcon(L.divIcon({iconSize:[17,17],iconAnchor:[8.5,8.5],className:"gd-user-marker",html:'&lt;div class="gd-user-marker-box"&gt;&lt;div class="gd-user-marker-animate"&gt;&lt;/div&gt;&lt;img class="gd-user-marker-img" src="'+geodir_advanced_search_js_msg.geodir_advanced_search_plugin_url+"/css/map_me.png"+'" /&gt;&lt;/div&gt;'}));gdUmarker.on("dragend",function(e){gdULatLng=gdUmarker.getLatLng();gdSetUserLocation(gdULatLng.lat,gdULatLng.lng,0)});jQuery.goMap.gdUmarker=gdUmarker;userMarkerActive=true}function moveUserMarker(lat,lon){if(window.gdMaps=="google"){var coord=new google.maps.LatLng(lat,lon);gdUmarker.setPosition(coord)}else if(window.gdMaps=="osm"){var coord=new L.latLng(lat,lon);gdUmarker.setLatLng(coord)}}function removeUserMarker(){if(typeof goMap!="undefined"){jQuery.goMap.removeMarker("map_me")}userMarkerActive=false}function gdLocationError(error){switch(error.code){case error.PERMISSION_DENIED:alert(geodir_advanced_search_js_msg.PERMISSION_DENINED);break;case error.POSITION_UNAVAILABLE:alert(geodir_advanced_search_js_msg.POSITION_UNAVAILABLE);break;case error.TIMEOUT:alert(geodir_advanced_search_js_msg.DEFAUTL_ERROR);break;case error.UNKNOWN_ERROR:alert(geodir_advanced_search_js_msg.UNKNOWN_ERROR);break}}function gdSetupUserLoc(){if(my_location){jQuery(".geodir-search .fa-compass").css("color",geodir_advanced_search_js_msg.compass_active_color);jQuery(".gt_near_me_s").prop("checked",true);jQuery(".snear").val(geodir_advanced_search_js_msg.msg_Near+" "+geodir_advanced_search_js_msg.msg_Me);jQuery(".sgeo_lat").val(lat);jQuery(".sgeo_lon").val(lon)}else{if(lat&amp;&amp;lon){jQuery(".geodir-search .fa-compass").css("color",geodir_advanced_search_js_msg.compass_active_color);jQuery(".gt_near_me_s").prop("checked",true);jQuery(".snear").val(geodir_advanced_search_js_msg.msg_Near+" "+geodir_advanced_search_js_msg.msg_User_defined);jQuery(".sgeo_lat").val(lat);jQuery(".sgeo_lon").val(lon)}else if(jQuery(".snear").length&amp;&amp;jQuery(".snear").val().match("^"+geodir_advanced_search_js_msg.msg_Near)){jQuery(".geodir-search .fa-compass").css("color","");jQuery(".gt_near_me_s").prop("checked",false);jQuery(".snear").val("");jQuery(".snear").blur();jQuery(".sgeo_lat").val("");jQuery(".sgeo_lon").val("")}}}function gdSetUserLocation(lat,lon,my_loc){if(my_loc){my_location=1}else{my_location=0}gdSetupUserLoc();if(userMarkerActive==false){jQuery.each(map_id_arr,function(key,value){setusermarker(lat,lon,value)})}else if(lat&amp;&amp;lon){moveUserMarker(lat,lon)}else{removeUserMarker()}jQuery.ajax({url:geodir_advanced_search_js_msg.geodir_admin_ajax_url,type:"POST",dataType:"html",data:{action:"gd_set_user_location",lat:lat,lon:lon,myloc:my_location},success:function(data,textStatus,xhr){},error:function(xhr,textStatus,errorThrown){console.log(errorThrown)}})}function gdasShowRange(el){jQuery(".gdas-range-value-out").html(jQuery(el).val()+" "+geodir_advanced_search_js_msg.unom_dist)}function gdasSetRange(el){range=jQuery(el).val();var ajax_url=geodir_advanced_search_js_msg.geodir_admin_ajax_url;jQuery.post(ajax_url,{action:"geodir_set_near_me_range",range:range},function(data){})}function geodir_do_geolocation_on_load(){if(navigator.geolocation){navigator.geolocation.getCurrentPosition(geodir_position_success_on_load,geodir_position_error,{timeout:1e4})}else{var error={code:"-1"};geodir_position_error(error)}}function geodir_position_error(err){var ajax_url=geodir_advanced_search_js_msg.geodir_admin_ajax_url;var msg;var default_err=false;switch(err.code){case err.UNKNOWN_ERROR:msg=geodir_advanced_search_js_msg.UNKNOWN_ERROR;break;case err.PERMISSION_DENINED:msg=geodir_advanced_search_js_msg.PERMISSION_DENINED;break;case err.POSITION_UNAVAILABLE:msg=geodir_advanced_search_js_msg.POSITION_UNAVAILABLE;break;case err.BREAK:msg=geodir_advanced_search_js_msg.BREAK;break;case 3:geodir_position_success_on_load(null);break;default:msg=geodir_advanced_search_js_msg.DEFAUTL_ERROR;default_err=true;break}jQuery.post(ajax_url,{action:"geodir_share_location",geodir_ajax:"share_location",error:true},function(data){});if(!default_err){alert(msg)}}function geodir_position_success_on_load(position){var ajax_url=geodir_advanced_search_js_msg.geodir_admin_ajax_url;var request_param=geodir_advanced_search_js_msg.request_param;var redirect=typeof redirect!=="undefined"?redirect:"";var lat;var long;if(position&amp;&amp;position!==null){var coords=position.coords||position.coordinate||position;lat=coords.latitude;long=coords.longitude}jQuery.post(ajax_url,{action:"geodir_share_location",geodir_ajax:"share_location",lat:lat,"long":long,request_param:request_param},function(data){if(data&amp;&amp;data!=="OK"){window.location=data}})}jQuery(document).ready(function(){geodir_search_onload_redirect()});function geodir_search_onload_redirect(){var onloadRedirect=geodir_advanced_search_js_msg.onload_redirect;var onloadAskRedirect=geodir_advanced_search_js_msg.onload_askRedirect;if(!onloadAskRedirect){return}if(typeof Storage!=="undefined"&amp;&amp;sessionStorage.getItem("gd_onload_redirect_done")!="1"){sessionStorage.setItem("gd_onload_redirect_done","1");switch(onloadRedirect){case"nearest":if(geodir_advanced_search_js_msg.geodir_autolocate_ask){if(confirm(geodir_advanced_search_js_msg.geodir_autolocate_ask_msg)){geodir_do_geolocation_on_load()}else{geodir_position_do_not_share()}}else{geodir_do_geolocation_on_load()}break;case"location":var redirectLocation=geodir_advanced_search_js_msg.onload_redirectLocation;if(redirectLocation&amp;&amp;redirectLocation!==""){window.location=redirectLocation}break;case"no":default:geodir_position_do_not_share();break}}}function geodir_position_do_not_share(){var ajax_url=geodir_advanced_search_js_msg.geodir_admin_ajax_url;jQuery.post(ajax_url,{action:"geodir_do_not_share_location",geodir_ajax:"share_location"},function(data){})}function formatItemNear(row){var attr;if(row.length==3){attr='attr="'+row[2]+'"'}else{attr=""}return row[0]+"&lt;span "+attr+"&gt;&lt;/span&gt;"}gdReplaceASC_load=true;function gdReplaceASC(stype,el){if(!stype){return}var $form=jQuery(el).closest("form");var $adv_show=jQuery($form).closest(".geodir_advance_search_widget").attr("data-show-adv");jQuery($form).addClass("geodir-adv-form-wait");if($adv_show=="always"||$adv_show=="search"){jQuery(".geodir-loc-bar-in",$form).css({opacity:".66"});jQuery(".customize_filter",$form).css({opacity:".66"});if(jQuery(".customize_filter",$form).is(":visible")){jQuery(".customize_filter",$form).slideToggle(500)}}else{jQuery(".customize_filter",$form).hide("slow");jQuery(".geodir_submit_search",$form).css("visibility","visible")}var $div=jQuery(el).closest(".geodir-search");var button="";var html="";jQuery.ajax({url:geodir_advanced_search_js_msg.geodir_admin_ajax_url,type:"POST",dataType:"html",data:{action:"geodir_advance_search_button_ajax",stype:stype,adv:$adv_show},beforeSend:function(){if(!gdReplaceASC_load){geodir_search_wait(1)}gdReplaceASC_load=false},success:function(data,textStatus,xhr){jQuery($form).removeClass("geodir-adv-form-wait");jQuery("body").removeClass("gd-multi-datepicker");if(data){gdGetCustomiseHtml(stype,data,el)}else{if($adv_show=="always"||$adv_show=="search"){jQuery(".geodir_submit_search",$form).css("visibility","visible");jQuery(".geodir-loc-bar-in",$form).css({opacity:"1"})}gdSetupAjaxAdvancedSearch("","",el);geodir_search_wait(0)}geodir_reposition_compass()},error:function(xhr,textStatus,errorThrown){console.log(textStatus);geodir_search_wait(0)},complete:function(xhr,textStatus){}})}function gdGetCustomiseHtml(stype,button,el){var $adv_show=jQuery(el).closest(".geodir_advance_search_widget").attr("data-show-adv");jQuery.ajax({url:geodir_advanced_search_js_msg.geodir_admin_ajax_url,type:"POST",dataType:"html",data:{action:"gd_advancedsearch_customise",stype:stype,adv:$adv_show},beforeSend:function(){},success:function(data,textStatus,xhr){gdSetupAjaxAdvancedSearch(button,data,el);geodir_reposition_compass();geodir_search_wait(0)},error:function(xhr,textStatus,errorThrown){console.log(textStatus);geodir_search_wait(0)}})}function gdSetupAjaxAdvancedSearch(button,html,el){var $form=jQuery(el).closest("form");var $adv_show=jQuery($form).closest(".geodir_advance_search_widget").attr("data-show-adv");if(button){if(jQuery(".showFilters",$form).length){}else{jQuery(".geodir_submit_search:visible",$form).after(button)}jQuery($form).addClass("geodir-adv-form");jQuery(".geodir-filter-container",$form).html(html);if($adv_show=="always"||$adv_show=="search"){jQuery(".geodir-loc-bar-in",$form).css({opacity:"1"});if(!jQuery(".customize_filter",$form).is(":visible")){jQuery(".customize_filter",$form).slideToggle(500)}if($adv_show=="always"){jQuery(".showFilters",$form).remove()}else{jQuery("body").addClass("geodir_advance_search")}}else{jQuery("body").addClass("geodir_advance_search")}}else{jQuery(".showFilters",$form).remove();jQuery(".geodir-filter-container",$form).html("");jQuery("body").removeClass("geodir_advance_search");jQuery($form).removeClass("geodir-adv-form")}geodir_setup_submit_search()}function onSelectItem(row,$form){if(geodir_advanced_search_js_msg.geodir_autocompleter_autosubmit==1){var link=jQuery(row).find("span").attr("link");if(typeof link!="undefined"&amp;&amp;link!=""){window.location.href=link;return true}if($form.find(' input[name="snear"]').val()==geodir_advanced_search_js_msg.default_Near){jQuery('input[name="snear"]').val("")}if(jQuery(".search_by_post",$form).val()!=""&amp;&amp;typeof gd_cpt_no_location=="function"){if(gd_cpt_no_location(jQuery(".search_by_post",$form).val())){jQuery(".snear",$form).remove();jQuery(".sgeo_lat",$form).remove();jQuery(".sgeo_lon",$form).remove();jQuery('select[name="sort_by"]',$form).remove()}}if(typeof jQuery(row).find("span").attr("attr")!="undefined"){jQuery("input.geodir_submit_search",$form).trigger("click")}else{jQuery("input.geodir_submit_search",$form).trigger("click")}}else{jQuery(row).parents("form").find('input[name="'+geodir_advanced_search_js_msg.autocomplete_field_name+'"]').focus()}}function onSelectItemNear(row,$form){nClass="";lType="";gdNearChanged=true;if(row.extra[2]==1){nClass="near-country";lType=geodir_advanced_search_js_msg.txt_in_country}else if(row.extra[2]==2){nClass="near-region";lType=geodir_advanced_search_js_msg.txt_in_region}else if(row.extra[2]==3){nClass="near-city";lType=geodir_advanced_search_js_msg.txt_in_city}else if(row.extra[2]==4){nClass="near-neighbourhood";lType=geodir_advanced_search_js_msg.txt_in_hood;if($form.find(' input[name="gd_hood_s"]').length){$form.find(' input[name="gd_hood_s"]').val(row.extra[3])}else{$form.find(' input[name="snear"]').after('&lt;input name="gd_hood_s" type="hidden" value="'+row.extra[3]+'" /&gt;')}}if(row.extra[2]!=4){$form.find('input[name="gd_hood_s"]').remove()}fillVal=geodir_advanced_search_js_msg.msg_In+" "+row.extra[0]+" "+lType;$form.find(' input[name="snear"]').val(fillVal);if($form.find(' input[name="set_location_val"]').length){$form.find(' input[name="set_location_val"]').val(row.extra[1])}else{$form.find(' input[name="snear"]').after('&lt;input name="set_location_val" type="hidden" value="'+row.extra[1]+'" /&gt;')}if($form.find(' input[name="set_location_type"]').length){$form.find(' input[name="set_location_type"]').val(row.extra[2])}else{$form.find(' input[name="snear"]').after('&lt;input name="set_location_type" type="hidden" value="'+row.extra[2]+'" /&gt;')}$form.find(' input[name="snear"]').removeClass("near-country near-region near-city");if(nClass){$form.find(' input[name="snear"]').addClass(nClass)}if(geodir_advanced_search_js_msg.geodir_autocompleter_autosubmit_near==1){setTimeout(function(){$form.find(".geodir_submit_search").click()},100)}}function formatItem(row){var attr;if(row.length==3&amp;&amp;row[2]!=""){attr='attr="'+row[2]+'"'}else{attr=""}var link="";var icon="";var exp=/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&amp;%@!\-\/]))?/;if(typeof row[1]!="undefined"&amp;&amp;row[1]!=""&amp;&amp;exp.test(row[1])){link=' link="'+row[1]+'" class="gd-search-has-link"';icon='&lt;i class="fa fa-angle-double-right"&gt;&lt;/i&gt;'}return row[0]+"&lt;span "+attr+" "+link+"&gt;"+icon+"&lt;/span&gt;"}function geodir_insert_compass(){if(geodir_advanced_search_js_msg.search_new_style=="1"){return}jQuery(".snear").each(function(){var $this=jQuery(this);jQuery('&lt;span class="near-compass" data-dropdown=".gd-near-me-dropdown"&gt;&lt;/span&gt;').css({position:"absolute",left:$this.position().left+$this.outerWidth()+parseInt($this.css("margin-left"))-$this.innerHeight(),top:$this.position().top+parseInt($this.css("margin-top"))+($this.outerHeight()-$this.innerHeight())/2,fontSize:($this.innerHeight()+parseInt($this.css("margin-top")))*.95,"line-height":"0px"}).html('&lt;i class="fa fa-compass"&gt;&lt;/i&gt;').data("inputEQ",$this.index()).insertAfter($this)});jQuery(window).resize(function(){geodir_reposition_compass()})}function geodir_reposition_compass(){if(geodir_advanced_search_js_msg.search_new_style=="1"){return}jQuery(".snear").each(function(){var $this=jQuery(this);jQuery($this).next(".near-compass").css({position:"absolute",left:$this.position().left+$this.outerWidth()+parseInt($this.css("margin-left"))-$this.innerHeight(),top:$this.position().top+parseInt($this.css("margin-top"))+($this.outerHeight()-$this.innerHeight())/2,fontSize:($this.innerHeight()+parseInt($this.css("margin-top")))*.95,"line-height":"0px"})})}function geodir_search_expandmore(el){var moretext=jQuery.trim(jQuery(el).text());jQuery(el).closest("ul").find(".more").toggle("slow");if(moretext==geodir_advanced_search_js_msg.text_more){jQuery(el).text(geodir_advanced_search_js_msg.text_less)}else{jQuery(el).text(geodir_advanced_search_js_msg.text_more)}}if(typeof window.gdShowFilters==="undefined"){window.gdShowFilters=function(fbutton){var $form=jQuery(fbutton).closest("form");var $adv_show=jQuery($form).closest(".geodir_advance_search_widget").attr("data-show-adv");if($adv_show=="always"){}else{jQuery("button.showFilters i").addClass("fa-spin");jQuery(".customize_filter",$form).slideToggle("slow",function(){jQuery("button.showFilters i").removeClass("fa-spin")})}}}jQuery&amp;&amp;function(t){function o(o,d){var n=o?t(this):d,a=t(n.attr("data-dropdown")),s=n.hasClass("dropdown-open");if(o){if(t(o.target).hasClass("dropdown-ignore"))return;o.preventDefault(),o.stopPropagation()}else if(n!==d.target&amp;&amp;t(d.target).hasClass("dropdown-ignore"))return;r(),s||n.hasClass("dropdown-disabled")||(n.addClass("dropdown-open"),a.data("dropdown-trigger",n).show(),e(),a.trigger("show",{dropdown:a,trigger:n}))}function r(o){var r=o?t(o.target).parents().addBack():null;if(r&amp;&amp;r.is("div.gd-dropdown")){if(!r.is(".dropdown-menu"))return;if(!r.is("A"))return}t(document).find("div.gd-dropdown:visible").each(function(){var o=t(this);o.hide().removeData("dropdown-trigger").trigger("hide",{dropdown:o})}),t(document).find(".dropdown-open").removeClass("dropdown-open")}function e(){var o=t(".gd-dropdown:visible").eq(0),r=o.data("dropdown-trigger"),e=r?parseInt(r.attr("data-horizontal-offset")||0,10):null,d=r?parseInt(r.attr("data-vertical-offset")||0,10):null;jQuery(o).appendTo("body");0!==o.length&amp;&amp;r&amp;&amp;o.css(o.hasClass("dropdown-relative")?{left:o.hasClass("dropdown-anchor-right")?r.position().left-(o.outerWidth(!0)-r.outerWidth(!0))-parseInt(r.css("margin-right"),10)+e:r.position().left+parseInt(r.css("margin-left"),10)+e,top:r.position().top+r.outerHeight(!0)-parseInt(r.css("margin-top"),10)+d}:{left:o.hasClass("dropdown-anchor-right")?r.offset().left-(o.outerWidth()-r.outerWidth())+e:r.offset().left+e,top:r.offset().top+r.outerHeight(true)+d})}t.extend(t.fn,{dropdown:function(e,d){switch(e){case"show":return o(null,t(this)),t(this);case"hide":return r(),t(this);case"attach":return t(this).attr("data-dropdown",d);case"detach":return r(),t(this).removeAttr("data-dropdown");case"disable":return t(this).addClass("dropdown-disabled");case"enable":return r(),t(this).removeClass("dropdown-disabled")}}}),t(document).on("click.dropdown","[data-dropdown]",o),t(document).on("click.dropdown",r),t(window).on("resize",e)}(jQuery);</pre></body></html>