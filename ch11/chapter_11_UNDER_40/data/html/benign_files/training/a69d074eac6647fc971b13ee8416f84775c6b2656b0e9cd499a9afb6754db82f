<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">  
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<title>
	Вывести сообщение всем пользователям залогиненым в linux.</title>
	<!-- Q0XBE14AXRoKM3aw045qtmL5rTY -->
	<!-- 3PcQ6ENLb-mfR_GpwmcsC1QzzqE -->
	<link rel="shortcut icon" href="/img/site.ico" type="image/x-icon"/>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<script type="text/javascript" src="/js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript" src="/js/jquery.rating.js"></script>
	<script type="text/javascript" src="/js/jquery.MetaData.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shCore.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushCpp.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushCSharp.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushCss.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushDelphi.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushJava.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushJScript.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushPhp.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushPython.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushRuby.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushSql.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushVb.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushCc.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushBash.js"></script>
	<script type="text/javascript" src="/js/syntaxhighlighter_3.0.83/scripts/shBrushXml.js"></script>

	<link rel="stylesheet" type="text/css" href="/css/main.css" />
	<link rel="stylesheet" type="text/css" href="/css/jquery.rating.css" />
	<link rel="stylesheet" type="text/css" href="/css/shCoreDefault.css" />
<meta name="keywords" content="Вывести сообщение всем пользователям залогиненым в linux." /><meta name="description" content=" как пользователи работающие в консоли, так и в иксах(например в kde есть специальная служба сообщений, которая выдает красивое окошко в панели задач). Данное сообщение можно использовать для разных целей, например предупредить пользователей о каком-то критическом обновлении или действии, но злоупотреблять этим тоже не стоит ;) Итак команда достаточно короткая:&lt;/p&gt;
&lt;p&gt;&lt;span style=&quot;color: rgb(128, 128, 128);&quot;&gt;logger -p auth.emerg [ваше сообщение]&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;Пару примеров:&lt;/p&gt;
&lt;div&gt;&lt;span style=&quot;color: rgb(128, 128, 128);&quot;&gt;logger -p auth.emerg [щас свет рубанут, спаси и сохрани]&lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span style=&quot;color: rgb(128, 128, 128);&quot;&gt;logger -p auth.emerg [фродо, срочно выйди в аську]&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;Посмотреть кто получит ваше сообщение можно командой (w):&lt;/p&gt;
&lt;div&gt;&lt;span style=&quot;color: rgb(128, 128, 128);&quot;&gt;# w&lt;br /&gt;
12:06:40 up 10 days,&amp;nbsp; 5:55,&amp;nbsp; n users,&amp;nbsp; load average: 1,66, 1,31, 1,29&lt;br /&gt;
USER&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; TTY&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; FROM&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; LOGIN@&amp;nbsp;&amp;nbsp; IDLE&amp;nbsp;&amp;nbsp; JCPU&amp;nbsp;&amp;nbsp; PCPU WHAT&lt;br /&gt;
user1 &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; pts/2&amp;nbsp;&amp;nbsp;&amp;nbsp; ip &amp;nbsp;&amp;nbsp;&amp;nbsp; Wed09&amp;nbsp;&amp;nbsp;&amp;nbsp; 0.00s&amp;nbsp; 0.04s&amp;nbsp; 0.02s sshd: user1 [priv]&amp;nbsp;&amp;nbsp; &lt;/span&gt;&lt;/div&gt;
&lt;div&gt;&lt;span style=&quot;color: rgb(128, 128, 128);&quot;&gt;...&lt;/span&gt;&lt;/div&gt;
&lt;p&gt;Данный способ можно использовать и в программировании, например в php-cgi достаточно заключить команду в ``&lt;/p&gt;" />	<script type="text/javascript">SyntaxHighlighter.all();</script>
	<meta name="google-site-verification" content="3QMGMI_e8OJ1_i4AwoPKvkcgKH_qKyn9at57iHt3xRQ" />
	<script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
	<meta name='yandex-verification' content='6f79929d9cd3a3e1' />
	<!-- SAPE RTB JS -->
	<script
	    async="async"
	    src="//cdn-rtb.sape.ru/rtb-b/js/751/2/6751.js"
	    type="text/javascript">
	</script>
	<!-- SAPE RTB END -->
</head>
<body>
<div class='blockload' style="
	display:none;
	z-index:9998;
	filter: alpha(opacity=50); /* IE 5.5+*/
   -moz-opacity: 0.4; /* Mozilla 1.6 и ниже */
   -khtml-opacity: 0.4; /* Konqueror 3.1+, Safari 1.1 */
   opacity: 0.4; /* CSS3 - Mozilla 1.7b +, Firefox 0.9 */
   position:absolute; top:0; left:0; width:100%; height:100%; background: #eeeeee;">
</div>
<noscript>
<div style='left:0px;top:0px;width:100%;height:100%;position:fixed;z-index: 99999;background: #ffffff;padding-top:200px;text-align:center;color:red;'><h3>Ваш браузер не поддерживает Java Script!</h3><br>
<div style='color:green'>
Opera: Главное меню->Инструменты->Быстрые настройки->Включить Java Script<br>
Firefox: Главное меню->Правка->Настройки->Содержимое->Включить Java Script<br>
Internet Explorer:Сервис->Свойства обозревателя->Безопасность->Параметры безопасности->Активные сценарии->Разрешить
</div></div>
</noscript>
<![if !IE 6]>
<input id="webroot" type="hidden" value="/"/>

    <div class="wrapper">
    	<div class='bhead' style="cursor:pointer" onclick="location.replace('http://newblog.kz');">
    		<img src="/img/logo.jpg" alt="" />    	</div>
    	<div class='bmenu'>
<div class='mainmenu'>

        	<div class='mitem'><a href="/">Главная</a></div>
		
	
	
	<div class='mitem'><a href="/pages/authors">Статьи по авторам</a></div>	
	<div class='mitem'><a href="/bookmark/allbookmark">Закладки блоггеров</a></div><div class='mitem'><a href="/bookmark/exlist">Поиск по закладкам</a></div>
	<div class='mitem'><a href="/pages/contacts">Обратная связь</a></div>
	
	<div class='mitem'><a href="/pages/about">О проекте</a></div>
</div></div>
    	<div class='blogin'><form action="/users/login" id="UserLoginForm" method="post" accept-charset="utf-8"><div style="display:none;"><input type="hidden" name="_method" value="POST" /></div><table class='lmenu' style='padding:5px;' width=100%>
	<tr>
		<td width=10><a href="/users/reg">Регистрация</a></td>
		<td width=10></td>
		<td width=50>Логин</td>
		<td width=10><div class="input text required"><input name="data[User][username]" type="text" maxlength="255" id="UserUsername" /></div></td>
		<td width=50>Пароль</td>
		<td width=10><div class="input password required"><input type="password" name="data[User][password]" id="UserPassword" /></div>		
				
		</td>
		<td width=10><div class="submit"><input type="submit" value="Вход" /></div></form></td>
		<td></td>
		<td width=10>
        <a title='Лента RSS' style='float:left' href="http://feeds.feedburner.com/newblogkz"><img style='border:none' src='/img/rss.png'/></a>
		</td>
		<td width=10>
		<a href="https://twitter.com/newblogkz" class="twitter-follow-button" data-lang="ru">Читать @newblogkz</a>
<script src="//platform.twitter.com/widgets.js" type="text/javascript"></script>
		</td>
	</tr>
</table>
</div>
    	<div class='bnavigation'>
    		<div class='left_menu'><h3>Статистика</h3>
<table class='lmtable' cellpadding="0" cellspacing="0" width=100%>
		<tr>
		<td>Участников проекта</td>
		<td width=30 style='text-align:right'>105</td>
	</tr>
	<tr>
		<td>Опубликовано статей</td>
		<td style='text-align:right'>78</td>
	</tr>
		<tr>
		<td colspan=2><a href="/users/karma">Отчет по карме. Топ 20</a></td>
	</tr>
</table>
<h3>Новости блога</h3>

<table class='lmtable_new' cellpadding="0" cellspacing="0" width=100%>
		<tr onclick="window.document.location.href='/posts/view/129'">
		<td style='border:solid #F8F8F8 1px;width:64px;height:64px;' background="/img/news/new11.jpeg" width=30>

				<span style='font-size:7pt;color:#7777ff;position:relative;z-index: 999;left:55px; top:23px;margin: 0;padding: 0;'>1</span>
		</img>
		</td>
		<td>		
		
		<span style='color:#3E3C22;font-weight:bold;'>29.11.2013		</span>&nbsp;Сегодня самым активным участникам newblog'а был выплачен доход с sape.		</td>
	</tr>	
		<tr onclick="window.document.location.href='/posts/view/111'">
		<td style='border:solid #F8F8F8 1px;width:64px;height:64px;' background="/img/news/tic10.jpg" width=30>

				<span style='font-size:7pt;color:#7777ff;position:relative;z-index: 999;left:55px; top:23px;margin: 0;padding: 0;'>7</span>
		</img>
		</td>
		<td>		
		
		<span style='color:#3E3C22;font-weight:bold;'>02.11.2012		</span>&nbsp;Ура! Свешилось, нашему сайту дали тИЦ 10. Спасибо всем кто принимает участие в развитии нашего блога.		</td>
	</tr>	
		<tr onclick="window.document.location.href='/posts/view/87'">
		<td style='border:solid #F8F8F8 1px;width:64px;height:64px;' background="/img/news/new14.jpg" width=30>

				<span style='font-size:7pt;color:#7777ff;position:relative;z-index: 999;left:55px; top:23px;margin: 0;padding: 0;'>8</span>
		</img>
		</td>
		<td>		
		
		<span style='color:#3E3C22;font-weight:bold;'>21.08.2012		</span>&nbsp;Интеграция с sape.ru. Теперь каждый автор статей на newblog автоматически зарабатывает на рекламе.		</td>
	</tr>	
		<tr>
		<td></td>
		<td style='text-align:right'><a href="/news/allnews">Все новости</a></td>
	</tr>
</table>
<h3>Топ 5 категорий</h3>
<table class='lmtable' cellpadding="0" cellspacing="0" width=100%>
	<tr>
						<td><a href="/pages/display/1">Программирование</a></td>
		<td style='text-align:right'>46</td>
	</tr><tr>
						<td><a href="/pages/display/5">Операционные системы</a></td>
		<td style='text-align:right'>9</td>
	</tr><tr>
						<td><a href="/pages/display/8">Базы данных</a></td>
		<td style='text-align:right'>4</td>
	</tr><tr>
						<td><a href="/pages/display/9">Туризм</a></td>
		<td style='text-align:right'>2</td>
	</tr><tr>
						<td><a href="/pages/display/10">Заметки</a></td>
		<td style='text-align:right'>2</td>
	</tr></table>

<h3>Последние 5 заметок (90)</h3>
<table class='lmtable' cellpadding="0" cellspacing="0" width=100%>
	<tr>
						<td>gullyar - <a href="/bookmark/one/387">Закладки gullyar</a></td>
	</tr><tr>
						<td>gullyar - <a href="/bookmark/one/386">Ваша первая закладка</a></td>
	</tr><tr>
						<td>osadchaya - <a href="/bookmark/one/335">Закладки osadchaya</a></td>
	</tr><tr>
						<td>Ira0231188 - <a href="/bookmark/one/328">Закладки Ira0231188</a></td>
	</tr><tr>
						<td>Ira0231188 - <a href="/bookmark/one/327">Закладки Ira0231188</a></td>
	</tr></table>
<h3>Ссылки</h3>
<table class='lmtable' cellpadding="0" cellspacing="0" width=100%>
	<tr>
		<td>
			<a href='http://www.freedev.asia'>www.freedev.asia</a>
		</td>
	</tr>
</table>

<!-- SAPE RTB DIV 240x400 -->
<div id="SRTB_16344"></div>
<!-- SAPE RTB END -->    		<div style='margin:10px;text-align:center'>
    		



<!-- SAPE RTB JS -->
<script
    async="async"
    src="//cdn-rtb.sape.ru/teasers/js/751/2/6751.js"
    type="text/javascript">
</script>
<!-- SAPE RTB END --> <a href="http://samsung-galaxy3.com/" target="_blank">Цена планшет самсунг галакси</a>. 


				</div>
    		</div>
    	</div>
    	<div class='bcontent' style='min-height:1550px;'>
    		<table class='pcaption' cellpadding="0" cellspacing="0" width=100%>
		<tr>
		<td>
			
          <div style='position:relative;'>
          <img style='position:absolute;z-index:999;top:-25px;left:-10px;float:left;padding:0px' border=0 src='/img/n_free.png'/>
          </div>
          <h3><a href="/posts/view/56" style="text-decoration:none;">Вывести сообщение всем пользователям залогиненым в linux.</a></h3>		</td>

	</tr>
	<tr>
			<td style='padding-bottom:5px;border-top:solid 1px #e6e6e6;padding-left:10px;' colspan=2>

			<div style='float:left'>
							<div style='float:left;margin-top:4px;color:#0099AB;font-size:8pt'>29.12.2011 19:20 | Просмотров: 2861 | Доход: 54.25 руб. | Комментариев: 5</div>
						</div>

			<div style='float:right'>
						<div style='float:left;margin-top:4px;color:#0099AB;font-size:8pt'>[Операционные системы]&nbsp;</div>
						<div id='ppost56' style='float:left;margin-top:4px;color:#0099AB;font-size:8pt'>Рейтинг: 
			<span title='общий рейтинг'>4.5</span>/<span title='количество людей участвующих в голосовании'>2</span>			</div>

			
			<form style='margin:0;float:left;' id='form56' name="api-select">
			<span onclick='setrating(56,$("#form56").serialize());'>
			<input title='эта статья не достойна быть здесь'  value=1 name="star56" type="radio" class="star {split:1}"/>
	    <input title='плохо даже для новичка'   value=2 name="star56" type="radio" class="star {split:1}"/>
	    <input title='средний сорт не брак'  value=3 name="star56" type="radio" class="star {split:1}"/>
	    <input title='хорошая статья'  value=4 name="star56" type="radio" class="star {split:1}"/>
	    <input title='отличная статья!!!' checked="checked" value=5 name="star56" type="radio" class="star {split:1}"/>
	    </span>
			</form>
			
	    </div>
			</td>
	</tr>
</table>
<script>
function setrating(post_id,rating){
	var massfind = new Array();
	massfind = rating.split('star');
	var massfind2 = new Array();
	massfind2 = massfind[1].split('=');
	rating=massfind2[1];
	srequest = $('#webroot').val()+"posts/rating";
  	$.post(srequest, {
	  	frating:rating,
	  	fpost_id:post_id
	}, function(data){
		if(data!=1){
			$('#ppost'+post_id).html(data);
		}else{
			alert('Вы уже определили рейтинг для данной статьи');
		}
	});
}
</script>
<br>
<div style="text-align:center">
<script type="text/javascript"><!--
google_ad_client = "ca-pub-1740818573047860";
/* полноразмерный */
google_ad_slot = "4579424056";
google_ad_width = 728;
google_ad_height = 90;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>


<div class='bpost'><p>Сейчас я расскажу о способе, который позволяет в <strong>Linux вывести короткое сообщение всем пользователям</strong>, которые залогинены в систему в настоящее время. Причем данное сообщение увидят как пользователи работающие в консоли, так и в иксах(например в kde есть специальная служба сообщений, которая выдает красивое окошко в панели задач). Данное сообщение можно использовать для разных целей, например предупредить пользователей о каком-то критическом обновлении или действии, но злоупотреблять этим тоже не стоит ;) Итак команда достаточно короткая:</p>
<p><span style="color: rgb(128, 128, 128);">logger -p auth.emerg [ваше сообщение]</span></p>
<p>Пару примеров:</p>
<div><span style="color: rgb(128, 128, 128);">logger -p auth.emerg [щас свет рубанут, спаси и сохрани]</span></div>
<div><span style="color: rgb(128, 128, 128);">logger -p auth.emerg [фродо, срочно выйди в аську]</span></div>
<p>Посмотреть кто получит ваше сообщение можно командой (w):</p>
<div><span style="color: rgb(128, 128, 128);"># w<br />
12:06:40 up 10 days,&nbsp; 5:55,&nbsp; n users,&nbsp; load average: 1,66, 1,31, 1,29<br />
USER&nbsp;&nbsp;&nbsp;&nbsp; TTY&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; FROM&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LOGIN@&nbsp;&nbsp; IDLE&nbsp;&nbsp; JCPU&nbsp;&nbsp; PCPU WHAT<br />
user1 &nbsp;&nbsp;&nbsp;&nbsp; pts/2&nbsp;&nbsp;&nbsp; ip &nbsp;&nbsp;&nbsp; Wed09&nbsp;&nbsp;&nbsp; 0.00s&nbsp; 0.04s&nbsp; 0.02s sshd: user1 [priv]&nbsp;&nbsp; </span></div>
<div><span style="color: rgb(128, 128, 128);">...</span></div>
<p>Данный способ можно использовать и в программировании, например в php-cgi достаточно заключить команду в ``</p>
<br>

<div style='float:left'>
<g:plusone size="small"></g:plusone>
</div>

<a href="https://twitter.com/share" class="twitter-share-button" data-count="horizontal" data-via="newblogkz" data-lang="ru">Твитнуть</a><script type="text/javascript" src="//platform.twitter.com/widgets.js"></script>
		<div align=right style='font-size:12pt;color:#ccc'>&#169; GM</div>		<div id='postcomment' class='addcomment' style='display:none;'><textarea id='t_postcomment' name='comment'></textarea></div>
		<span class='clink3' id='a_postcomment' onclick='show_postcomment(0)' style='font-size:8pt;'>| Комментировать статью |</span>
		<span class='clink2' id='c_postcomment' onclick='cansel_postcomment(0)' style='font-size:8pt;'></span>
</div>
<div class='bcomments'><ul style='margin: 0;'><li><table width=100% style='border-bottom:solid 1px #cccccc'>
				<tr><td><span class='ccap'><a style='color:#666666' href='/pages/author/WTP'>WTP</a></span><span title='карма :)' style='cursor:help;color:green;font-size:7pt'> +711 </span><span class='cdate'>(29.12.2011 15:48) 
					</span></td>
				</tr>
				<tr>
					<td><pre>Можно использовать в качестве echo дял проверки автоматически запускаемых скриптов.</pre></td>
				</tr>
				<tr>
					<td>
						<div class='addcomment' id='postcomment42' class='addcomment42' style='display:none;'><textarea id='t_postcomment42' name='comment42'></textarea></div>
						<span class='clink' onclick='show_postcomment(0,42)' id='a_postcomment42' style='font-size:8pt;'>| Ответить |</span>
						<span class='clink2' id='c_postcomment42' onclick='cansel_postcomment(0,42)' style='font-size:8pt;'></span></td>
				</tr>
			</table><ul style='margin: 0;'><li><table width=100% style='border-bottom:solid 1px #cccccc'>
				<tr><td><span class='ccap'><a style='color:#666666' href='/pages/author/GM'>GM</a></span><span title='карма :)' style='cursor:help;color:green;font-size:7pt'> +2587 </span><span class='cdate'>(29.12.2011 15:58) 
					</span></td>
				</tr>
				<tr>
					<td><pre>Хм.. еще одно оригинальное применение :)</pre></td>
				</tr>
				<tr>
					<td>
						<div class='addcomment' id='postcomment44' class='addcomment44' style='display:none;'><textarea id='t_postcomment44' name='comment44'></textarea></div>
						<span class='clink' onclick='show_postcomment(0,44)' id='a_postcomment44' style='font-size:8pt;'>| Ответить |</span>
						<span class='clink2' id='c_postcomment44' onclick='cansel_postcomment(0,44)' style='font-size:8pt;'></span></td>
				</tr>
			</table></li></ul></li><li><table width=100% style='border-bottom:solid 1px #cccccc'>
				<tr><td><span class='ccap'>Аноним</span><span title='карма :(' style='cursor:help;color:red;font-size:7pt'> 0 </span><span class='cdate'>(30.12.2011 11:12) 
					</span></td>
				</tr>
				<tr>
					<td><pre>ржака</pre></td>
				</tr>
				<tr>
					<td>
						<div class='addcomment' id='postcomment45' class='addcomment45' style='display:none;'><textarea id='t_postcomment45' name='comment45'></textarea></div>
						<span class='clink' onclick='show_postcomment(0,45)' id='a_postcomment45' style='font-size:8pt;'>| Ответить |</span>
						<span class='clink2' id='c_postcomment45' onclick='cansel_postcomment(0,45)' style='font-size:8pt;'></span></td>
				</tr>
			</table></li><li><table width=100% style='border-bottom:solid 1px #cccccc'>
				<tr><td><span class='ccap'><a style='color:#666666' href='/pages/author/saratan'>saratan</a></span><span title='карма :)' style='cursor:help;color:green;font-size:7pt'> +16 </span><span class='cdate'>(30.12.2011 11:46) 
					</span></td>
				</tr>
				<tr>
					<td><pre>эмм... на сколько я знаю стандартные средства линухи используют wall... напимер когда ты выключаешь комп или что то в этом духе
echo 'test' | wall</pre></td>
				</tr>
				<tr>
					<td>
						<div class='addcomment' id='postcomment46' class='addcomment46' style='display:none;'><textarea id='t_postcomment46' name='comment46'></textarea></div>
						<span class='clink' onclick='show_postcomment(0,46)' id='a_postcomment46' style='font-size:8pt;'>| Ответить |</span>
						<span class='clink2' id='c_postcomment46' onclick='cansel_postcomment(0,46)' style='font-size:8pt;'></span></td>
				</tr>
			</table><ul style='margin: 0;'><li><table width=100% style='border-bottom:solid 1px #cccccc'>
				<tr><td><span class='ccap'><a style='color:#666666' href='/pages/author/GM'>GM</a></span><span title='карма :)' style='cursor:help;color:green;font-size:7pt'> +2587 </span><span class='cdate'>(30.12.2011 11:50) 
					</span></td>
				</tr>
				<tr>
					<td><pre>круто.. не знал про wall, взял на заметку :)</pre></td>
				</tr>
				<tr>
					<td>
						<div class='addcomment' id='postcomment47' class='addcomment47' style='display:none;'><textarea id='t_postcomment47' name='comment47'></textarea></div>
						<span class='clink' onclick='show_postcomment(0,47)' id='a_postcomment47' style='font-size:8pt;'>| Ответить |</span>
						<span class='clink2' id='c_postcomment47' onclick='cansel_postcomment(0,47)' style='font-size:8pt;'></span></td>
				</tr>
			</table></li></ul></li></ul></div>
<br>
<script>
function cansel_postcomment(parentid,commentid){
	if(commentid) {
		tmp=commentid; 
		parentid=commentid;
		flabel='| Ответить |';
	}else{
		tmp='';
		flabel='| Комментировать статью |';
	}	
	$('#c_postcomment'+tmp).html('');
	$('#a_postcomment'+tmp).html(flabel);
	$('#postcomment'+tmp).hide();
	$('#t_postcomment'+tmp).val('');
}
function show_postcomment(parentid,commentid){
	if(commentid) {
		tmp=commentid; 
		parentid=commentid;
	}else{
		tmp='';

	}	
	if (!$("#postcomment"+tmp).is(':visible')){
		$('.addcomment').hide();

		$('.clink').html('| Ответить |');
		$('.clink3').html('| Комментировать статью |');
		$('.clink2').html('');
		
		$('#t_postcomment'+tmp).val('');
		$('#postcomment'+tmp).show();
		$('#a_postcomment'+tmp).html('| Отправить |');
		$('#c_postcomment'+tmp).html('| Отменить |');
	}else{
		srequest = $('#webroot').val()+"posts/addcomment";
	  	$.post(srequest, {
		  	fparentid:parentid,
		  	ftextarea:$('#t_postcomment'+tmp).val(),
		  	fpostid:56		}, function(data){
			if(data==0){
				window.document.location.href='/posts/view/56'
			}else{
				if(data==3){
					alert('Оставлять комментарии могут только авторизованные пользователи!');
				}else{
					alert('Не удалось добавить комментарий.');
				}
			}
		});
		$('#a_postcomment'+tmp).html('| Комментировать статью |');
		$('#postcomment'+tmp).hide();
		$('#t_postcomment'+tmp).val('');
	}
}

function setkarma(action,commentid){
	srequest = $('#webroot').val()+"posts/setkarma";
  $.post(srequest, {
	  	faction:action,
	  	fcommentid:commentid
	}, function(data){
		if(data=='error'){
			alert('Вы уже оценили данный комментарий!');
		}else{
			if(parseInt(data)>0){
				$('#com'+commentid).html("<span style='float:right;padding:2px;color:green'>+"+data+"</span>");
			}else{
				if(parseInt(data)==0){
					$('#com'+commentid).html("<span style='float:right;padding:2px;color:gray'>"+data+"</span>");
				}else{
					$('#com'+commentid).html("<span style='float:right;padding:2px;color:red'>"+data+"</span>");
				}
			}
			//действие
		}
	});
}

</script>    	</div>
      <div class="footer-push"></div>
    </div>
    <div class="footer">
        <div class='bfooter'>
                    <div class='bpost' style='font-size:8pt;float:left;margin:10px;'>Внимание, все статьи публикуются непосредственно участниками и блог не несет за них ответственности!<br>Если Вы обнаружили статью нарушающую какие-либо права, <a href="/pages/contacts">сообщите</a></a> нам и статья будет немедленно удалена.</div>
           	<div class='bpost' style='float:right;margin:10px;'>© 2012, //GM<br>
        
<!--Openstat-->
<span id="openstat2204936"></span>
<script type="text/javascript">
var openstat = { counter: 2204936, image: 5083, color: "828282", next: openstat };
(function(d, t, p) {
var j = d.createElement(t); j.async = true; j.type = "text/javascript";
j.src = ("https:" == p ? "https:" : "http:") + "//openstat.net/cnt.js";
var s = d.getElementsByTagName(t)[0]; s.parentNode.insertBefore(j, s);
})(document, "script", document.location.protocol);
</script>
<!--/Openstat-->
</div>        
        </div>
    </div>
    
<div class='icq'>
	</div>
<![endif]>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-25805768-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</body>
</html>