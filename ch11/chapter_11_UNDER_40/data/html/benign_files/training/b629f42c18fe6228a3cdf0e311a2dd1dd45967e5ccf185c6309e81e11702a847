<html><head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
   <title>tDuplicateRow</title><link rel="stylesheet" type="text/css" href="../css/talend_components_eclipse.css"><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><meta name="keywords" content="tduplicaterow, trowgenerator"><link rel="home" href="bk-components-rg-en..html" title="Talend Components"><link rel="up" href="ch-dataquality.html" title="Chapter&nbsp;6.&nbsp;Data Quality components"><link rel="prev" href="tDqReportRun.html" title="tDqReportRun"><link rel="next" href="tFindRegexlibExpressions.html" title="tFindRegexlibExpressions"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">tDuplicateRow</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="tDqReportRun.html">Prev</a>&nbsp;</td><th width="60%" align="center">Chapter&nbsp;6.&nbsp;Data Quality components</th><td width="20%" align="right">&nbsp;<a accesskey="n" href="tFindRegexlibExpressions.html">Next</a></td></tr></table><hr></div><div lang="en" class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="tDuplicateRow"></a>tDuplicateRow</h2></div></div></div><div class="mediaobject"><img src="../images/tDuplicateRow_icon32_white.png"></div><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3><p>This component will be available in the <span class="emphasis"><strong>Palette</strong></span> of
				<span class="emphasis"><em>Talend Studio</em></span> on the condition that you have subscribed to one of
			the <span class="emphasis"><em>Talend Platform</em></span> products.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e201087"></a>tDuplicateRow properties</h3></div></div></div><div class="informaltable"><table border="1"><colgroup><col class="c1"><col class="c2"><col class="c3"></colgroup><tbody><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Component family</strong></span>
              </p>
            </td><td valign="top">
              <p>Data Quality</p>
            </td><td valign="top">&nbsp;</td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Function</strong></span>
              </p>
            </td><td colspan="2" valign="top">
              <p><span class="emphasis"><strong>tDuplicateRow</strong></span> generates duplicate data from an
                input flow. It groups similar duplicates together and identifies the original record
                of each group by <code class="code">true</code>.</p>
              <p>This component can be used in combination with the <span class="emphasis"><strong>tRowGenerator</strong></span> component to generate duplicate data.</p>
            </td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Purpose</strong></span>
              </p>
            </td><td colspan="2" valign="top">
              <p><span class="emphasis"><strong>tDuplicateRow</strong></span> can be used to create duplicates
                with meaningful data for data quality functional testing purposes.</p>
            </td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Basic settings</strong></span>
              </p>
            </td><td valign="top">
              <p><span class="emphasis"><em>Schema</em></span> and <span class="emphasis"><em>Edit schema</em></span></p>
            </td><td valign="top">
              <p>A schema is a row description. It defines the number of fields to be processed and passed on
		to the next component. The schema is either <span class="emphasis"><strong>Built-In</strong></span> or
		stored remotely in the <span class="emphasis"><strong>Repository</strong></span>.</p>
              <p>Since version 5.6, both the Built-In mode and the Repository mode are
		available in any of the <span class="emphasis"><em>Talend</em></span> solutions.</p>
              <p>Click <span class="emphasis"><strong>Sync columns</strong></span> to retrieve the schema from
                the previous component in the Job.</p>
              <p>The output schema of this component contains one read-only column,
                  <span class="emphasis"><em>ORIGINAL_MARK</em></span>. This column identifies by <code class="code">true</code> or
                  <code class="code">false</code> if the record is an original record or a duplicate record
                respectively. There is only one original record per group.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p><span class="emphasis"><strong>Built-In</strong></span>: You create and store the schema locally for this
		component only. Related topic: see <span class="emphasis"><em>Talend Studio</em></span>
		<span class="emphasis"><em>User Guide</em></span>.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p><span class="emphasis"><strong>Repository</strong></span>: You have already created the schema and
		stored it in the Repository. You can reuse it in various projects and Job designs. Related
		topic: see <span class="emphasis"><em>Talend Studio</em></span><span class="emphasis"><em> User Guide</em></span>.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><em>Percentage of duplicated records</em></span>
              </p>
            </td><td valign="top">
              <p>Enter the percentage of the duplicate rows you want to have in the output
                flow.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><em>Distribution of duplicates</em></span>
              </p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><strong>Name:</strong></span> Select the distribution (probability theory)
                you want to use to generate duplicates: Bernoulli distribution or Poisson
                distribution or Geometric distribution.</p>
              <p>
                <span class="emphasis"><strong>Average group size</strong></span>: Set an average size for all the
                groups that contain duplicates.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><em>Modifications</em></span>
              </p>
            </td><td valign="top">
              <p>Define in the table what fields to change in a row and how to change them: </p>
              <p>-<span class="emphasis"><strong>Input Column</strong></span>: Select the column from the input
                flow from which you want to generate duplicates through modifying its values.</p>
              <p>-<span class="emphasis"><strong>Modification Rate</strong></span>: Enter a rate of the
                modifications you want to have in the duplicate record generated from an input
                column. The rate is a value between <span class="emphasis"><em>0</em></span> and
                  <span class="emphasis"><em>1</em></span>. If you set the rate to <span class="emphasis"><em>0</em></span>, no
                modification will be done. If you set the rate to <span class="emphasis"><em>0.5</em></span>,
                modification will be done in average every two rows. But if you set the rate to
                  <span class="emphasis"><em>1</em></span>, modification is done at each row. </p>
              <p>These modifications are based on the function you select in the <span class="emphasis"><strong>Function</strong></span> column and the number of modifications you set in
                the <span class="emphasis"><strong>Max Modification Count</strong></span> column.</p>
              <p>-<span class="emphasis"><strong>Function</strong></span>: Select the function that will decide
                what modification to do on a value to duplicate it. For example, you can decide to
                have exact or approximate duplicate values through replacing or adding letters or
                numbers, replacing values with synonyms from an index file or deleting values by
                setting the function to null or blank.</p>
              <p>The <span class="emphasis"><strong>Function</strong></span> list will vary according to the
                column type. For example, a column of a <span class="emphasis"><em>String</em></span> type will have
                an <span class="emphasis"><em>Add letters</em></span> option in the list while a column of an
                  <span class="emphasis"><em>Integer</em></span> type will have an <span class="emphasis"><em>Add digits</em></span>
                option in the list. Also, the <span class="emphasis"><strong>Function</strong></span> list for a
                  <span class="emphasis"><em>Date</em></span> column is date-specific, it allows you to decide the
                type of modification you want to do on date values.</p>
              <p>-<span class="emphasis"><strong>Max Modification Count</strong></span>: Enter a maximum number
                of the values to be modified.</p>
              <p>-<span class="emphasis"><strong>Synonym Index Path</strong></span>: Set the
                path to the index file from which you use the synonym. </p>
              <p>This field is available if you select the <span class="emphasis"><em>Synonym
                  replace</em></span> function which means that the value in the duplicate record is
                replaced by one of its synonym, according to the given the rate. </p>
              <p>You must use the <span class="emphasis"><strong>tSynonymOutput</strong></span> component to create a Lucene index and feed it with
                synonyms. For further information about how to create a synonym index and define the
                reference entries, see <a class="xref" href="tSynonymOutput.html" title="tSynonymOutput"><i>tSynonymOutput</i></a>.</p>
            </td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Advanced settings</strong></span>
              </p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><em>Seed for random generator</em></span></p>
            </td><td valign="top">
              <p>Set a random number if you want to generate the same sample of duplicates in
                each execution of the Job. </p>
              <p>Repeating the execution with a different value for the seed will result in a
                different duplicate sample being generated.</p>
              <p>Keep this field empty if you want to generate a different duplicate sample each
                time you execute the Job.</p>
            </td></tr><tr><td>
              <p>&nbsp;</p>
            </td><td valign="top">
              <p>
                <span class="emphasis"><em>tStat</em></span>
                <span class="emphasis"><em>Catcher</em></span>
                <span class="emphasis"><em>Statistics</em></span>
              </p>
            </td><td valign="top">
              <p>Select this check box to collect log data at the component level.</p>
            </td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Usage</strong></span>
              </p>
            </td><td colspan="2" valign="top">
              <p>This component helps you to generate duplicate data of an input flow according
                to certain criteria and use it for testing purposes.</p>
              <p><span class="emphasis"><strong>tDuplicateRow</strong></span> can not be
                used in Map/Reduce Jobs for the time being.</p>
            </td></tr><tr><td valign="top">
              <p>
                <span class="emphasis"><strong>Limitation/prerequisite</strong></span>
              </p>
            </td><td colspan="2" valign="top">
              <p>n/a</p>
            </td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a name="d0e201495"></a>Scenario: Generating duplicate data from an input flow</h3></div></div></div><p>This scenario describes a basic Job that generates a sample of duplicate data from an
      input flow by using probability theories and specific criteria on three columns:
        <span class="emphasis"><em>Name</em></span>, <span class="emphasis"><em>City</em></span> and <span class="emphasis"><em>DOB</em></span> (date of
      birth).</p><p>Below is a capture of a sample data of the input flow:</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow.png"></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e201514"></a>Setting up the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Drop the following components from the <span class="emphasis"><strong>Palette</strong></span> onto
            the design workspace: <span class="emphasis"><strong>tFileInputDelimited</strong></span>, <span class="emphasis"><strong>tDuplicateRow</strong></span> and <span class="emphasis"><strong>tFileOutputDelimited</strong></span>.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow2.png"></div></li><li class="step"><p>Connect all the components together using the <span class="emphasis"><strong>Row </strong></span>
            &gt; <span class="emphasis"><strong>Main</strong></span> link.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e201545"></a>Configuring the input data</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Double-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> to display the
              <span class="emphasis"><strong>Basic settings</strong></span> view and define the component
            properties.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow3.png"></div></li><li class="step"><p>In the <span class="emphasis"><strong>File name/Stream</strong></span> field, browse to the file
            to be used as the main input.</p><p>This file provides some information about customers.</p></li><li class="step"><p>Define the row and field separators the header and footer in the corresponding
            fields, if any.</p></li><li class="step"><p>Click the <span class="emphasis"><strong>[...]</strong></span> button next to <span class="emphasis"><strong>Edit schema</strong></span> to open a dialog box and define the input schema.
            According to the input file structure, the schema is made of ten columns.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow4.png"></div></li><li class="step"><p>Click the <span class="emphasis"><strong>[+]</strong></span> button and define the input columns
            in the dialog box as in the above figure. Click <span class="emphasis"><strong>OK</strong></span> to
            close the dialog box.</p></li><li class="step"><p>If needed, right-click <span class="emphasis"><strong>tFileInputDelimited</strong></span> and
            select <span class="emphasis"><strong>Data Viewer</strong></span> to display a view of the input
            data.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e201602"></a>Configuring the duplicate data</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Double-click <span class="emphasis"><strong>tDuplicateRow</strong></span> to display the <span class="emphasis"><strong>Basic settings</strong></span> view and define the component properties.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow5.png"></div></li><li class="step"><p>Click the <span class="emphasis"><strong>Edit schema</strong></span> button to view the input and
            output columns and do any modifications in the output schema, if needed.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow6.png"></div><p>The output schema of this component contains one read-only column,
              <span class="emphasis"><em>ORIGINAL_MARK</em></span>. This column identifies, by <code class="code">true</code> or
              <code class="code">false</code>, if the record is an original or a duplicate record. There is only
            one original record per group of duplicates.</p></li><li class="step"><p>In the <span class="emphasis"><strong>Percentage of duplicated records</strong></span> field,
            enter the percentage of the duplicate rows you want to have in the output flow.</p></li><li class="step"><p>In the <span class="emphasis"><strong>Distribution of duplicates</strong></span> area, select the
            distribution (probability theory) you want to use to generate duplicates,
              <span class="emphasis"><em>Geometric distribution</em></span> in this example. Then set an average of
            how many duplicate records to have in each group.</p></li><li class="step"><p>Click the plus button below the <span class="emphasis"><strong>Modifications</strong></span> table
            and add four lines in the table.</p><p>This table enables you to define what values to change in a given column and how to
            change them in order to generate duplicates:</p><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>In the <span class="emphasis"><strong>Input Column</strong></span>, select the column from the
                input flow from which you want to generate duplicates, <span class="emphasis"><em>Name</em></span>,
                  <span class="emphasis"><em>City</em></span> and <span class="emphasis"><em>DOB</em></span> in this example.</p><p>When you add a column twice in the table and select different functions, you
                generate duplicates from the same field with different values. For example, in this
                scenario you modify the duplicate names with the <span class="emphasis"><em>Soundex
                  replace</em></span> function with probability of 50%, and then you modify it again
                with the <span class="emphasis"><em>Exchange characters</em></span> function with the probability of
                50%. This means, the <span class="emphasis"><em>Name</em></span> field of the duplicate record may
                still not be modified after the second function with the following probability:
                (1-0.5)*(1-0.5) = 0.25.</p><p>If you want to make sure that all the duplicated records are modified, you must
                set the <span class="emphasis"><strong>Modification Rate</strong></span> to
                <span class="emphasis"><em>1</em></span>. </p></li><li class="step"><p>In the <span class="emphasis"><strong>Modification Rate</strong></span> column, enter a rate
                of the duplicate records you want to generate from the input column.</p></li><li class="step"><p>From the <span class="emphasis"><strong>Function</strong></span> list, select the function
                that will decide what modification to do on a value to duplicate it.</p><p>In this example, there will be duplicate names with different sounds and
                characters and duplicate city names with different sounds. Date values in the date
                of birth column will be randomly changed here.</p></li><li class="step"><p>In the <span class="emphasis"><strong>Max Modification Count</strong></span> column, enter a
                maximum number of the values to be modified in each field.</p></li></ol></div></li><li class="step"><p>Click the <span class="emphasis"><strong>Advanced settings</strong></span> tab and enter a random
            number in the <span class="emphasis"><strong>Seed for random generator </strong></span> field.</p><p>By setting a number in this field, you will generate the same sample of duplicate
            data in each execution of the Job. Change the value if you want to generate a diffierent
            sample.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e201727"></a>Configuring the output component</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Double-click <span class="emphasis"><strong>tFileOutputDelimited</strong></span> to display its
              <span class="emphasis"><strong>Basic settings</strong></span> view and define the component
            properties.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow7.png"></div></li><li class="step"><p>In the <span class="emphasis"><strong>File Name</strong></span> field, specify the path to the
            file to which you want to write the duplicate data.</p></li><li class="step"><p>Define the row and field separators in the corresponding fields, if any.</p></li></ol></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a name="d0e201752"></a>Executing the Job</h4></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step"><p>Save your Job and press <span class="emphasis"><strong>F6</strong></span> to execute it.</p><p>Duplicate data is generated and written to the output file.</p></li><li class="step"><p>Right-click the output component and select <span class="emphasis"><strong>Data
              Viewer</strong></span> to display the duplicate data.</p><p>Duplicate records have been marked as <span class="emphasis"><em>false</em></span> in the
              <span class="emphasis"><em>ORIGINAL_MARK</em></span> column.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow8.png"></div><p>Some data has been modified in the <span class="emphasis"><em>Name</em></span>,
              <span class="emphasis"><em>City</em></span> and <span class="emphasis"><em>DOB</em></span> fields according to the
            criteria you set in the <span class="emphasis"><strong>Modifications</strong></span> table and
            duplicate records have been generated based on these modifications. </p><p>For example, if you compare the original name <span class="emphasis"><em>Mrs Morgan Ross</em></span>
            and the duplicate name <span class="emphasis"><em>Mrs M rganosRiss</em></span>, you will see that the two
            functions have been used on this duplicate record: the letter <span class="emphasis"><em>o</em></span> has
            been exchanged with a space, and also the sound has been replaced in
              <span class="emphasis"><em>Ross</em></span> and <span class="emphasis"><em>Riss</em></span>. However, the soundex code has
            not been changed for the replaced sound.</p></li><li class="step"><p>In the <span class="emphasis"><strong>tDuplicateRow</strong></span> basic settings and in the
              <span class="emphasis"><strong>Distribution of duplicates</strong></span> area, select a different
            distribution, <span class="emphasis"><em>Bernoulli distribution</em></span> for example, and run the
            Job.</p><p>Different duplicates are generated from the same input flow according to the
            selected distribution as shown in the below figure.</p><div class="mediaobject"><img src="../images/use_case-tduplicaterow9.png"></div></li></ol></div></div></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="tDqReportRun.html">Prev</a>&nbsp;</td><td width="20%" align="center"><a accesskey="u" href="ch-dataquality.html">Up</a></td><td width="40%" align="right">&nbsp;<a accesskey="n" href="tFindRegexlibExpressions.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top">tDqReportRun&nbsp;</td><td width="20%" align="center"><a accesskey="h" href="bk-components-rg-en..html">Home</a></td><td width="40%" align="right" valign="top">&nbsp;tFindRegexlibExpressions</td></tr></table></div></body></html>