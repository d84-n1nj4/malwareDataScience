<!DOCTYPE html>
<html>
<head>
  <title>Как за 1 месяц научиться рисовать крутые сайты, получать заказы из интернета и путешествовать</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="/favicon.ico?1.0"/>
  <link rel="stylesheet" href="//static.bizon365.ru/vendor/bootstrap-light/css/bootstrap.min.css?2.0"/>
  <link rel="stylesheet" href="//static.bizon365.ru/css/app.css?v7.1"/>
  <link rel="stylesheet" type="text/css" href="/vendor/font-awesome-4.7.0/css/font-awesome.min.css"/ >
  <style type="text/css">
  	body {
  		/*background-color: #F0F0F0;*/
  	}
  .bglayer { 
    display: block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
     /* opacity: 0.7;*/
  }
  .bglayer .bgimage {
    display: block; position: fixed; top: 0; left: 0; right: 0; bottom: 0; 
      background: url('//static.bizon365.ru/img/bg_rooms/10_FullHD_compressed.jpg') no-repeat center;
      
      background-attachment: fixed;
      background-size: cover;
  }
	.container { 
		max-width: 640px;
		padding: 40px;
		margin-top: 40px;
		background: rgba(255,255,255,0.8); 
		/*box-shadow: 0 0 20px 4px #666;*/
    min-height: 400px;
	}
  h1 { font-size: 30px; }
  </style>
<!--[if IE 8]>
<script src="/js/ie8.js"></script>
<![endif]-->

  <script src="//static.bizon365.ru/js/jquery-1.11.2.min.js"></script>
  <!-- <script src="/vendor/jquery/jquery.min.js?v=2.1.3"></script> -->
  <script src="//static.bizon365.ru/vendor/bootstrap-light/js/bootstrap.min.js"></script>
</head>
<body>
<header>
  </header>
<div class="bglayer"><div class="bgimage"></div></div>
<section class="container">
<!--
	<div class="topheadermenu"><a class="loginAsAdmin" id="loginAsAdmin" href="/adminlogin">Вход для модераторов</a></div>
-->

  <div class="row" style="">
  </div>

  <h1>Как за 1 месяц научиться рисовать крутые сайты, получать заказы из интернета и путешествовать</h1>

  ﻿
<script src="//static.bizon365.ru/js/express-useragent.min.js"></script>

<style type="text/css">
  .login-form, .confirm-form { /*margin: 0 auto;*/ max-width: 400px; min-height: 50px;}
  .container { 
    padding: 40px 80px;
  }
@media (min-width: 640px) {
  .login-form, .confirm-form { min-width: 100%; }
}  
@media (max-width: 640px) {
  .container { padding: 40px; }
}
  .lang-form { margin: 20px auto; width: 400px; }
  .login-form .alert { margin-top: 20px; margin-bottom: 10px; display: block; }
  .alert:empty { display: none; }
  input.form-control { float: none !important; }
  .info1 { }
  .info1 .info { display: block; font-size: 18px;}
  .info1 span.roomDate { margin-right: 20px;  }
  .info1 span.roomDate:not(:empty):after { content: 'МСК'; color: grey; margin-left:5px; font-size: 13px; }
  .content { padding-top: 10px; }
  .cap { color: grey; }
  h1 { text-align: left; }
  .group { width:100%;  margin-bottom: 10px; }
  .alert-default { color: #666;}
  .countdown:empty { display: none; content: ''; }
  .info1 .countdown { color: grey; font-size: 16px; }
  .info1 .countdown .time { color: #333; font-size: 120%; }
</style>

<div class="content">

  <div class="group info1">
    <p><span class="cap">Ведущие вебинара:</span> <span class="info" id="roomSpeakers">Данил Фимушкин</span></p>

    <p><span class="cap">Дата проведения:</span> <span class="info">
        <span class="roomDate">24.01.2018 - 20:00</span> 
        <span class="countdown"></span> 
      </span>
    </p>
  </div>
<!--
    <div class="dropdown lang-form">
      <button class="btn btn-default dropdown-toggle" type="button" id="langmenu1" data-toggle="dropdown" aria-expanded="true">
        <img src="/img/flags/rus.gif"> <span id="curLang">Русский</span>
        <span class="caret"></span>
      </button>
      <ul class="dropdown-menu" role="menu" aria-labelledby="langmenu1">
              <li role="presentation"><a role="menuitem" tabindex="-1" data-lang="rus" href="#">
            <img src="/img/flags/rus.gif"> Русский</a>
        </li>
              <li role="presentation"><a role="menuitem" tabindex="-1" data-lang="eng" href="#">
            <img src="/img/flags/eng.gif"> English</a>
        </li>
            
      </ul>
    </div>
-->
  <div class="browserOldStatus hidden">
    <p class="text-danger browser_status_custom_message"></p>
    <p class="text-danger">Трансляция в этом браузере может не работать. 
      <span class="browser_status_need_update hidden">Попробуйте обновить браузер или зайти через другой.</span>
      <span class="browser_status_need_change hidden">В этом случае зайдите через другой браузер.</span>
      </p>

  </div>






<form class="form-horizontal login-form loginFormCtrls" name="login-form">
<!-- <p>Введите имя, под которым вы будете отображаться в чате</p> -->
  <div class="input-group group">
    <div>
      <label for="input-username" class="control-label">Введите ваше имя:</label></div>

    <div class="">
      <input name="username" autofocus value="" type="text" class="form-control" id="input-username" maxlength="30" placeholder="например, Иван Петров">
    </div>
  </div>

  <div class="input-group group hidden">
    <div><label class="control-label">Ваш e-mail:</label></div>
    <div>
      <input name="email" value="" type=text class="form-control" id="input-useremail" maxlength="64" placeholder="E-mail">
    </div>
  </div>

  <div class="input-group group hidden">
    <div><label class="control-label">Ваш телефон:</label></div>
    <div>
      <input name="phone" value="" type=text class="form-control" id="input-userphone" maxlength="26" placeholder="+79261112233">
    </div>
  </div>

  <input type=hidden name="referer" value="">
</form>



  <div class="group loginFormCtrls">
      <div class="alert alert-danger autherror"></div>
    <div class="">
      <button id="btnLogin" class="btn btn-lg btn-primary" data-loading-text="<span class='glyphicon glyphicon-refresh animate'></span> Вхожу в комнату...">Войти в комнату</button>
      
      <a class="loginAsAdmin pull-right" rel=nofollow href="/adminlogin">Вход для модераторов</a>
    </div>
  </div>


</div>

<script>
  var pwdgroup = $('#pwdgroup');
  var btnCheckPwd =  $('#pwdgroup button');
  var pwdInput = $('#pwdgroup input');
  var pwdError = $('#pwdgroup .error');
  var form = $('.login-form');

  var email_required = false;
  var phone_required = false;

  var m_parsedParams = getUrlParams();
  function getUrlParams() {
    var r = {};
    try {
      var args = window.location.search.slice(1).split('&');
      for(var i=0; i<args.length; i++) {
        var p = args[i];
        if(!p) continue;
        var a = p.split('=');
        if(!a[0]) continue;
        r[a[0]] = decodeURIComponent(a[1] || '');
      }
    } 
    catch(e) { r = {}; }
    return r;
  }
  

  function showStatus(msg) {
    pwdError.removeClass('alert-default').addClass('alert-danger');
    pwdError.html(msg);
  }

  // restore user name
  var defaultName = getDefaultName() || getLastUsername() || '';
  if(defaultName 
    && (defaultName[0]<'A' || defaultName[0]>'z')
    && (defaultName[0]<'А' || defaultName[0]>'я')
    ) defaultName = ''; // не знакомая кодировка
  if(defaultName.length <2) defaultName = '';
  $('input[name=username]').val( defaultName );
  $('input[name=email]').val( '' || getDefaultEmail() || getLastUserEmail() );
  $('input[name=phone]').val( '' || getDefaultPhone() || getLastUserPhone() );

	var m_running = false;
  var m_btnLogin = $('#btnLogin');
  $('#input-username').on('keydown', function(e) {
  	if(m_running) return; // !!!
    //console.log('change');
    if(m_btnLogin.prop('disabled')) m_btnLogin.prop('disabled', false);
  });

  var pathname = window.location.pathname;
  if(pathname[pathname.length-1] != '/') pathname += '/';

  var m_loginForm = $(document.forms['login-form']);
  m_btnLogin.on('click', function() {
    var form = m_loginForm;//$(this);

    if(m_btnLogin.prop('disabled')) return;

    var input = form.find('input[name=username]');

    var n = ''+input.val().trim();
    if (n.length==0) {
      $('.autherror').html('Введите имя, которое будет отображаться в чате');
      input.focus();
      return false;
    }
    if (n.length>30) {
     $('.autherror').html('Введите более короткое имя.');
      input.focus();
      return false;
    }
    if(n.indexOf('/')>=0 || n.indexOf('.')>=0 || n.indexOf('http')>=0) {
      $('.autherror').html('В имени нельзя использовать элементы ссылок');
      input.focus();
      return false; 
    }
    n = n.replace(/'/g,'');
    input.val( n );

    // email
    input = form.find('input[name=email]');
    if(input.length) {
      var email = input.val().trim();
      if(email && !isEmail(email)) {
        $('.autherror').html('Укажите правильный e-mail');
        input.focus();
        return false;
      }
      if(email_required && !email) {
        $('.autherror').html('Укажите ваш контактный e-mail');
        input.focus();
        return false; 
      }
    }

    input = form.find('input[name=phone]');
    if(input.length) {
      var phone = input.val().trim();
      if(phone_required && !isPhone(phone)) {
        $('.autherror').html('Укажите ваш номер телефона');
        input.focus();
        return false;
      }
    }

    //return false;
    $('.autherror').html('');
    var btnSubmit = m_btnLogin;// $(":submit", form);
    btnSubmit.button("loading");
    //btnSubmit.prop('disabled',true);

    m_running = true;

    remember(n, email, phone);

    //var url = window.location.pathname;
    //if(url[url.length-1] != '/') url += '/';
    var url = pathname;

    function authorize() {
      $.ajax({
        url: url+'authorize?_csrf=', // "", // /login
        method: "POST",
        data: form.serialize(),
        complete: function() {
          m_running = false;
        },
        success: function(json, status, jqXHR) {
            statusSuccess(form);
        },
        error: function(jqXHR) {
          var error;
          try { error = JSON.parse(jqXHR.responseText); } catch(e) { };
          if(!error) error = {message: 'Ошибка '+jqXHR.status};
          $('.autherror').html(error.message);
          console.log(error);
          //if(error.code != 403) {
            // разблокировать кнопку только если ошибки системные
            setTimeout(function(){ 
              btnSubmit.button('reset');
              btnSubmit.prop('disabled',false);  
              
            }, 500);
          //}
          // m_btnLogin
        }
      });
    }

    

    authorize(); //setTimeout(authorize, 2000);
      
    yandexMetrikaGoal();

    return false;
  });



  function statusSuccess(form) {
    form.html("Вход выполнен успешно. Загружаю веб-комнату...").addClass('alert alert-success');
    window.location.reload(true);
  }

  function remember(name,email,phone) {
    try {
      if(!window.localStorage) return;
      window.localStorage['lastUserName']  = name;
      if(email) window.localStorage['lastUserEmail']  = email;
      if(phone) window.localStorage['lastUserPhone']  = phone;
    }
    catch(e) { console.error('localStorage error: '+e.message) }
  }

  function getLastParam(name) {
    try {
      if(!window.localStorage) return '';
      return window.localStorage[name] || ''; 
    }
    catch(e){ return ''; }
  }
  function getLastUsername() {
    return getLastParam('lastUserName');
  }
  function getLastUserEmail() {
    return getLastParam('lastUserEmail');
  }
  function getLastUserPhone() {
    return getLastParam('lastUserPhone');
  }

  function getDefaultName() {
    return getDefaultParam('username');
  }
  function getDefaultEmail() {
    return getDefaultParam('email');
  }
  function getDefaultPhone() {
    return getDefaultParam('phone');  
  }

  function getDefaultParam(name) {
    return m_parsedParams[name] || '';  
  }



  
  // Автологин
  if(m_parsedParams.autologin !== undefined && defaultName) m_btnLogin.click();


  (function showCountdown() {
    var html = '';
    var serverTime = +'1516214429553';
    var closestDate = +'1516813200000';
    var delta = closestDate - serverTime;
    if(closestDate && serverTime) {

      if(delta > 0)  {
        html += 'Начало&nbsp;';
        delta = Math.floor(delta / 1000);
        if(delta < 60) html += 'меньше чем через минуту';
        else if(delta < 60*60) html += 'через <span class="time">'+Math.floor(delta/60)+'</span> мин';
        else if(delta < 6*3600) html += 'через <span class="time">'+Math.floor(delta/3600)+'</span> ч <span class="time">'+Math.floor( delta/60 - Math.floor(delta/3600)*60 )+'</span> мин';
        else if(delta < 24*3600) html += 'через <span class="time">'+Math.floor(delta/3600)+'</span> ч.';
        else html += 'через <span class="time">'+Math.floor(delta/24/3600)+'</span> дн.';

        
      }
      else {}
    }
    $('.countdown').html(html);

  })();

  // useragent
  (function() {
    var source = navigator.userAgent || 'unknown';
    function parseUserAgent(source) {
      var ua = new UserAgent();    
      ua.Agent.source = source.replace(/^\s*/, '').replace(/\s*$/, '');
      ua.Agent.os = ua.getOS(ua.Agent.source);
      ua.Agent.platform = ua.getPlatform(ua.Agent.source);
      ua.Agent.browser = ua.getBrowser(ua.Agent.source);
      ua.Agent.version = ua.getBrowserVersion(ua.Agent.source);
      return ua.Agent;
    }
    window.parseUserAgent = parseUserAgent;
    var useragent = parseUserAgent(source);
    
    var browser = useragent.browser;
    var version = useragent.version; 
    var isMobile = useragent.isMobile;
    var isiOS = false || useragent.isiOS || false;

    

    $('.browserName').html(browser||"<span style='color:red'>вероятно не поддерживается</span>");
    $('.browserVersion').text(version||'');

    var ok = true;
    var browser_status_need_update = true;
    var browser_status_need_change = false;
    var browser_status_custom_message = '';
    if(browser == 'Chrome' && version.slice(0,2) < 46) {   ok = false;  }
    if(browser == 'Opera' && +version.slice(0,2) <= 12) { ok = false; }
    if(browser == 'Safari' && !version) ok = false;
    if(browser == 'Safari' && useragent.isiPad) { 
      ok = false; 
      browser_status_need_update = false; 
      browser_status_need_change = true; 
      browser_status_custom_message = 'Safari на iPad';
    }

    // браузер Samsung плохо работает
    if(source.indexOf('SamsungBrowser/5')>0) { 
      ok=false; browser_status_need_change=true; browser_status_custom_message='Браузер Samsung' 
    }
    
    if(!ok) $('.browserOldStatus').removeClass('hidden');
    if(browser_status_need_update) $('.browser_status_need_update').removeClass('hidden');
    if(browser_status_need_change) $('.browser_status_need_change').removeClass('hidden');
    if(browser_status_custom_message) $('.browser_status_custom_message').html(browser_status_custom_message);

    if(ok) console.log('Браузер в порядке.');

  })();

function isEmail(t) {
  //var emailreg = /^[-\w.]+@([A-z0-9][-A-z0-9]+\.)+[A-z]{2,4}$/i;  
  var emailreg = /^[-\w.]+@([\w\-\_]+\.)+[A-z]{2,8}$/i;  
  return emailreg.test(t);
}
function isPhone(t) {
  if(!t) return false;
  var s = ''+t;
  s = s.replace(/[\s\(\)-]/gi, '');  // убрать все скобки, тире, пробелы
  s = (''+ (+s) ).trim();
  if(!s || !s.length || s.length<10) return false;
  return s;
}

function detectMetrikaCounter() {
  var yaCounter, yaCounterTempl = 'yaCounter';
  for(var p in window){ 
    if(!window.hasOwnProperty(p)) continue; 
    if(p.slice(0,yaCounterTempl.length) != yaCounterTempl) continue;
    yaCounter = p;
    break;
  }
  if(yaCounter) console.log('Найден счетчик YM: '+yaCounter);
  return yaCounter;
}
function yandexMetrikaGoal() {
  var goalName = '';
  if(!goalName) return;
  var ymc = detectMetrikaCounter();
  if(!ymc) return; 
  var y = window[ymc];
  if(!y) return console.log('Странно, счетчик '+ymc+' не найден в window.');
  if(!y.reachGoal) return console.log('У счетчика '+ymc+' нет метода '+reachGoal);
  try {
    console.log('Цель '+goalName+' достигнута!');
    window[ymc].reachGoal(goalName);
  } catch(e) { console.error('Ошибка '+ymc+'.reachGoal: '+e.message); }

}

</script>

  
   <!--
    <div class="link_about" style="color:grey;">Сервис «Бизон 365»</div>
    -->

  <script type="text/javascript">
    (function() {
      if(window.location.pathname === '/bye') return;
      var loginAsAdmin = $('.loginAsAdmin');
      loginAsAdmin.attr('href', '/adminlogin?redirect='+window.location.pathname);
    })();

  </script>  
</section>
<footer>

  </footer>


</body>
</html>