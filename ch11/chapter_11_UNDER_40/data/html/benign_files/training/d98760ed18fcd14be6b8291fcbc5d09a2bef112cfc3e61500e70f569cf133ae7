<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript">
	dd = document.domain.split('.');
	document.domain = dd[dd.length - 2] + '.' + dd[dd.length - 1];
</script>
<script type="text/javascript" src="//ptlogin.3304399.net/resource/validation.js?v=63"></script> 
<link rel="stylesheet" href="//ptlogin.3304399.net/resource/css/init.css?v=63" type="text/css"/>
<link rel="stylesheet" href="//ptlogin.3304399.net/resource/css/base.css?v=63" type="text/css"/>
	<link rel="stylesheet" href="//s1.img4399.com/webgame/ssjj/news/css/ptlogin.css?c68ad05" type="text/css"/>
</head>





<body>
				<!--<a class="login_qrentry" onclick="window.parent.UniLogin.showPopupQrLogin()" href="javascript:void(0)" title="扫一扫登录" target="_self"></a>-->

		<div class="login_vertical center vertical_body_w" id="popup_login_div">
			<div id="qq_login" class="login_hor login_qq">
			     <div class="ftip">第三方登录无需注册</div>
			    <div class="clearfix folgin">
				<a id = "hr_label_qqlogin" href='javascript:parent.window.UniLogin.toQzoneLogin(true);' title="QQ号登录" class="QQ" target="_self"><i></i>QQ登录</a>
				<a id = "hr_label_weixinlogin" href='javascript:parent.window.UniLogin.toWeixinLogin(true);' title="微信登录" class="weixin" target="_self"><i></i>微信登录</a>
				<a id = "hr_label_weibologin" href='javascript:parent.window.UniLogin.toWeiboLogin(true);' title="新浪微博登录" class="weibo" target="_self"><i></i>微博登录</a>
				<!-- <a id = "hr_label_taobaologin" href='javascript:parent.window.UniLogin.toTaobaoLogin(true);' title="淘宝登录" class="taobao" target="_self"><i></i>淘宝登录</a> -->
				</div>
			</div>
			<div class="fltit">
				<span class="line lline"></span>
					<span class="line rline"></span>
					<h3 class="tit">4399账号登录</h3>
				</div>	
			<form onSubmit="return check_login(username, password, null, 'Msg');" id="login_form" name="login_form" method="post" action="/ptlogin/login.do?v=1">
				<fieldset>
					<input type="hidden" name="loginFrom" value="uframe" />
					<input type="hidden" name="postLoginHandler" value="default" />
					<input type="hidden" name="layoutSelfAdapting" value="true" />
					<input type="hidden" name="externalLogin" value="qq" />
					<input type="hidden" name="displayMode" value="undefined" />
					<input type="hidden" name="layout" value="vertical" />
					<input type="hidden" name="appId" value="ssjj" />
					<input type="hidden" name="gameId" value="news" />
					<input type="hidden" name="css" value="//s1.img4399.com/webgame/ssjj/news/css/ptlogin.css?c68ad05" />
					<input type="hidden" name="redirectUrl" value="" />
					<input type="hidden" id="sessionId" name="sessionId" value="" />
					<input type="hidden" name="mainDivId" value="popup_login_div" />
					<input type="hidden" name="includeFcmInfo" value="false" />
					
					<input type="hidden" name="userNameLabel" value="4399&#29992;&#25143;&#21517;" />
					<input type="hidden" name="userNameTip" value="&#35831;&#36755;&#20837;4399&#29992;&#25143;&#21517;" />
					<input type="hidden" name="welcomeTip" value="&#27426;&#36814;&#22238;&#21040;4399" />
					
								<div class="login_hor clearfix" style="display:none">
										<div class="q_tip" id="welcome_tip">&#27426;&#36814;&#22238;&#21040;4399</div>
								</div>

					<div class="login_hor clearfix">
						<label id = "lf_label_simple_username">4399&#29992;&#25143;&#21517;<em class="login_required"> *</em></label>
						<label id = "lf_label_username">4399&#29992;&#25143;&#21517;<em class="login_required"> *</em></label>
						<input type="text" id="username" name="username" class="login_ipt iptw2" value="" onfocus="if(this.value=='请输入用户名') this.value = ''; this.select();" onblur="if(this.value=='') this.value = '请输入用户名' "/>
					</div>
					<div id="pass_div" class="login_hor clearfix">
						<label id = "lf_label_password">密码 <em class="login_required"> *</em></label>
						<input type="password" id="password" name="password" class="login_ipt iptw2" value="" onfocus="this.select();"/>
					</div>
					
					
					<div class="login_hor clearfix">
						<div class="login_tip">
							<input id="login_autoLogin" type="checkbox" name="autoLogin" /><label for="login_autoLogin" id="login_remember_passwd_tip">记住密码</label><label for="login_autoLogin" id="login_autoLogin_tip">自动登录</label><a id="login_forgetPasswd" href="http://u.4399.com/do/password/forget" title="忘记密码" target="_blank">忘记密码</a>
						</div>
					</div>
					
					<div class="login_hor ux_login clearfix">
						<input type="submit" value="" class="ptlogin_btn" />
						<a id="login_toregister" title="加入4399" href="javascript:parent.window.UniLogin.showPopupReg(true)" target="_self">马上注册</a><a id="login_simple_toregister" title="加入4399" href="javascript:parent.window.UniLogin.showPopupReg()" target="_self">注册 </a><a id="login_forgetPasswd_1" href="http://u.4399.com/do/password/forget" title="忘记密码" target="_blank">忘记密码</a>
					</div>
				
						
				</fieldset>
			</form>
			
				<script type="text/javascript">
					try{
						document.login_form.password.focus();
					} catch (e) {
					}
				</script>
		</div>
	
	<script type="text/javascript">
		String.prototype.zCut = function(len) {
			var clen = 0, i = 0, olen = this.length;
			while (clen < len && i < olen) {
				clen += this.charCodeAt(i++) > 128 ? 2 : 1;
			}
			
			var newStr = this.substring(0, i);
			return i < olen ? newStr + '...' : newStr;
		}
		
		var extNick = document.getElementById('ext_nick');
		if (extNick) {
			var nick = extNick.innerHTML;
			extNick.innerHTML = nick.zCut(7);
		}
		
		if(window.parent.UniLogin.initIFrameReady)
			window.parent.UniLogin.initIFrameReady('popup_login_div');
			
		var usernameEle = document.getElementById("username");
		if (usernameEle) {
			var prevUsername = usernameEle.value;
			var executing = false;
			usernameEle.onblur = function(){
				if (executing == false) {
					executing = true;
				} else {
					return;
				}
	
				var captchaEle = document.getElementById("captcha");
				if(this.value=="") {
					this.value = "请输入用户名";
					executing = false;
				} else {
					if (!captchaEle) {
						var username = this.value;
	
						if (username == prevUsername) {
							executing = false;
							return;
						}
	
						var d = new Date;
						setTimeout(function(){
							Ajax().get('/ptlogin/verify.do?username=' + encodeURIComponent(username) + '&appId=' + 'ssjj' + '&t=' + d.getTime() + '&inputWidth=iptw2', 
								function(txt){
									executing = false;
									prevUsername = username;
		
									if (txt != "0") {
										var sessionInput = document.getElementById("sessionId");
										sessionInput.value = txt.substring(txt.indexOf('UniLoginChangPIC') + 'UniLoginChangPIC'.length + 2, txt.length - 6);
										var captchaDiv = document.createElement("div");
										captchaDiv.innerHTML = txt;
										captchaDiv.className = "login_hor clearfix";
										var passDiv = document.getElementById("pass_div");
										passDiv.parentNode.insertBefore(captchaDiv, passDiv.nextSibling);
										var frm = parent.document.activeElement;
										var subWeb = parent.document.frames ? parent.document.frames[frm.id].document : frm.contentDocument;
										if(frm && subWeb){
											try {
												frm.height = subWeb.body.offsetHeight;
											} catch (e) {
											}
										}
									}
								}
							)
						}, 10);
					}
				}
			};
		}
	</script>
	

</html>