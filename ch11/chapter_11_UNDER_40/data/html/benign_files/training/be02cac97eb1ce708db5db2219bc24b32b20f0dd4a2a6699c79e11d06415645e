

<!DOCTYPE>
<html>
<head>
<meta charset="utf-8">
<title></title>
<meta name="keywords" content="">
<meta name="description" content="">

</head>

<body>
<input type="hidden" id="artId" value="5820160000010275">

<!--main-->
		<script type="text/javascript" src="https://static1.niwodai.com/Public/Static/201404/js/jquery-1.7.2.min.js"></script>
<link rel="stylesheet" href="https://static1.niwodai.com/Public/Static/201404/css/common.css?v=20170507040127.css">
<link rel="stylesheet" href="https://static1.niwodai.com/Public/Static/nwd/nwdUI/pc/src/css/base.css?v=1489393062843193">
<link rel="stylesheet" href="https://static1.niwodai.com/Public/Static/nwd/nwdUI/pc/src/css/validate.css?v=1489393062843193">
<link rel="stylesheet" href="https://static1.niwodai.com/Public/Static/nwd/active/2017/05/register/css/index.css">
<style>
.register-box{top:14px;height:470px;}
.nwd-validate-tip{height:auto;line-height:auto;}
.nwd-validate{height:20px;line-height:20px;}
.nwd-form-item{margin-bottom: 20px;}
.agreement-tip{margin-top:-20px;font-size:14px;}
.agreement-tip a:hover{text-decoration:underline;}
.recom-tips{margin-top:-20px;}
.geetest_logo,.geetest_success_logo{display:none!important;}
.geetest_holder.geetest_wind .geetest_radar_btn, .geetest_holder.geetest_wind .geetest_success_btn{border-color:#e3e3e3!important;}
</style>
<div class="clearfix simpleHead01">
    <div class="fl">
        <a href="http://www.niwodai.com"><img src="https://static1.niwodai.com/Public/Static/201404/images/logo_all.png" height="52" alt="你我贷" style="vertical-align: initial;"></a><span>欢迎注册</span>
    </div>
    <div class="fr"><span class="fc_6">已有帐号？<a href="/login.html" class="blue">请登录</a></span></div>
</div>
<div class="bg-box" style="background:url(https://static1.niwodai.com/Public/Static/nwd/active/2017/05/register/images/bg_moeny.jpg) top center no-repeat;">
    <div class="main-box">

        <input type="hidden" name="accountType" id="accountType" value="1">
        <input id="uname" name="uname" type="hidden">
        <input id="repwd" name="repwd" type="hidden">
        <input type="hidden" name="num" id="num" value="">
        <input type="hidden" value="1494387137372" id="messSendTime">
        <input type="hidden" value="1" id="messSendType">
        <input type="hidden" value="succ" id="regSdMsgCodeRst">
        <!--验证码开关默认打开滑动验证码 on 打开滑动验证码  off 打开图片验证码-->
        <input type="hidden" name="imgcodeSwitch" id="imgcodeSwitch" value="on">
        <!--<input type="hidden" name="imgcodeSwitch" id="imgcodeSwitch" value="${switch}">-->

        <div class="register-box" id="area">

            <div class="user-tab">
                <ul class="tab-box">
                    <li class="active">投资用户</li>
                    <li>借款用户</li>
                </ul>
            </div>
            <div class="item-wrap">
                <div class="nwd-form-item clearfix">
                    <div class="nwd-form-item-content">
                        <div class="nwd-input">
                            <input id="mobile" name="mobile" type="text" maxlength="11" class="nwd-input-inner nwd-input-placeholder" placeholder="请输入手机号码">
                            <div class="register-icon phone-icon"></div>
                            <i class="icon-right"></i>
                        </div>
                        <div class="nwd-validate-tip nwd-validate-bottom" id="mobileMsg">
                            
                        </div>
                    </div>
                </div>

                <!--显示滑动验证码-->
                <div class="nwd-form-item clearfix" id="geetestcode" style="display: block">
                    <!-- <div id="div_geetest_lib"></div> -->
                    <div id="div_id_embed"></div>
                    <input class="channel" type="hidden" name="channel" value="4">
                    <input type="hidden" id="imgcode" name="imgcode" />
                    <input type="hidden" name="curr_type" value="geetest" />
                    <div class="nwd-validate-tip nwd-validate-bottom" id="imgCodeMSG"></div>
                </div>
                <!--显示滑动验证码-->

                <!--显示图片验证码-->
                <div class="nwd-form-item clearfix" id="imgvalcode" style="display: none">
                    <div class="nwd-form-item-content">
                        <div class="nwd-input">
                            <input type="text" name="imgcode" id="imgcode" class="nwd-input-inner nwd-input-width160 nwd-input-placeholder" placeholder="图形验证码">
                            <div class="register-icon user-icon"></div>
                            <a id="refush1" href="javascript:void(0);" title="换一张" class="pic-random">
                                <img src="/validatecode/refresh.htm?date=1494387137372" width="90" height="38" id="imgc"  alt="图形验证码" class="ml_5">
                            </a>
                            <input type="hidden" name="curr_type" value="validatecode">
                            <div class="nwd-validate-tip nwd-validate-bottom" id="imgCodeMSG"></div>
                        </div>
                    </div>
                </div>
                
                
                <form autocomplete="off" action="/loading.html" method="post" class="nwd-formUi" id="registerThirdStepsInit">   
                    <div class="nwd-form-item clearfix">
                        <div class="nwd-form-item-content">
                            <div class="nwd-input">
                                <input type="text" class="nwd-input-inner nwd-input-placeholder" name="phoneCode" style="display:none;">
                                <input type="text" class="nwd-input-inner nwd-input-placeholder" id="phoneCode" name="phoneCode" placeholder="请输手机验证码" autocomplete="off">
                                <div class="register-icon code-icon"></div>
                                <input type="button" id="gainMessage" class="verify-btn" value="获取验证码">
                                <input type="button" id="countDown" class="verify-btn" value="0秒" style="display:none;">
                                <input type="button" id="yybtn" class="verify-btn" value="语音验证码" style="display:none;">
                            </div>
                            <div class="nwd-validate-tip nwd-validate-bottom" id="phoneCodeMsg"></div>
                        </div>
                    </div>

                    <div class="nwd-form-item clearfix">
                        <div class="nwd-form-item-content">
                            <div class="nwd-input">
                                <input type="password" name="pwd" class="nwd-input-inner nwd-input-placeholder" style="display:none;">
                                <span id="wrap">
                                    <input type="text" id="pwd" name="pwd" class="nwd-input-inner nwd-input-placeholder" placeholder="请输入密码"autocomplete="off">
                                </span>
                                <!-- <span id="pwdMSG"></span> -->
                                <div class="register-icon pwd-icon"></div>
                                <i class="eye-btn"></i>
                            </div>
                        </div>
                        <!-- <p class="password-tip">密码须为8-16位数字和大小写字母组合</p> -->
                        <div class="nwd-validate-tip nwd-validate-bottom" id="pwdmsg">
                            
                        </div>
                    </div>
                    
                    <p class="recom-tips clearfix"><i class="fl icon-arrow"></i>推荐码（选填）</p>
                    <div class="nwd-form-item nwd-form-item2 clearfix">
                        <div class="nwd-form-item-content">
                            <div class="nwd-input">
                                <input id="recommendCode" type="text" class="nwd-input-inner nwd-input-placeholder" placeholder="推荐人手机或专属推荐码">
                                <div class="register-icon user-icon"></div>
                            </div>
                        </div>
                    </div>

                    <div class="nwd-form-item clearfix">
                        <input type="button" id="regSubmit" class="submit-btn" value="确认注册">
                        <div class="nwd-validate-tip nwd-validate-bottom" id="errorMsg2"></div>
                    </div>
                    <p class="agreement-tip">注册即视为同意<a href="javascript:;" onclick="newFinancialAgreement();">《你我贷用户协议》</a></p>
                </form>
            </div>
        </div>


    </div>
</div>
<div style="border-top: 1px solid #e4e7ec;">
    <div class="login_foot w1000 txcenter" style="padding-top: 15px;">
        <p class="fc_9 fs_12">Copyright © 2016 你我贷（www.niwodai.com）　版权所有；市场有风险，投资需谨慎，营造合法、诚信借贷环境。</p>
        <!-- <div class="line3 mt_10">
            <a rel="nofollow" class="img1" target="_blank" href="http://www.miibeian.gov.cn/"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img2" target="_blank" href="https://ss.knet.cn/verifyseal.dll?sn=e14050531010148490qxse000000&amp;comefrom=trust&amp;trustKey=dn&amp;trustValue=www.niwodai.com"><img src="https://static.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img3" target="_blank" href="http://www.zx110.org/"><img src="https://static.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img4" target="_blank" href="https://www.sgs.gov.cn/lz/licenseLink.do?method=licenceView&amp;entyId=dov73ne26zbqq0iswyhj56o0ohog5hpsls"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img5" target="_blank" href="http://net.china.com.cn/"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img6" target="_blank" href="http://si.trustutn.org/info?sn=466150127000060949048"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img7" target="_blank" href="http://www.anquan.org/authenticate/cert/?site=www.niwodai.com&amp;at=business"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img8" target="_blank" href="http://www.shjbzx.cn/"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
                <a rel="nofollow" class="img9" target="_blank" href="https://credit.szfw.org/CX20160216013607880522.html"><img src="https://static1.niwodai.com/Public/Static/201404/css/img/px.gif" width="70" height="32"></a>
        </div> -->
    </div>
</div>

<script src="https://static1.niwodai.com/Public/Static/nwd/active/2017/07/geetest/gt.js"></script>
<script>
var mobileFlag=false,//手机号码验证通过标识
    imgCodeFlag=false,//图形验证码验证通过标识
    phonecodeFlag = false;//手机短信验证码验证通过标识
    passwordFlag = false;//密码验证通过标识
var handler = function (captchaObj) {
    captchaObj.appendTo('#geetestcode');
    $("#gainMessage").click(function(){
        $("#mobile").change();
        $.currType = $("input[name='curr_type']").val();
        var imgcodeVal = $('#imgcode').val();
        if($.currType == 'geetest'){
            imgcodeVal = $('#imgcode').val();
            imgCodeVerify();
        }else{
            $("#imgcode").change();
        }
        getPhoneCode();
    })

    //发送语音短信验证码  初次60秒倒计时/初次以外120秒倒计时
    $("#yybtn").click(function () {
        var param = {};
        param.interval = msgTimeOut;
        param.phone = $('#mobile').val();
        $.post("/geetest/regSendYuyinMessage.do", param, function (result){

            if(result == 'succ'){
                yyCountDown(120);
                showCorrect("phoneCodeMsg","已通过400-680-8888播报，请收听")
            }else if(result == 'noEqual'){
                $.currType = $("input[name='curr_type']").val();
                var imgcodeVal = $('#imgcode').val();
                if($.currType == 'geetest'){
                    imgcodeVal = $('#imgcode').val();
                    var result = captchaObj.getValidate();
                    if (!result) {
                        showErr('imgCodeMSG','请完成验证');
                    }
                    $.ajax({
                        url: '/validatecodenew/refresh.do',
                        type: 'POST',
                        dataType: 'json',
                        data: {
                            username: $('#mobile').val(),
                            // password: $('#imgcode').val(),
                            geetest_challenge: result.geetest_challenge,
                            geetest_validate: result.geetest_validate,
                            geetest_seccode: result.geetest_seccode,
                            channel : $("input[name='channel']").val()
                        },
                        success: function (data) {
                            if (data.status === 'success') {
                                imgCodeFlag = true;
                                validatePass("imgCodeMSG");
                                yyCountDown(120);
                                showCorrect("phoneCodeMsg","已通过400-680-8888播报，请收听")
                            } else if (data.status === 'fail') {
                                showErr('imgCodeMSG','请重新验证！');
                                captchaObj.reset();
                            }
                        }
                    });
                }else{
                    $("#imgcode").change();
                } 
            }else{
                if(result=='请输入正确的图片验证码' || result=='图片验证码超时,请刷新！'){
                    showErr('phoneCodeMsg','图片验证码超时,请返回第一步重新注册！');
                } else {
                    showErr('phoneCodeMsg',result);
                }
            }
        });
        msgTimeOut = 120;
    });


    function imgCodeVerify() {
        var result = captchaObj.getValidate();
        if (!result) {
            showErr('imgCodeMSG','请完成验证');
            //return alert('请完成验证');
        }
        $.ajax({
            url: '/validatecodenew/refresh.do',
            type: 'POST',
            dataType: 'json',
            data: {
                username: $('#mobile').val(),
                // password: $('#imgcode').val(),
                geetest_challenge: result.geetest_challenge,
                geetest_validate: result.geetest_validate,
                geetest_seccode: result.geetest_seccode,
                channel : $("input[name='channel']").val()
            },
            success: function (data) {
                if (data.status === 'success') {
                    imgCodeFlag = true;
                    validatePass("imgCodeMSG");
                    getPhoneCode();
                } else if (data.status === 'fail') {
                    showErr('imgCodeMSG','请重新验证！');
                    captchaObj.reset();
                }
            }
        });
    }
     
};



$.ajax({
    url: "/validatecodenew/StartCaptcha.htm?t=" + (new Date()).getTime(), // 加随机数防止缓存
    type: "get",
    dataType: "json",
    success: function (data) {

        // 调用 initGeetest 进行初始化
        // 参数1：配置参数
        // 参数2：回调，回调的第一个参数验证码对象，之后可以使用它调用相应的接口
        initGeetest({
            // 以下 4 个配置参数为必须，不能缺少
            gt: data.gt,
            challenge: data.challenge,
            offline: !data.success, // 表示用户后台检测极验服务器是否宕机
            new_captcha: data.new_captcha, // 用于宕机时表示是新验证码的宕机

            product: "custom", // 产品形式，包括：float，popup, custom
            width: "100%",
            next_width: '260px',
            area: '#area',
            bg_color: 'black'
            // 更多前端配置参数说明请参见：http://docs.geetest.com/install/client/web-front/
        }, handler);
    }
});


$(document).ready(function () {
    

    
    var url ="/index.do?method=imgcodeSwitch";
    $.ajax({
        type: "post",
        url: url,
        dataType: "html",
        data:{
        },
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        success: function(msg){
            $("#imgcodeSwitch").val(msg);
            //var imgcodeSwitch = $("#imgcodeSwitch").val(msg);
            if(msg=="on"){//使用滑动验证码
                document.getElementById("geetestcode").style.display="";
                $("#imgvalcode").remove();
            }else{//使用图片验证码
                document.getElementById("imgvalcode").style.display="";
                $("#geetestcode").remove();
            }
        }
    });
});

//推荐码显示隐藏
$('.recom-tips').click(function(){
    $('.nwd-form-item2').toggle();
    
})
/*清除边框*/
function borderOff(obj) {
    $(obj).css({'border':'1px solid #e3e3e3'}); 
    $('.icon-right').css('display','block');
}
/*错误边框提醒*/
function borderW(obj) {
    $(obj).css({'border':'1px solid #ff5722'});
    $('.icon-right').css('display','none');
}

/***
 * 验证提示
 * @param id
 * @param msg
 */
function showErr(id,msg){
    $("#"+id).html('<div class="nwd-validate-error nwd-validate"><i class="icon-validate icon-validate-size16 icon-validate-error"></i><span class="nwd-validate-content">'+msg+'</span></div>');
    $("#"+id).css("display","block");
}
function showCorrect(id,msg){
    $("#"+id).html('<div class="nwd-validate-correct nwd-validate"><i class="icon-validate icon-validate-size16 icon-validate-correct"></i><span class="nwd-validate-content">'+msg+'</span></div>');
    $("#"+id).css("display","block");
}

/***
 * 清除验证提示
 * @param id
 */
function validatePass(id){
    $("#"+id).css("display","none");
}
    
//手机号输入框失去焦点
$("#mobile").change(function(){
    //取得输入用户名的值
    var mobileVal = $("#mobile").val();
    var input = $('#mobile');
    if(mobileVal == ''){//手机号为空
        borderW(input);
        mobileFlag = false;
        showErr("mobileMsg","手机号码不能为空");
    }else if(mobileVal.length != 11){//长度为11位数字
        borderW(input);
        repwdFlag = false;
        showErr("mobileMsg","请输入11位手机号码");
    // 新增171、172、174、175、179号段注册    
    }else if(!mobileVal.match("^1[3|4|5|7|8][0-9]{9}$")){
        borderW(input);
        mobileFlag = false;
        showErr("mobileMsg","手机号码格式错误");
    }else{//以上验证通过
        borderOff(input);
        mobileFlag = true;
        validatePass("mobileMsg");
    }
    
});
//点击输入显示密码规则提示
$("#pwd").focus(function(){
    pwdFlag = false;
    $('#pwdmsg').show().html('密码须为8-16位数字和大小写字母组合');
    $(".recom-tips").css("margin-top","0");
});
// $("#pwd").blur(function(){
//  pwdFlag = false;
//  $('#pwdmsg').show().html('');
//  $(".recom-tips").css("margin-top","-20px");
// });
//密码输入框失去焦点
$("#pwd").change(function(){
    //取得用户输入的密码的值
    var pwdVal = $("#pwd").val();
    var pattern = /^(?!\D+$)(?![^a-zA-Z]+$)\S{8,20}$/;
    if(pwdVal == ''){//密码输入为空
        pwdFlag = false;
        showErr("pwdmsg","密码不能为空");
        $(".recom-tips").css("margin-top","0");
    }else if(pwdVal.length < 8 || pwdVal.length > 20){//密码长度为6~20位字符
        pwdFlag = false;
        showErr("pwdmsg","密码长度为8～20位字符");
        $(".recom-tips").css("margin-top","0");
    }else if(!pwdVal.match(pattern)){//密码只能包含英文、数字、符号
        pwdFlag = false;
        showErr("pwdmsg","必须包含数字和字母");
        $(".recom-tips").css("margin-top","0");
    }else if(!pwdVal.match(/^\S+$/)){//密码不能包含空格
        pwdFlag = false;
        showErr("pwdmsg","密码不能包含空格");
        $(".recom-tips").css("margin-top","0");
    }else{
        pwdFlag = true;
        validatePass("pwdmsg");
        $(".recom-tips").css("margin-top","-20px");
    }
    
});
    
$("#imgc").click(function(event){
    event.preventDefault();//阻止冒泡,因为图形验证码是定义在文本框内部的
    refreshcode(true);
});

/***
 * 手机验证码
 */
// $("#gainMessage").click(function(){
//  getPhoneCode(); 
// });
    
/***
 * 获取手机验证码
 */
function getPhoneCode(){    
    if (checkInput2()) {
        //保存信息
        $.post("/index.do?method=registerInit", {
            mobile: $('#mobile').val(),
            imgCode : $('#imgcode').val(),
            //recommendCode : $("#recommendCode").val(),
            accountType : $('#accountType').val()
        },
        function (data){
            data=$.parseJSON(data);
            if(data['errCode'] == '0'){
                //验证成功
                $("#num").val(data['num']);
                var regSdMsgCodeRst = $("#regSdMsgCodeRst").val();
                if((regSdMsgCodeRst != null || regSdMsgCodeRst != '') && regSdMsgCodeRst == 'succ'){
                    showCorrect('phoneCodeMsg','验证码已发送，有效期30分钟，请查看');
                    
                    //60秒倒计时
                    var messSendTime = data['messSendTime'];
                    var messSendType = data['messSendType'];
                    //var mydate = new Date().getTime();
                    
                    //获取服务器时间
                    var mydate = messSendTime;//默认值设为发送时间
                    $.get("index.do?method=getSysTime&date="+new Date().getTime(),function (exist) {
                        mydate = exist;
                        var countDownTime = Math.round(60 - (mydate - messSendTime)/1000);
                        if(messSendType == '2'){
                            countDownTime = Math.round(120 - (mydate - messSendTime)/1000);
                        }
                        if(countDownTime <= 0){
                            //显示语音获取按钮
                            $("#countDown").hide();
                            $("#yybtn").show();
                        }else{
                            $("#gainMessage").hide();
                            $("#yybtn").hide();
                            countDown(countDownTime);
                        }
                    });
                    
                }else{
                    showErr('phoneCodeMsg','验证码发送失败，请再次发送');
                    //显示点击获取按钮
                    $("#countDown").hide();
                    $("#yybtn").hide();
                    $("#gainMessage").show();
                }

            }else{
                //手机号码验证结果
                if(data['mobileErrMsg'] != null){
                    unameFlag = false;
                    $('#mobileMSG').css("display","");
                    showErr('mobileMsg',data['mobileErrMsg']);
                }
                
                //图片验证码验证结果
                if(data['imgCodeErrMsg'] != null){
                    unameFlag = false;
                    $('#imgCodeMSG').css("display","");
                    showErr('imgCodeMSG',data['imgCodeErrMsg']);
                }   
            }
            
        });
    }
    imgCodeFlag=false;
}

//所有验证都通过
function checkInput2(){
    if(mobileFlag&&imgCodeFlag){
        return true;
    }else{
        return false;
    }
}
    
    
/***
 * 图片验证码
 */
$("#imgcode").change(function(){
    imgcodeCk();
});
/*
* 图片验证码输入框失去焦点的校验
*/
function imgcodeCk(){
    var imgCodeVal = $("#imgcode").val();
    if(imgCodeVal == ''){//输入为空
        imgCodeFlag = false;
        showErr("imgCodeMSG","验证码不能为空");
        return false;
    }else{//以上验证通过
        //异步改同步
        $.ajax({  
            type : "post",  
            url : "/index.do?method=validateImgCode",  
            data : "imgCode=" + imgCodeVal,  
            async : false,  
            success : function(msg){  
                if (msg == 1) {
                    imgCodeFlag = true;
                    $('#imgCodeMSG').css("display","none");
                    validatePass("imgCodeMSG");
                }else{
                    imgCodeFlag = false;
                    $('#imgCodeMSG').css("display","none");
                    showErr("imgCodeMSG","图形验证码错误");
                    refreshcode();
                    return false;
                }  
            }  
         });
    }
    
}
    
    
    
    
/*
* 换一张图片验证码
*/
function refreshcode(){
    var d = new Date();
    var src = "/validatecode/refresh.htm?date=" + d.getTime();
    $("#imgc").attr("src",src);
    //图片验证码输入框清空
    $('#imgcode').val("");
}



//倒计时
function countDown(time){
    $("#gainMessage").hide();
    $("#yybtn").hide();
    $("#countDown").show();
    $("#countDown").attr("value",time+"秒");
    time = time - 1;
    if(time>=0){
        setTimeout("countDown("+time+")",1000);
    }else{
        $("#countDown").hide();
        $("#yybtn").show();
        msgTimeOut = 60;
    }
}
//语音倒计时
function yyCountDown(time){
    $("#gainMessage").hide();
    $("#yybtn").hide();
    $("#countDown").show();
    $("#countDown").attr("value",time+"秒");
    time = time - 1;
    if(time>=0){
        setTimeout("yyCountDown("+time+")",1000);
    }else{
        $("#countDown").hide();
        $("#yybtn").show();
    }
}

$('.tab-box li').click(function(){
    var num=$(this).index();
    $(this).addClass('active').siblings().removeClass('active');
    $('#accountType').val(num+1);
})

    

$("#regSubmit").click(function(){
    registerBtnClick();
    
})

function registerBtnClick(){
    //验证验证码是否输入
    var ckCode = $('#phoneCode').val();
    if(ckCode == null || ckCode == ''){
        showErr('phoneCodeMsg','验证码不能为空');
    }else{
        //保存信息
        $.post("/index.do?method=subRegister", {
            ckCode: ckCode,
            num: $('#num').val(),
            mobile : $('#mobile').val(),
            pwd : $('#pwd').val(),
            recommendCode : $("#recommendCode").val(),
            repwd: $('#pwd').val()
        },
        function (data){
            data=$.parseJSON(data);
            if(data['errCode'] == '4'){
                if(data['successURL'] == null || data['successURL'] == "null" ) {
                    $("#registerThirdStepsInit").submit();
                } else {
                    window.location.href = data['successURL'];
                    //window.location.href="https://static1.niwodai.com/index.do?method=tg&artId=5820160000010602";  
                }
            }else if(data['errCode'] == '0'){
                //注册成功
                $("#registerThirdStepsInit").submit();
            }else if(data['errCode'] == '1' || data['errCode'] == '2'){
                //注册失败
                showErr('errorMsg2','注册失败');
            }else if(data['pwdErrMsg'] != null){
                showErr('pwdmsg',data['pwdErrMsg']);
                $(".recom-tips").css("margin-top","0");
            }else{
                //验证码验证结果
                if(data['ckCodeErrMsg'] != null){
                    if(data['ckCodeErrMsg'] == '0'){
                        showErr('phoneCodeMsg','验证码不能为空');
                    }else if(data['ckCodeErrMsg'] == '1'){
                        showErr('phoneCodeMsg','验证码输入有误，请重新输入');
                    }else if(data['ckCodeErrMsg'] == '2'){
                        showErr('phoneCodeMsg','验证码已失效，请重新获取');
                    }else if(data['ckCodeErrMsg'] == '10'){
                        showErr('phoneCodeMsg','输入验证码错误次数过多，请重新获取!');
                    }
                }
            }
            
        });
    }

}

$(".eye-btn").on("click", function() {
    var inp,cname,val;
    var type = $('#pwd').attr('type');
    if(type =='text'){
        $(this).addClass('eye-btn2');
        inp=$('#pwd');
        cname=inp.attr('name');
        val=inp.val();
        $('#wrap').html('<input id="pwd" name="'+cname+'" type="password" value="'+val+'" class="nwd-input-inner nwd-input-placeholder" maxlength="11" placeholder="请输入密码" autocomplete="off">');
    }else{
        $(this).removeClass('eye-btn2');
        inp=$('#wrap').children('input');
        cname=inp.attr('name');
        val=inp.val();
        $('#wrap').html('<input id="pwd" name="'+cname+'" type="text" value="'+val+'" class="nwd-input-inner nwd-input-placeholder" maxlength="11" placeholder="请输入密码" autocomplete="off">')
        
    }       
});
$('input[type=text],input[type=password],').focus(function(){
    $(this).css('color','#333');
})

//协议
function newFinancialAgreement(){
    window.open('http://www.niwodai.com/event.mhtml?artId=3800000704969078','','dialogWidth=1000px;dialogHeight=600px,status=0,toolbar=no,menubar=no,location=no,scrollbars=yes,dialogTop=20px,dialogLeft=20px,resizable=no');
}


$.fn.placeholder = function(o){
    o = $.extend({
        animate:true,
        proto:true,
        equal:false,
        color:'#999',
        theme:''
    }, o||{});
    return this.each(function(){
        var that = $(this), ph = $.trim(that.attr('placeholder'));
        if(!!ph){
            if(supportPlaceholder('input')){
                that.removeAttr('placeholder');
            }
            if(!$.trim(that.val())){
                that.val('');
            }
            var data = {
                pleft:parseInt(that.css('paddingLeft')),
                ptop:parseInt(that.css('paddingTop')),
                height:that.outerHeight()
            };
            var txt = $('<div>'+ ph +'</div>').appendTo(that.wrap('<div />').parent().css({
                position:'relative',
                width:that.outerWidth(),
                overflow:'hidden',
                cursor:'text'
            }).addClass(o.theme)).css($.extend({
                position:'absolute',
                left:data.pleft+1,
                top:data.ptop,
                height:data.height,
                lineHeight:data.height+'px',
                color:o.color
            }, that.is('textarea') ? {lineHeight:'normal', height:'auto'} : {})).on('click', function(){
                that.focus();
            });
            that.on('focus', function(){
                o.animate === true && txt.stop(false, true).animate({left:data.pleft+10, opacity:'0.5'});
            }).on('blur change', function(){
                var val = $.trim(that.val());
                if((o.equal === false && val == ph) || !val){
                    that.val('');
                    txt.show();
                    o.animate === true && txt.animate({left:data.pleft+1, opacity:'1'});
                }
                else{
                    txt.hide();
                }
            }).on('keyup keydown', function(){
                $.trim(that.val()) ? txt.hide() : txt.show();
            }).blur();
        }

    });
    function supportPlaceholder(element){
        return 'placeholder' in document.createElement(element);  
    }
}

$('.nwd-input-placeholder').placeholder();  
</script>
<script type='text/javascript'>
    var _specter = _specter || [];
    window._specter = _specter;
    (function(){
        _specter.push(['setAppKey', 'abef8227d49d8d54d8eabde3b2fea08d']);
        _specter.push(['platform', 'web']);
        $.ajax({
            type:"post",
            url:"/activity/common/getMidByUserLogin",
            async:"false",
            dataType:"json",
            success:function(data){
                if(data.isLogin == 1){
                    _specter.push(['identify', data.mid]);
                }else{
                    _specter.push(['identify', ""]);
                }
            }
        });   
        (function() {
            var specter = document.createElement('script');
            specter.type='text/javascript';
            specter.async = true;
            specter.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'report.niwodai.com/collector/statics/Specter.Analysis.min.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(specter, s);
        })();
    })();
</script>
<!--main  end-->



<!--<script type="text/javascript" src="/js/newIndex.js?v=20180120045043.js"></script>-->


<!-- 用户行为日志记录脚本 -->
<script type="text/javascript" src="http://static3.niwodai.com/Public/Static/201404/js/fingerprint2.min.js?v=20180120045043.js"></script>
<script type="text/javascript" src="http://static3.niwodai.com/Public/Static/201404/js/specter.js?v=20180120045043.js"></script>
<script type="text/javascript">
var staticCss = 'https://static.niwodai.com/Public/Static/201404';
</script>

<script type="text/javascript">
	    //同盾统计脚本
	  	  var nwdtokenId = '13BC5C0DCFB6C37B970EC0E5FBB0B6A34D2BC31539EFBFC37CC105D1D17';
	  	  var tokenId = 'NW' + nwdtokenId;
	      var _fmOpt = _fmOpt || {
	        partner: 'niwodai',
	        appName: 'niwodai',
	        token: tokenId
	      };
	    (function() {
	        var cimg = new Image(1,1);
	        cimg.onload = function() {
	            _fmOpt.imgLoaded = true;
	        };
	        cimg.src = "https://fp.fraudmetrix.cn/fp/clear.png?partnerCode=niwodai&appName=niwodai&tokenId=" + tokenId;
	        var fp = document.createElement('script'); fp.type = 'text/javascript'; fp.async = true;
	        fp.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'static.fraudmetrix.cn/fm.js?ver=0.1';
	        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(fp, s);
	    })();
	</script>
<div style="display:none;">
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Ff7330b5ee51197a8317461632524c922' type='text/javascript'%3E%3C/script%3E"));
</script>
</div>
</body>
</html>
