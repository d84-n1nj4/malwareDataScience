	<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
	<html>
	<head>
		<title>VSActivity / Identification</title>
		<meta http-equiv="Content-type" content="text/html; charset=ISO-8859-1"/>
		<meta http-equiv="Content-language" content="fr"/>
		<meta http-equiv="Window_target" content="_top"/>
		<meta http-equiv="expires" content="Tue, 01 Jan 2002 00:00:00 GMT"/>
	
		<meta name="description" content="vsa"/>
		<meta name="keywords" content="vsa"/>
		
		<meta name="robots" content="index,follow"/>
		<meta name="revisit-after" content="3 days"/>
		
		<meta name="copyright" content="&copy; vsa"/>
		<meta name="author" content="vsa"/>
		<meta name="owner" content="vsa"/>
	
		<!-- <meta http-equiv="X-UA-Compatible" content="IE=9" /> -->
		
		<link rel="icon" type="image/png" href="../../favicon.png" />
		
		<!--[if lt IE 9]>
			<script type="text/javascript" src="../../thirdparty/mocha-ui-trunk/scripts/excanvas_r43.js"></script>
		<![endif]-->
		<link rel="stylesheet" type="text/css" href="../../skins/common/vs.css" />
		<link rel="stylesheet" href="../../bower_dist/jquery-ui/themes/base/jquery-ui.min.css">
		
		<!-- FONT AWESOME -->
    	<link rel="stylesheet" href="../../thirdparty/font-awesome/css/font-awesome.min.css">
		
		<script type="text/javascript">
			var txt_confirm = "Confirmer";
			var txt_cancel = "Annuler";
			var txt_confirmation = "Demande de confirmation";
			var txt_error = "Une erreur est survenue : ";
			var txt_loading = "Chargement en cours...";
		</script>
		
		<script type="text/javascript" src="../../bower_dist/jquery/dist/jquery.min.js"></script>
		<script>jQuery.noConflict();</script>
		<script type="text/javascript" src="../../bower_dist/jquery-ui/jquery-ui.min.js"></script>
	
		<script type="text/javascript" src="../../inc/js/vs.js" charset="UTF-8"></script>
		<script type="text/javascript" src="../../inc/js/modal.js"></script>
		
		<script type="text/javascript">
			
			function redirect2homepage()
			{
				showLoader(document.body,'Vous accédez à l\'application');
				window.location.href = "https://metsys.vsactivity.com/o_homepage/"; 
			}
	
			// preload images to be display just before the redirection
			if (document.images) {
			    //img1 = new Image();
			    //img1.src = "../../skins/common/images/progress-bar.gif";
			    img2 = new Image();
			    img2.src = "../../skins/common/images/icon24/alert.png";   
			    img3 = new Image();
			    img3.src = "../../skins/common/images/login_approved.png";
			    img4 = new Image();
			    img4.src = "../../skins/common/images/login_approved2.png";

			    img5a = new Image();
			    img5a.src = "../../skins/common/images/ms_button.png";
			    img5b = new Image();
			    img5b.src = "../../skins/common/images/ms_button_hover.png";
			    img5c = new Image();
			    img5c.src = "../../skins/common/images/ms_button_press.png";

			    img5aa = new Image();
			    img5aa.src = "../../skins/common/images/ms_button_en.png";
			    img5bb = new Image();
			    img5bb.src = "../../skins/common/images/ms_button_hover_en.png";
			    img5cc = new Image();
			    img5cc.src = "../../skins/common/images/ms_button_press_en.png";
			    
			    img6a = new Image();
			    img6a.src = "../../skins/common/images/vsa_button.png";
			    img6b = new Image();
			    img6b.src = "../../skins/common/images/vsa_button_hover.png";
			    img6c = new Image();
			    img6c.src = "../../skins/common/images/vsa_button_press.png";

			    img6aa = new Image();
			    img6aa.src = "../../skins/common/images/vsa_button_en.png";
			    img6bb = new Image();
			    img6bb.src = "../../skins/common/images/vsa_button_hover_en.png";
			    img6cc = new Image();
			    img6cc.src = "../../skins/common/images/vsa_button_press_en.png";
			    
			    img7a = new Image();
			    img7a.src = "../../skins/common/images/google_button.png";
			    img7b = new Image();
			    img7b.src = "../../skins/common/images/google_button_hover.png";
			    img7c = new Image();
			    img7c.src = "../../skins/common/images/google_button_press.png";

			    img7aa = new Image();
			    img7aa.src = "../../skins/common/images/google_button_en.png";
			    img7bb = new Image();
			    img7bb.src = "../../skins/common/images/google_button_hover_en.png";
			    img7cc = new Image();
			    img7cc.src = "../../skins/common/images/google_button_press_en.png";
			    
			}

			
		</script>
		
<script type="text/javascript">

	var txt_deconnection = "Déconnexion en cours ...";
	var txt_refresh = "Rafraîchissement";
	var txt_element_by_page = "éléments par page";
	var txt_return_liste = "Retour à la liste";

	var txt_next_step = "Étape suivante";

	var txt_collapse = "Réduire";
	var txt_restore = "Restaurer";
	
	// --- RESSOURCES TEXTES ---
	var txt_favourites = "Favoris";
	var txt_label_ok = "OK";
	var txt_label_ko = "KO";
	var txt_label_yes = "Oui";
	var txt_label_no = "Non";
	var txt_confirm = "Confirmer";
	var txt_cancel = "Annuler";
	var txt_close = "Fermer";
	var txt_collapse = "Réduire";
	var txt_restore = "Restaurer";
	var txt_confirmation = "Demande de confirmation";
	var txt_list = "Liste";
	var txt_confirm_logoff = "Quitter l'application";
	var txt_cancel_logoff = "Rester connecté";
	var txt_preview = "Prévisualisation"; // modèles de factures,...

	var txt_day = "jour";
	var txt_days = "jours";
	var txt_hour = "heure";
	var txt_hours = "heures";
	
	var txt_delete_attachment = "Êtes-vous certain de vouloir supprimer cet attachement ?";
	var txt_delete_doc_attach = "Êtes-vous certain de vouloir supprimer le document attaché ?";
	var txt_delete_justif = "Êtes-vous certain de vouloir supprimer le justificatif ?";
	
	var txt_nav_next_page = "Navigation vers<br/><span style='font-size:20px;'>la page suivante</span>";
	var txt_nav_last_page = "Navigation vers<br/><span style='font-size:20px;'>la dernière page</span>";
	var txt_nav_prev_page = "Navigation vers<br/><span style='font-size:20px;'>la page précédente</span>";
	var txt_nav_first_page = "Navigation vers<br/><span style='font-size:20px;'>la première page</span>";
	var txt_asc_sort = "Tri croissant sur la colonne sélectionnée";
	var txt_desc_sort = "Tri décroissant sur la colonne sélectionnée";

	var txt_loading = "Chargement en cours...";
	var txt_loading_add_element = "Création";
	var txt_loading_update_element = "Modification";
	var txt_loading_duplicate_element = "Duplication";
	var txt_loading_change = "Mise à jour...";
	var txt_loading_change_statut = "Mise à jour du statut...";
	var txt_loading_change_state = "Mise à jour de l'état...";
	var txt_loading_change_date = "Mise à jour de la date...";
	var txt_loading_change_active = "Mise à jour de l'état actif/inactif...";
	var txt_loading_delete = "Suppression en cours...";
	var txt_loading_delete_doc = "Suppression d'un attachement en cours...";
	var txt_loading_defaut = "Élément mis par défaut...";
	var txt_loading_add_tab = "Ajout d'un nouveau volet...";
	var txt_loading_trash_tab = "Suppression d'un volet...";
	var txt_loading_copy_tab = "Duplication du volet en cours...";
	var txt_loading_saving = "Enregistrement en cours...";
	var txt_loading_sending = "Envoi en cours...";
	var txt_loading_gridcols = "Enregistrement et application des modifications...";
	var txt_loading_exporting_excel = "Export Excel en cours...";
	var txt_loading_saving_parameters_appli = "Enregistrement des<br/><span style='font-size:20px;'>paramètres d'application</span><br/>en cours...";
	var txt_loading_saving_parameters_system = "Enregistrement des<br/><span style='font-size:20px;'>paramètres du système</span><br/>en cours...";
	var txt_loading_saving_parameters_entity = "Enregistrement des<br/><span style='font-size:20px;'>paramètres de l'entité</span><br/>en cours...";
	var txt_loading_saving_parameters_user = "Enregistrement des<br/><span style='font-size:20px;'>préférences de l'utilisateur</span><br/>en cours...";
	var txt_leave_modification = "Des modifications n\'ont pas été enregistrées, souhaitez-vous quitter sans sauvegarder ?";

	var txt_simulation_no_change = "Comme vous êtes en mode simulation, cette action n\'est pas faisable.";
	
	// --- modal messageSimple ---
	var txt_modal_message_simple_title = "Message d'information";
	var txt_modal_message_simple_ok = "J'ai lu l'information";

    // --- modal Doublon (duplication chedk) ---
    var txt_modal_message_duplication_check_title = "Contrôle des doublons";
	var txt_modal_message_duplication_check_ok = "J'ai compris";
	
	var txt_first_connection_title = "C'est la première fois que vous vous connectez à l'application";
	var txt_first_connection_ok = "J'ai lu l'information";
	
	// --- AJAX ---
	var txt_error_ajax = "Votre navigateur ne supporte pas AJAX";
	var txt_error_req_ajax= "Erreur dans la requête Ajax... ";
	var txt_error = "Un problème technique est survenu, impossible de faire le traitement";
	var txt_error_tech = "Un problème technique est survenu";
	var txt_problem = "Un problème technique est survenu, impossible de faire le traitement";
	var txt_problem_tech = "Un problème technique est survenu";
	var txt_error_withmsg = "Une erreur est survenue : ";
	var txt_error_change_statut = "Un problème technique est survenu, impossible de changer le statut.";
	var txt_error_save_postit = "Un problème technique est survenu, impossible d'enregistrer le post-it";
	var txt_error_order_list = "Impossible de récupérer la liste des affaires";

	// --- CRA
	var txt_cra_deleteline_confirm = "Etes-vous sûr de vouloir supprimer cette ligne ?";
	var txt_cra_addline = "Ajout d'une ligne d'activité...";
	var txt_error_cra_addline = "addLine : Une erreur est survenue lors de l'ajout de la ligne";

	// --- EA en grille
	var txt_expenses_deleteline_confirm = "Etes-vous sûr de vouloir supprimer cette ligne ?";
	var txt_expenses_addline = "Ajout d'une ligne de frais...";
	var txt_error_expenses_addline = "addLine : Une erreur est survenue lors de l'ajout de la ligne";
	var txt_expensespivot_refresh_chart = "Raffraichissement de la synthèse...";
	var txt_error_expensespivot_chart = "Une erreur est survenue lors du raffraichissement de la synthèse";
	
	// --- ALERTES --
	var txt_warn_message = "Êtes-vous sûr d\'avoir traiter cet élément et de vouloir en lever l\'alerte ?";
	var txt_warn_withmsg = "Alerte désactivée pour ";

	var txt_warn_doc = "le document";
	var txt_warn_oppy = "l'opportunité";
	var txt_warn_propal = "la proposition commerciale";
	var txt_warn_task = "la tâche";
	var txt_warn_suivi_candidature = "l\'action de suivi de candidature";
	var txt_warn_suivi_rh= "un suivi RH";
	
	var txt_warn_end_order = "Alerte désactivée pour le suivi de la fin de l'affaire";
	var txt_warn_sign_order = "Alerte désactivée pour le suivi de la signature de l'affaire";

	var txt_warn_error= "Une erreur est survenue lors de la mise à jour de l\'alerte";
	var txt_warn_error_order = "Une erreur est survenue lors de la mise à jour du suivi d\'une affaire";
	var txt_warn_error_order_document = "Une erreur est survenue lors de la mise à jour du suivi d\'un document d\'un tiers";
	var txt_warn_error_crm = "Une erreur est survenue lors de la mise à jour d\'un élément du CRM";
	var txt_warn_error_rh = "Une erreur est survenue lors de la mise à jour de l\'alerte RH";

	// --- PLANIF ---
	var txt_planif_no_activity = "Aucune activité de planifiée";
	var txt_planif_copy_collab_real = "Êtes-vous certain de vouloir copier la planification des collaborateurs sélectionnés dans leurs activités réelles ?";
	var txt_planif_copy_real = "Êtes-vous certain de vouloir copier la planification dans l\'activité réelle ?";
	var txt_planif_copy_real_desc = "Cela écrasera toute saisie manuelle à l\'exception des CRA soumis ou validés, des activités internes visibles dans la planification et des absences.";
	var txt_planif_copy_cra_to_planning = "Êtes-vous certain de vouloir copier l\'activité réelle des collaborateurs sélectionnés dans leurs planifications ?";
	var txt_planif_copy_cra = "Copier dans le CRA";
	var txt_planif_copy_planning = "Copier le CRA dans la planification";
	var txt_planif_change_month = "Changement de mois";
	var txt_planif_delete_planif = "Êtes-vous certain de vouloir supprimer toute la planification de cette mission pour le collaborateur ?";
	var txt_planif_month = "Planifier pour la mission sur l'ensemble des mois";
	var txt_planif_return = "Retour au planning";
	var txt_planif_days_overflow = "Nombre de jours ouvrés du mois dépassé pour ce collaboorateur : ";
	
	// --- ODM ---
	var txt_odm_send_error = "Une erreur est survenue lors de l\'envoi de l\'ordre de mission : ";
	var txt_odm_update_error = "Une erreur est survenue lors de la modification de l\'ordre de mission : ";

	// --- PROGRESS PLAN ---
	var txt_progress_plan_error = "Une erreur est survenue lors de la modification du progress plan";

	// --- WORKFLOW
	var txt_workflow_submit = "La demande de validation a bien été soumise";
	var txt_workflow_validator = "Relancer les validateurs par email";
	
</script>		
	<script type="text/javascript">
		jQuery(window).on('load', function() {
			
			if (jQuery('#id_login').length) jQuery('#id_login').focus(); 

			hideLoader(document.body);
		}).on('error', function(e){
			hideLoader(document.body);
		});
	</script>

	</head>
	
	
	
	<body style="background-color:#dedede;">
	
	<div id="loading-div" class="mask"><div class="loader-spinner"><div class="loader-dot1"></div><div class="loader-dot2"></div></div><div id='loader-text-div' class="loader-text"></div></div>
	
	
		
	<noscript>
		<meta http-equiv="Refresh" content="0 URL=../..//vsa-javascript-inactif.html" />
	</noscript>
	
	
	<div class="loginhomeouter">
	<div class="loginhomemiddle">
	<div class="loginhomeinner">

		<div id="logintable">
			
			<div class="contentdiv4login">
		
			<img style="width:200px;" src="../../common/plogo/?param=login_logo" title="8.0.3 METSYS vsa13 118.219.252.193" />			<br/>
			
			
		
		<form method="post" class="contentform4login" action="../../common/forms/forms.service.php?id=5a72f1f87ce80" id="form_login"><input type="hidden" name="form_name" value="form_login"/ > 

					<table border="0" width="100%" cellpadding="0" cellspacing="0"> 
 <tr><td colspan="3"> 
 <div id="head_title_form_login"></div></td></tr> 
<tr><td colspan="3"><div id="head_form_login"></div></td></tr> 
 
						<tr><td><table id="tab_main" cellpadding="0" cellspacing="0" style="border:0;width:100%;" ><tr> <td class="formforcecol1">&nbsp;</td> <td class="formforcecol2">&nbsp;</td> <td class="formforcecol3">&nbsp;</td> </tr> 
<tr><td colspan="3" width="50px">
						&nbsp;
						</td></tr><tr id="tr_login" ><td style="text-align:center;" colspan="2"><h3 id="it_login" style='font-weight:bold;font-size:110%;text-align:center;text-transform: uppercase;font-family:arial, verdana;line-height: 26px;'><label for='id_login'>Identifiant</label></h3><input size="25" type="text" name="login" 
							id="id_login" class="inputreq inputbig" value="" tabindex="1" /> 
	             </td><td></td></tr><tr><td colspan="3" width="50px">
						&nbsp;
						</td></tr><tr id="tr_password"><td style="text-align:center;" colspan="2"><h3 id="it_password" style='font-weight:bold;font-size:110%;text-align:center;text-transform: uppercase;font-family:arial, verdana;line-height: 26px;'><label for='id_password'>Mot&nbsp;de&nbsp;passe</label>
				&nbsp;<a href="#" onclick="openMochaModal('popup_pwd/?lang=fr_FR','',500,280);" style='margin-top:-5px;padding:0;text-decoration:underline;font-size:9px !important;'>Mot&nbsp;de&nbsp;passe&nbsp;oublié&nbsp;?</a></h3><input size="25"  class="inputreq inputbig" id="id_password" type="password" name="password"  tabindex="2" /> 
 
</td>
			<td></td>
			</tr><tr><td colspan="3" width="50px">
						&nbsp;
						</td></tr><tr id="tr_sublogin" ><td colspan="3" align="center">
							<input type="submit" class="special_form_button_login" name="sublogin" id="id_sublogin" value=""  tabindex="3" >
						</td> </tr><tr id="tr_lang">
				<td colspan="3">
					<div id="it_lang">
					<input id="id_lang" type="hidden" name="lang" value="fr_FR"/></div>
				</td>
			</tr></table> 

</td></tr></table></form><script>
				
					function displayEditMode()
					{
						var modif = false;
						jQuery('span.form_edit').each(function(index, element) {
							if (jQuery(this).css('visibility') == 'hidden')
							{
								jQuery(this).css('visibility', 'visible');
								modif = true;
							}
							else
							{
								jQuery(this).css('visibility', 'hidden');
								modif = false;
							}
						});
				
						if (!modif)
						{
							jQuery('#displayEditModeButton').val( 'Modifier' );
							jQuery('#saveEditModeButton').prop('disabled', true);
						}
						else
						{
							jQuery('#displayEditModeButton').val( 'Ne plus modifier' );
							jQuery('#saveEditModeButton').prop('disabled', false);
						}
									
						jQuery('input.edit_input').each(function(index, element) {
							if (jQuery(this).prop('type') == 'checkbox')
							{
								jQuery(this).click(function(e) {
									if (jQuery(this).is(':checked')) jQuery(this).val('checked');
									else jQuery(this).val('not_checked');
								});
							}
						});
					}
				
					function saveEditMode()
					{									
						var params = 'name=form_login';
									
						jQuery('input.edit_input').each(function(index, element) {
							params += '&' + jQuery(this).attr('name') + '=' + jQuery(this).val();
						});
						
						jQuery.ajax({
				    		method: 'get',
				    		url: '../..//common/forms/forms.edit.php',
				    		data: params,
				    		success: function(data) {
				    			alert('enregistré');
				    		},
				    		error: function(data) {
				    			alert('erreur');
				    		}
				    	});
					}
									
					function toggleEditDiv(name)
					{
							if (jQuery(document.getElementById('div_edit_' + name)).css('display') == 'block') jQuery(document.getElementById('div_edit_' + name)).css('display', 'none');
							else jQuery(document.getElementById('div_edit_' + name)).css('display', 'block');
					}
				
					</script><script> 
					jQuery(document.getElementById('form_login')).submit(function(e)
						{
							//Empeche la soumission
							e.preventDefault();
							
							// On scroll tout en haut du form
							jQuery(window).scrollTop(0);
							
							if ('form_login' != 'form_login')
							{
								// On verrouille le bouton submit
								var aInput = document.getElementsByTagName('input');
								for (var i = 0; i < aInput.length ; i++)
								{
									if (aInput[i].type == 'submit' && aInput[i].id.substr(0,3)=='id_') 
									{
										aInput[i].disabled = true;
									}
								}
									
								showLoader(document.body,'Enregistrement en cours');
							}else
								showLoader(document.body,'Vous accédez à l\'application');
							
							// Fonctions appelée avant l'envoi
									
							// Sauvegarde de tinymce au besoin
							if (typeof tinyMCE == 'object')
							{
								tinyMCE.triggerSave();
							}
				
							// #8759 - On ramasse les fichiers uploadés et on les pousse en hidden
							// Si un tableau hidden existe deja, on le supprime
							
							jQuery('input[name*="attachement"]').remove();
							jQuery('input[name*="attach_tmpname"]').remove();
							
							jQuery('div.ajax-file-upload-filename').each(function(index, element){
								filename = jQuery(this).html().replace('<br>','');
								filename = filename.replace('C:\\fakepath\\','');
							    hidden = jQuery('<input />')
									.attr({
										'type': 'hidden',
										'name': 'attachement[]'
									})
									.val(filename);
				
								jQuery(document.getElementById('form_login')).append(hidden);
							});
							
							jQuery('div.ajax-file-upload-tmpname').each(function(index, element){
								tmpname = jQuery(this).html().replace('<br>','');
								tmpname = tmpname.replace('C:\\fakepath\\','');
								hidden_tmp = jQuery('<input />')
									.attr({
										'type': 'hidden',
										'name': 'attach_tmpname[]'
									})
									.val(tmpname);
				
								jQuery(document.getElementById('form_login')).append(hidden_tmp);
							});
							
							jQuery.ajax({
            					url: jQuery(this).attr('action'),
            					type: jQuery(this).attr('method'),
            					data: jQuery(this).serialize(),
            					success: function( response ) {
jQuery(document.getElementById('it_login')).css('color', 'black');
jQuery(document.getElementById('it_login')).css('background-color', 'transparent');
jQuery(document.getElementById('it_login')).css('padding', '0px');
jQuery(document.getElementById('it_login')).css('margin', '0px 10px 0px 0px');
if (jQuery(document.getElementById('id_login')).length) jQuery(document.getElementById('id_login')).css('background-color', '');
if (jQuery(document.getElementById('id_login_chzn')).length) jQuery(document.getElementById('id_login_chzn')).css('background-color', '');
if (jQuery(document.getElementById('td_dyn_login_chzn')).length) jQuery(document.getElementById('td_dyn_login_chzn')).css('background-color', '');
jQuery(document.getElementById('it_password')).css('color', 'black');
jQuery(document.getElementById('it_password')).css('background-color', 'transparent');
jQuery(document.getElementById('it_password')).css('padding', '0px');
jQuery(document.getElementById('it_password')).css('margin', '0px 10px 0px 0px');
if (jQuery(document.getElementById('id_password')).length) jQuery(document.getElementById('id_password')).css('background-color', '');
if (jQuery(document.getElementById('id_password_chzn')).length) jQuery(document.getElementById('id_password_chzn')).css('background-color', '');
if (jQuery(document.getElementById('td_dyn_password_chzn')).length) jQuery(document.getElementById('td_dyn_password_chzn')).css('background-color', '');
		
									var submit_disabled_after = [];
									console.debug('response : ',response);
									try
									{
										var myBack = JSON.parse(response);
										if (myBack.error_fields.length == 0 && myBack.error_messages.length == 0)
										{
						var e = '';
											for (var i = 0; i < myBack.info_messages.length; i++)
											{
												if (i > 0) e += '<br/>';
												
												e += myBack.info_messages[i] ;
												//if ( !(i == myBack.info_messages.length-1)) { e += '<br/>'; }
											}

		
											for (var i = 0; i < myBack.warning_messages.length; i++)
											{
												if (i > 0) e += '<br/>';
											
												e += myBack.warning_messages[i] ;
												//if ( !(i == myBack.warning_messages.length-1)) { e += '<br/>'; }
											}
					if (e.trim()!='' && e.trim()!='<br/>') jQuery(document.getElementById('head_form_login')).html( '<table cellpadding="0" cellspacing="0" border="0" width="100%" class="corpboxtable" style="background-color: transparent;"><tr><td valign="top"><p><font style="font-weight: normal;text-decoration: none;">' + e + '</font></p></td></tr></table>' );
						
											if (myBack.head_title != '')
											{
												if (myBack.head_title != 'NO_TITLE')
												{
													jQuery(document.getElementById('head_title_form_login')).html( '<h1>' + myBack.head_title + '</h1>' );
												} else {
													jQuery(document.getElementById('head_title_form_login')).html('');
												}
											}
											
											for (var i = 0; i < myBack.readonly.length; i++)
											{
												jQuery(document.getElementById('id_' + myBack.readonly[i])).prop('readonly', true);
											}
											
											submit_disabled_after = [];
											for (var i = 0; i < myBack.disabled.length; i++)
											{
												if (!jQuery(document.getElementById('id_' + myBack.disabled[i])).length)
												{
													alert('Impossible de désactiver ' + myBack.disabled[i]);
												}
												else
												{
													jQuery(document.getElementById('id_' + myBack.disabled[i])).prop('disabled', true);
													// et on change la classe
													jQuery(document.getElementById('id_' + myBack.disabled[i])).removeClass().addClass('inputdisabled');
													
													// Pour les champs chosen, il faut forcer une refabrication
													jQuery(document.getElementById('id_' + myBack.disabled[i])).trigger('liszt:updated');
															
															
													// on remplit le tableau de backup pour ne pas réactiver un bouton qui doit le rester
													submit_disabled_after.push('id_' + myBack.disabled[i]);
												}
											}
											
											for (var i = 0; i < myBack.hidden.length; i++)
											{
												jQuery(document.getElementById('tr_' + myBack.hidden[i])).css('display', 'none');
											}
								redirect2homepage();
if ('form_login' != 'form_login') hideLoader(document.body);

										}
										// Formulaire KO
										else
										{

											hideLoader(document.body);
											
											for (var i = 0; i < myBack.error_fields.length; i++)
											{
												if (jQuery(document.getElementById('it_' + myBack.error_fields[i])).length)
												{
													jQuery(document.getElementById('it_' + myBack.error_fields[i])).css('color', '#e01c00'); //'#ff7979';
													//jQuery(document.getElementById('it_' + myBack.error_fields[i])).css('background-color', '#f3d8d8');
													jQuery(document.getElementById('it_' + myBack.error_fields[i])).css('font-weight', 'bold');
													//jQuery(document.getElementById('it_' + myBack.error_fields[i])).css('padding', '0px 5px 13px 0px');
													//jQuery(document.getElementById('it_' + myBack.error_fields[i])).css('margin', '0px 10px 0px 0px');
					
													if (jQuery(document.getElementById('id_' + myBack.error_fields[i])).length) 
													{
														jQuery(document.getElementById('id_' + myBack.error_fields[i])).css('background-color', '#FEBD00' );
													}
													
													if (jQuery(document.getElementById('id_' + myBack.error_fields[i] + '_chzn')).length) 
													{
														jQuery(document.getElementById('id_' + myBack.error_fields[i] + '_chzn')).css('background-color', '#FEBD00' );
													}
													
													// PAS que la première ligne... 
													//if (jQuery(document.getElementById('td_dyn_' + myBack.error_fields[i])).length) 
													//{
													//	jQuery(document.getElementById('td_dyn_' + myBack.error_fields[i])).css('background-color', '#FEBD00' );
													//}
													
													// ON TRAITE tous les lignes d'un multi-dyn
													if (jQuery(document.getElementById('dyn_' + myBack.error_fields[i])).length) 
													{
														var table_dyn_obj = jQuery(document.getElementById('dyn_' + myBack.error_fields[i])).closest('table');
														if (table_dyn_obj.length)
														{
															table_dyn_obj.find('td').each(function() 
															{
																jQuery(this).css('background-color', '#FEBD00' );
															});
														}														
													}
					
												}
											}
											
											var e = '';
											if (myBack.error_fields.length > 0)
											{
												e = "<b>Un ou plusieurs champs ne sont pas correctement renseignés.</b>";
												
												// DEBUG
// 												var debug_error_fields = '';
// 												for (var i = 0; i < myBack.error_fields.length; i++)
// 												{
// 													if (debug_error_fields.length!=0) {
// 														debug_error_fields += ' -- '; 
// 													}
// 													debug_error_fields += myBack.error_fields[i] ;
// 												}
// 												alert(debug_error_fields);
												
											}
											
											for (var i = 0; i < myBack.error_messages.length; i++)
											{
												if (e.length!=0) {
													e += '<br\>'; 
												}
												e += myBack.error_messages[i] ;
											}
											
											jQuery(document.getElementById('head_form_login')).html( '<table cellpadding="0" cellspacing="0" border="0" width="100%" class="errorboxtable"><tr><td valign="top"><p><font style="font-size:14px;font-weight: normal;font-style: normal;text-decoration: none;">' + e + '</font></p></td></tr></table>' );

											jQuery(document.getElementById('head_form_login')).slideDown(1000);
											setTimeout(function () { jQuery(document.getElementById('head_form_login')).slideUp(1000); }, 12000);
 
											setTimeout(function () { jQuery(document.getElementById('head_form_login')).html(''); }, 13000);
 
													
											
					}

				
		
									}

									catch(err)
									{
										console.debug('Form - Erreur Message : ',err.message);
										hideLoader();
				
										//var e = "Une erreur technique est survenue lors de l'enregistrement du formulaire : "  + err.message + ' ' + response;
										var e = "Une erreur technique est survenue lors de l'enregistrement du formulaire.<br>Nous nous excusons pour ce désagrément.";
												
										// On va envoyer l'erreur par le biais d'une requete AJAX sur un service créé pour l'occasion
										// On va squizzer une erreur Firefox que l'on ne comprend pas
										// [Exception... 'Component not initialized' nsresult: '0xc1f30001 (NS_ERROR_NOT_INITIALIZED)' 
										// location: 'JS frame :: https://acaly.vsactivity.com/bower_dist/jquery/dist/jquery.js?8.0.2 :: createFxNow :: line 6789' data: no]
										if (err.indexOf('NS_ERROR_NOT_INITIALIZED') == -1)
										{
											jQuery.ajax({
													method : 'GET',
													url : '../..//common/jserror/service.php',
													dataType: 'html',
													data : 'exception=' + encodeURIComponent(err) + '&name=form_login' + '&response=' + encodeURIComponent(response),
													cache: false,
													processData: false,
													contentType: false,
													success: function(responseHTML){
															
													},
													error: function(){
															// Rien
													}
												});
										}
															
										jQuery(document.getElementById('head_form_login')).html( '<table cellpadding="0" cellspacing="0" border="0" width="100%" class="errorboxtable"><tr><td valign="top"><p><font style="font-size:14px;font-weight: normal;font-style: normal;text-decoration: none;">' + e + '</font></p></td></tr></table>' );

										jQuery(document.getElementById('head_form_login')).slideDown(1000);
										
										// Sur les message d'erreur, on leve pas l'affichage
										//setTimeout(function () { jQuery(document.getElementById('head_form_login')).slideUp(1000); }, 12000);

										//setTimeout(function () { jQuery(document.getElementById('head_form_login')).html(''); }, 13000);
 

									}
											
									
									// On déverrouille les boutons submit
									// .. s'ils ne sont pas disabled en sortie de formulaire !!
									var aInput = document.getElementsByTagName('input');
									for (var i = 0; i < aInput.length ; i++)
									{
										if (aInput[i].type == 'submit' && aInput[i].id.substr(0,3)=='id_') 
										{
											if(submit_disabled_after.indexOf(aInput[i].id) > -1) 
											{
												// dans le tableau... on ne fait rien !
												// on le laisse disabled !
											}
											else
											{
											    // does not exist dans le tableau des submit disabled,
												// on le réactive donc 
												aInput[i].disabled = false;
											}
										}
									}
										}});
				
							return false;
						});
jQuery(document).ready(function(){
});
</script>	
			</div>
			
		</div>
	</div>
	</div>
	</div>
	
	</body>
	</html>

