<!DOCTYPE html>
<html>
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" >
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta http-equiv="PRAGMA" content="no-cache"> 
<meta http-equiv="Expires" content="-1">
<meta http-equiv="Cache-Control" content="no-cache">
<link rel="icon" type="image/x-icon" href="/web/images/Logo_16x16.ico"></link>
<title></title>
</head>

<!-- jQuery Lib -->
<script type="text/javascript" src="/web/jquery/js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="/web/jquery/js/jquery-migrate-1.1.1.min.js"></script>
<link rel="stylesheet" type="text/css" href="/web/jquery/css/redmond/jquery-ui-1.10.3.min.css">
<link rel="stylesheet" type="text/css" href="/web/jquery/css/jquery-ui.custom.css">
<script type="text/javascript" src="/web/jquery/js/jquery-ui-1.10.3.min.js"></script>
<script type="text/javascript" src="/web/jquery/js/jquery.tools-1.2.7.min.js"></script>
<script type="text/javascript" src="/web/jquery/js/jquery.tools.expose-1.2.7.min.js"></script>
<script type="text/javascript" src="/web/jquery/jquery.checkbox.js"></script>

<!--jAlert-->
<link rel="stylesheet" type="text/css" href="/web/jquery/alerts/jquery.alerts.css?v=WDV1.01">
<script type="text/javascript" src="/web/jquery/alerts/jquery.alerts.js?v=WDV1.01"></script>

<!-- flexigrid -->
<link rel="stylesheet" type="text/css" href="/web/jquery/flexigrid/css/flexigrid.css?v=WDV1.01">
<script language="javascript" src="/web/jquery/Flexigrid-master/js/flexigrid.js?v=WDV1.01"></script>

<!-- tree lib -->
<script type="text/javascript" src="/web/jquery/jqueryFileTree/js/jqueryFileTree.js?v=WDV1.02"></script>
<link href="/web/jquery/jqueryFileTree/css/jqueryFileTree.css?v=WDV1.01" rel="stylesheet" type="text/css" media="screen" />

<!-- Progress Bar -->
<script language="javascript" src="/web/jquery/jquery.progressbar/js/jquery.progressbar.min.js?v=WDV1.01"></script>

<!--[if lte IE 8]><script language="javascript" type="text/javascript" src="/web/jquery/js/excanvas.min.js"></script><![endif]-->   
<script language="javascript" type="text/javascript" src="/web/jquery/js/jquery.flot.min.js?v=WDV1.01"></script>
<script language="javascript" type="text/javascript" src="/web/jquery/js/jquery.flot.crosshair.min.js?v=WDV1.01"></script>

<link rel="stylesheet" type="text/css"  href="/web/jquery/jquery.pie/jquery.flot.pie.css?v=WDV1.01">
<script language="javascript" type="text/javascript" src="/web/jquery/jquery.pie/jquery.flot.pie.min.js?v=WDV1.01"></script>

<!-- styles needed by jScrollPane -->
<link type="text/css" href="/web/jquery/jScrollPane/style/jquery.jscrollpane.css?v=WDV1.01" rel="stylesheet" media="all" />
<!-- the mousewheel plugin - optional to provide mousewheel support -->
<script type="text/javascript" src="/web/jquery/jScrollPane/script/jquery.mousewheel.min.js?v=WDV1.01"></script>
<!-- the jScrollPane script -->
<script type="text/javascript" src="/web/jquery/jScrollPane/script/jquery.jscrollpane.min.js?v=WDV1.01"></script>

<!--<link rel="stylesheet" type="text/css"  href="/web/jquery/jquery-placeholder/jquery.placeholder.css">-->
<script type="text/javascript" src="/web/jquery/jquery-placeholder/jquery.placeholder.js?v=WDV1.01"></script>

<script type="text/javascript" src="/web/function/web_security.js?v=WDV1.01"></script>

<script type="text/javascript" src="/web/jquery/jquery.cookie/jquery.cookie.js?v=WDV1.01"></script>
<script type="text/javascript" src="/web/jquery/jquery.cookie/jquery.cookie.pack.js?v=WDV1.01"></script>

<!-- bin/jquery.slider.min.css -->
<link rel="stylesheet" href="/web/jquery/slider/css/jslider.css?v=WDV1.01" type="text/css">
<link rel="stylesheet" href="/web/jquery/slider/css/jslider.blue.css?v=WDV1.01" type="text/css">
<link rel="stylesheet" href="/web/jquery/slider/css/jslider.plastic.css?v=WDV1.01" type="text/css">
<link rel="stylesheet" href="/web/jquery/slider/css/jslider.round.css?v=WDV1.01" type="text/css">
<link rel="stylesheet" href="/web/jquery/slider/css/jslider.round.plastic.css?v=WDV1.01" type="text/css">
<!--[if lte IE 8]><link rel="stylesheet" href="/web/jquery/slider/css/jslider_ie8.css" type="text/css"><![endif]-->   
<!-- bin/jquery.slider.min.js -->
<script type="text/javascript" src="/web/jquery/slider/js/jshashtable-2.1_src.min.js"></script>
<script type="text/javascript" src="/web/jquery/slider/js/jquery.numberformatter-1.2.3.min.js"></script>
<script type="text/javascript" src="/web/jquery/slider/js/tmpl.js"></script>
<script type="text/javascript" src="/web/jquery/slider/js/jquery.dependClass-0.1.min.js"></script>
<script type="text/javascript" src="/web/jquery/slider/js/draggable-0.1.min.js"></script>		
<script type="text/javascript" src="/web/jquery/slider/js/jquery.slider.min.js"></script>
<!-- end -->

<script type="text/javascript" src="/web/jquery/jquery.numeric.js"></script>
<script type="text/javascript" src="/web/jquery/jquery.form.js"></script>

<script type="text/javascript" src="/web/function/wd_ajax.js"></script>
<script type="text/javascript" src="/web/function/switch.js?v=WDV1.01"></script>
<script type="text/javascript" src="/web/function/tooltip.js?v=WDV1.01"></script>
<link rel="stylesheet" type="text/css" href="/web/css/tooltip.css?v=WDV1.01">

<link rel="stylesheet" type="text/css" href="/web/css/dialog.css?v=WDV1.01">
<link rel="stylesheet" type="text/css" href="/web/css/style.css?v=WDV1.09">
<link rel="stylesheet" type="text/css" href="/web/css/button.css?v=WDV1.01">
<link rel="stylesheet" type="text/css" href="/web/css/select.css?v=WDV1.02">
<link rel="stylesheet" type="text/css" href="/web/css/nav.css?v=WDV1.03">
<link rel="stylesheet" type="text/css" href="/web/css/access_icon.css?v=WDV1.03">
<link rel="stylesheet" type="text/css" href="/web/css/switch.css?v=WDV1.01">
<link rel="stylesheet" type="text/css" href="/web/css/job_list_icon.css?v=WDV1.01">

<script type="text/javascript" src="/web/function/abgne-minwt_selectmenu.js?v=WDV1.01"></script>
<script type="text/javascript" src="/web/function/base64.js"></script>
<script language="javascript" src="/web/function/define.js?id=1517682197"></script>
<script language="javascript" src="/web/function/diag.js?id=1517682197"></script>
<script language="javascript" src="/web/function/function.js?id=1517682197"></script>
<script language="javascript" src="/web/function/init.js?id=1517682197"></script>
<script language="javascript" src="/web/function/button.js?id=1517682197"></script>
<script language="javascript" src="/web/function/raid_define.js?id=1517682197"></script>
<script language="javascript" src="/web/function/raid_diag.js?id=1517682197"></script>
<script language="javascript" src="/web/function/homeDiag.js?id=1517682197"></script>
<script language="javascript" src="/web/function/home.js?id=1517682197"></script>
<script language="javascript" src="/web/function/sub_menu.js?id=1517682197"></script>
<script language="javascript" src="/web/function/home_usb.js?id=1517682197"></script>
<script language="javascript" src="/web/function/fw.js?id=1517682197"></script>
<script language="javascript" src="/web/function/input.js?id=1517682197"></script>
<script language="javascript" src="/web/function/device_active.js?id=1517682197"></script>
<script language="javascript" src="/web/function/eula.js?id=1517682197"></script>
<script language="javascript" src="/web/function/rest.js?id=1517682197"></script>
<script language="javascript" src="/web/function/cloud.js?id=1517682197"></script>
<script language="javascript" src="/web/function/web_idle_timeout.js?id=1517682197"></script>
<script language="javascript" src="/web/function/language.js?id=1517682197"></script>
<script language="javascript" src="/web/function/rc4.js?id=1517682197"></script>
<script language="javascript" src="/web/function/users.js?id=1517682197"></script>
<script language="javascript" src="/web/function/quota.js?id=1517682197"></script>
<script language="javascript" src="/web/function/system.js?id=1517682197"></script>
<script type="text/javascript" src="/web/function/notification.js?id=1517682197"></script>
<script type="text/javascript" src="/web/function/sms.js?id=1517682197"></script>
<script language="javascript" src="/web/function/reg_device.js?id=1517682197"></script>
<!-- Date Format -->
<script type="text/javascript" src="/web/jquery/date_format-1.2.3.js"></script>
<!--<script src="/web/lib/msg.php?v=1517682197" type="text/javascript"></script>-->

<style>
    body,
    html {
        margin:0;
        padding:0;
        border:0;
        background-repeat:no-repeat;
        background-attachment: fixed;
    } /* Re-sets IE to "zero" for these values */
    #non_supported_browser {
        display: none;
    }
</style>

<script type="text/javascript">
var _login_username = "";
var lanagage_list = new Array(
	"EN-US", "FR-FR", "IT-IT", "DE-DE", "ES-ES", "ZH-CN", "ZH-TW", "KO-KR", "JA-JP", 
	"RU-RU", "PT-BR", "CS-CZ", "NL-NL", "HU-HU", "NB-NO", "PL-PL", "SV-SE", "TR-TR"
);

var _PROJECT_MODEL_ID_LIGHTNING = "WDMyCloudEX4";
var _PROJECT_MODEL_ID_KINGS_CANYON = "WDMyCloudEX2";
var _PROJECT_MODEL_ID_ZION = "WDMyCloudMirror";
var _PROJECT_MODEL_ID_GLACIER = "WDMyCloud";
var _PROJECT_MODEL_ID_YELLOWSTONE = "WDMyCloudEX4100";
var _PROJECT_MODEL_ID_YOSEMITE = "WDMyCloudEX2100";
var _PROJECT_MODEL_ID_SPRITE = "WDMyCloudDL4100";
var _PROJECT_MODEL_ID_AURORA = "WDMyCloudDL2100";
var _PROJECT_MODEL_ID_BLACKICE = "WDMyCloudEX1100";
var MODEL_ID = "WDMyCloud";
var LOGIN_ERROR = 0;
function rembEvent(e)
{
	if (e.keyCode=='13')
		$("#login_rememberMe_chkbox").click();	
}
function Config(e)
{
	if (e.keyCode=='13')
		$("#login_login_button").click();
}

/*
function detectBrowser()
{ 
  var sAgent = navigator.userAgent.toLowerCase();
  this.isIE = (sAgent.indexOf("msie")!=-1); //IE6.0-7
  this.isFF = (sAgent.indexOf("firefox")!=-1);//firefox
  this.isSa = (sAgent.indexOf("safari")!=-1);//safari
  this.isOp = (sAgent.indexOf("opera")!=-1);//opera
  this.isNN = (sAgent.indexOf("netscape")!=-1);//netscape
  this.isMa = this.isIE;//marthon
  this.isOther = (!this.isIE && !this.isFF && !this.isSa && !this.isOp && !this.isNN && !this.isSa);//unknown Browser
}
*/

var user_login = "";
var logd_eula = "";
var eulaFlag="";
function load_page(_url)
{
	wd_ajax({
		type: "GET",
		url: _url,
		dataType: "html",
		cache: false,
		async: false,
		success: function(_html) {
			//unbind all buttons
			$('#pages *').unbind();
			$('#pages').empty();
			$('#pages').html(_html);
		},
		complete: function () {
			$("#pages").fadeIn('fast', function () {
				page_load();
			});
		}
	});
}

function refresh_page(_URL)
{
	var _url = "/web/home.php";
	$("#hide_link").focus();

	keep_login_status(function(){
		init_web_timeout();
	chk_hdd_status(function(cntDisk,res,eula){
		if(cntDisk==0 && res==0)
		{
			if(eula!="1")
			{
				_url = "/web/eula.php?v10069";
			}
			else
			{
			_url = "/web/noHDD.php";
		}
		}
		else if (_URL != "")
		{
		_url = _URL;
		}
	else if (user_login == "1") //user login
		{
		_url = "/web/myhome.php";
		}
	else
	{
			if (logd_eula != "1")	//0:first run eula 1:already run eula 2:should run eula again
			_url = "/web/eula.php?v10068";
	}

	$("#form").fadeOut('fast', function() {
		load_page(_url);
	});
	});
	});
}

function do_login(entry)
{
	$("#id_warn").empty();
	var username = $("#login_userName_text").val().toLowerCase();
	_login_username = "";

	$.ajax({
		type: "POST",
		url: '/cgi-bin/login_mgr.cgi',
		dataType: "xml",
		cache: false,
		async: false,
		data: {
			cmd: 'wd_login',
			username: username,
			pwd: $("#pwd").val(),
			port: $("#port").val()
		},
		success: function(r) {
			var res = $(r).find('res').text();
			user_login  = $(r).find('user_login').text();
			logd_eula  = $(r).find('logd_eula').text();
			var booting = $(r).find('booting').text();
			var scandisk_pw_fail = $(r).find('scandisk_power_failure').text();
			
			$("#b4_main").show();
			
			if ($(r).find('system_restore').text() == 1)
			{
				$("#id_warn").html(_T('_login', 'msg_system_restore'));	//Text:
				return;
			}

			if (scandisk_pw_fail == "1")
			{
				$("#id_warn").html(_T('_login', 'msg_scandisk_power_failure'));
				return;
			}

			if (booting == "1")
			{
				$("#id_warn").html(_T('_login', 'msg_booting'));
				return;
			}

			switch(res)
			{
				case "-1":
					$("#id_warn").html(_T('_login','msg8'));
					break;
				case "-2":
					$("#id_warn").html(_T('_login','msg11'));	//Only administrator users are allowed.(SKY-311)
					break;
				case "-3":
					$("#id_warn").html(_T('_login', 'account_locked'));	//Account Locked
					break;
				case "":
				case "0":
					if(logd_eula=="0")
					{
						if(entry!="eula_login")
						{
							$("#id_warn").html(_T('_login','msg3'));
						}
						else
						{
							_login_username = username;
						}
						$("input:text").inputReset();
						$("input:password").inputReset();
						return;
					}
					
					LOGIN_ERROR++;
					
					if (LOGIN_ERROR >= 5)
					{
						var str = _T('_login','msg6');
						var str = str.replace(/%s/g,"http://wdc.custhelp.com/app/answers/detail/a_id/10432/session/L2F2LzEvc25vLzEvdGltZS8xNDE4MzQzODQ4L3NpZC9XLUI5U0Y5bQ%3D%3D");//ITR No.: 100564
						$("#id_warn").html(str);
					}
					else
					{
						$("#id_warn").html(_T('_login','msg3'));
					}
					break;
				case "1":
				case "2":
				{
					$("input:text").inputReset();
					$("input:password").inputReset();
					$("#b4_main").hide();
					_login_username = username;
					refresh_page('');
					LOGIN_ERROR = 0;
				}
					break;

				case "5": //somebody login
				{
					$("input:text").inputReset();
					$("input:password").inputReset();
					$("#id_warn").html(_T('_login','msg4'));
					LOGIN_ERROR = 0;
				}
					break;
				default:	//special case
					$("input:text").inputReset();
					$("input:password").inputReset();
					break;
			}
		}
	});
}

function do_logout()
{
	jLoadingClose();
	$(".Tooltip").remove();
	deinit_web_timeout();

	if (typeof(home_page_unload) == "function")
		page_unload();
		
	if (typeof(home_page_unload) == "function")
		home_page_unload();

	$(".exposeMask").each(function() { $(this).remove(); });
	$(".LightningStatusPanel").each(function() { $(this).remove(); });

	var login_name = getCookie("username");

	$.ajax({
		type: "POST",
		url: '/web/index.php',
		dataType: "json",
		cache: false,
		data: {
			action:"logout"
		},
		success: function(r) {
		}
	});	
		
		
	$.ajax({
		type: "POST",
		url: '/cgi-bin/login_mgr.cgi',
		dataType: "xml",
		cache: false,
		//async: false,
		data: {
			cmd: 'wd_logout',
			name: login_name
		},
		complete: function(r) {
			$("#pages").fadeOut('fast', function() {
				$("#form").fadeIn('fast');
				$("#form").get(0).reset();
				$("#pages *").unbind();
				$("#pages").empty();
				check_cookie();
				chk_admin_pwd();
				check_cookie();
				$('#login_userName_text').focus();
				//detect_login();
				$("#b4_main").show();
				$("input:text").inputReset();
				$("input:password").inputReset();				
				$.cookie("local_login", null);		
			});
			scrollDivLeft('main_nav');
			scrollDivLeft('main_nav');
		}
	});
}

function keep_login_status(callback)
{
	$.ajax({
		type: "POST",
		url: '/web/index.php',
		dataType: "json",
		cache: false,
		data: {
			//username: $("#login_userName_text").val().toLowerCase(),
                        username:getCookie("username"),
			action: "login"
		},
		success: function(r) {
			if(callback) callback();
		}
	});
}

function check_cookie()
 	{
	// init checkbox
	
	if ($.cookie("rembMe") == "checked")
	{
		var c_name = $.cookie('uname');
		var c_pw = $.cookie('password');
		if(!c_name) c_name="";

		if(c_name.length >0)
		{	
				$("#login_userName_text").val(c_name);
				$("#username").val(c_name);
		}
		if (c_pw!=null && c_pw.length >0)
    {	
        var p = decRC4(c_name, c_pw);
        $("#pwd").val(p);
        $("#login_pw_password").val(p);	
    }
		//	$("#pwd").val("");
		//	$("#login_pw_password").val("");

	  $("#login_rememberMe_chkbox").prop("checked", true);
	}
	else
	{
			$("#login_rememberMe_chkbox").prop("checked", false);
      if ($("#login_pw_password").val() != _T('_login','msg7'))
      {
					$("#pwd").val("");
					$("#login_pw_password").val("");
      }
	}
}
_g_admin = "admin";
_g_admin_pwd = "";
function chk_admin_key()
{
		var p = _g_admin_pwd;
		var name = _g_admin;
			if ($("#login_userName_text").val().toLowerCase() == name)
			{
				if (p == 0 )
				{
					var input = document.getElementById('login_pw_password');
	  			var newInput = document.createElement('input');	
	        newInput.id = input.id;	                        
	        input.parentNode.replaceChild(newInput, input);
	                        					
				  if (name == "admin")
	        {
	        	newInput.type = 'text';
	        	newInput.value = _T('_login','msg7');
	        	newInput.className = 'gray_out';
	        	newInput.readonly = 'readonly';
						$("#login_pw_password").attr("readonly","readonly")							
	        }	
	        else	
	        {	
	        	newInput.type = 'password';
	        	newInput.value = "";
	        	newInput.className = 'text';	
	        }											
					$("#login_pw_password").css("font-style","italic")	
					$("#login_pw_password").attr("tabindex","-1");	
					$("#login_pw_password").attr("maxlength","16");
					$("#login_pw_password").attr("onKeyPress","Config(event)");
					return;
				}
			}
			var input = document.getElementById('login_pw_password');
			var newInput = document.createElement('input');	
      newInput.type = 'password';
      newInput.id = input.id;	       
      input.parentNode.replaceChild(newInput, input);									
			$("#login_pw_password").attr("tabindex","0");	
			$("#login_pw_password").attr("value","");
			$("#login_pw_password").attr("maxlength","16");
			$("#login_pw_password").attr("onKeyPress","Config(event)");	
                         /*for chrome issue*/
}
function chk_admin_pwd()
{
		$.ajax({
		type:"GET",
		async: false,
		cache:false,
		url:"/cgi-bin/login_mgr.cgi?cmd=cgi_get_language",
		dataType: "xml",
		success:function(xml){
			var p = $(xml).find('pwd').text();
			var name = $(xml).find('admin').text();
			_g_admin_pwd = p;
			_g_admin = name;

				if (p == 0 )
				{
	                                $.cookie("password", null);
					var input = document.getElementById('login_pw_password');
		  			var newInput = document.createElement('input');	
		        newInput.type = 'text';
		        newInput.id = input.id;
		        input.parentNode.replaceChild(newInput, input);	      
			if ($("#login_rememberMe_chkbox").prop("checked") && $("#login_userName_text").val().toLowerCase()!="admin")
			{							
		        		newInput.value = "";
	        			newInput.type = 'password';   			
			}
	                else
		        {
	        			$("#login_userName_text").val(name)
		        		newInput.value = _T('_login','msg7');
			        	newInput.className = 'gray_out';
			        	newInput.readonly = 'readonly';	
								$("#login_pw_password").attr("readonly","readonly")																								
		        }	
						$("#login_pw_password").css("font-style","italic")	
						$("#login_pw_password").attr("tabindex","-1");
						$("#login_pw_password").attr("maxlength","16");
						$("#login_pw_password").attr("onKeyPress","Config(event)");	
						return;
				}
				else
				{
					$("#login_userName_text").val(name);
				}
				
				
				var input = document.getElementById('login_pw_password');
  			var newInput = document.createElement('input');	
        newInput.type = 'password';
        newInput.id = input.id;	       
        input.parentNode.replaceChild(newInput, input);									
				$("#login_pw_password").attr("tabindex","0");	
				$("#login_pw_password").attr("value","");
				$("#login_pw_password").attr("maxlength","16");
				$("#login_pw_password").attr("onKeyPress","Config(event)");
			}	
	});	
}
function detectOSLang()
{
	var l_array_1 =  new Array("en","fr","it","de","es","zh","zh","ko","ja","ru","pt","cs","nl","hu","no","pl","sv","tr");			
	var l_array_2 =  new Array("US","FR","IT","DE","ES","CN","TW","KR","JP","RU","BR","CZ","NL","HU","NO","PL","SE","TR");
			
	var oBrowser = new detectBrowser();
 	if (oBrowser.isIE)
 	{
 		var l = navigator.systemLanguage
 		l = l.substr(l.length-2,2) 	
 	}
 	else
 	{
 		var l = navigator.language
 		l=l.substr(l.length-2,2)
 	}	
 	var language_v = 0;
		$.ajax({
		type:"GET",
		async: false,
		cache:false,
		url:"/cgi-bin/login_mgr.cgi?cmd=cgi_get_language",
		dataType: "xml",
		success:function(xml){
			var p = $(xml).find('pwd').text();
			var name = $(xml).find('admin').text();
			DATE_FORMAT = $(xml).find('date_format').text();			
			_g_admin_pwd = p;
			_g_admin = name;
	
			lang = $(xml).find('lang').text();
			load_date_lang(lang);
			eula = $(xml).find('eula').text();
			eulaFlag = eula;
			//eula = 0;
			if (eula == "0")
			{
				for (var i = 0;i<l_array_1.length;i++)
				{
					if (l_array_1[i].toLowerCase() == l.toLowerCase() || l_array_2[i].toLowerCase() == l.toLowerCase())
					{
						language_v = i		
					}	
				}
				if (MODEL_NAME == "BAGX")
				{
					if (language_v != 0 && language_v != 8)
					{
						language_v = 0;
					} 
				}

				var str = "cmd=cgi_language&f_language="+parseInt(language_v,10);
				wd_ajax({
					type: "POST",
					async: false,			
					cache: false,
					url: "/cgi-bin/login_mgr.cgi",
					data:str,
				   	success:function(){	 				   									
								ready_language();								
								
								if(name!="admin")					
								{
									$("#b4_main").show();
								}
								else
								{
								pass_login("eula_login");	
				   		}
				   		}			
				 });	
			}
			else
			{
				ready_language();
			}	
			
			if(!$("#login_rememberMe_chkbox").prop("checked"))
			{
				$("#login_userName_text").val(name);
			}
			
			if ($("#login_userName_text").val().toLowerCase() == name)
			{
				if (p == 0 )
				{
	          $.cookie("password", null);
						var input = document.getElementById('login_pw_password');
		  			var newInput = document.createElement('input');	
			        
		        newInput.id = input.id;
		        input.parentNode.replaceChild(newInput, input);
			        	newInput.type = 'text';
		       		newInput.value = _T('_login','msg7');
		        	newInput.className = 'gray_out';
		        	newInput.readonly = 'readonly';	
							$("#login_pw_password").attr("readonly","readonly")			
						$("#login_pw_password").css("font-style","italic")	
						$("#login_pw_password").attr("tabindex","-1");
						$("#login_pw_password").attr("maxlength","16");
						$("#login_pw_password").attr("onKeyPress","Config(event)");	
				}	
				else
				{
						var input = document.getElementById('login_pw_password');
		  			var newInput = document.createElement('input');	
		        newInput.type = 'password';
		        newInput.id = input.id;	       
		        input.parentNode.replaceChild(newInput, input);									
						$("#login_pw_password").attr("tabindex","0");	
						//$("#login_pw_password").attr("value","");
						$("#login_pw_password").attr("maxlength","16");
						$("#login_pw_password").attr("onKeyPress","Config(event)");
				}	
			}	
		},
		error:function(xml){

  		}
	});	
	
	var sys_time = (new Date()).getTime();
	$.getScript("/web/lib/msg.php?r=" + sys_time, function(){
	   // Here you can use anything you defined in the loaded script
	});
}
function pass_login(entry)
{
		//can't login
		var name=$("#login_userName_text").val().toLowerCase();
		var re=/root|anonymous|nobody|administrator|ftp|squeezecenter|sshd|messagebus|netdev/i;
		var y=name.split(re);

		if(y.length==0 || y==",")	//for ie,firefox
		{
			location.href = "/";
		}
		else
		{
			$("#username").val(name);

			// set password
			var cUName = $.cookie('uname');
			var cPwd = $.cookie('password');

			
			var pre_pwd = $("#login_pw_password").val();
			if (cPwd != null && pre_pwd.substr(0, cPwd.length) == cPwd && cPwd.length > 0 && pre_pwd.length > 0) {
				  $("#pwd").val(decRC4(cUName, cPwd));
			}
			else
			{
				$("#pwd").val($("#login_pw_password").val());
			}
			
			if ($("#login_pw_password").attr("type") == "text")
				$("#pwd").val("");
			else
			$("#pwd").val($("#login_pw_password").val());

			// cookie
			if ($("#login_rememberMe_chkbox").prop("checked"))
			{
				var uName = $("#login_userName_text").val().toLowerCase();
				var pwd = $("#pwd").val();
		
				// Save checkbox, userName, password by cookie
				
				var encode_pw="";
				if(pwd.length!=0) 
				{
					encode_pw = encRC4(uName, pwd);
				}
			  	$.cookie("rembMe", "checked", { expires: 365 ,path: '/' });
				$.cookie('uname', uName, { expires: 365 ,path: '/'});
				$.cookie('password',encode_pw , { expires: 365 ,path: '/'});
			}
			else
			{
				// delete cookie
				$.cookie("rembMe", null);
				$.cookie("uname", null);
				$.cookie("password", null);
			}
		
			var o_pwd = $("#pwd").val();	
			document.form.pwd.value = Base64.encode( $("#pwd").val() );

			_REST_Login($("#login_userName_text").val().toLowerCase(), o_pwd);
			do_login(entry);
		}
}
function detect_login()
{	
	if(eulaFlag!='0')
	{
		$("#b4_main").show();
		$("input:text").inputReset();
		$("input:password").inputReset();	
	}	
}
function page_load()
{
	document.title = DEV_NAME;
	$("input:checkbox").checkboxStyle();
	$("input:text").inputReset();
	$("input:password").inputReset();
	$("#login_tb .LightningCheckbox").attr("tabindex","-1");

	$('#login_userName_text').focus();
	
	if(MODEL_NAME=="GLCR" || MODEL_NAME=="BZVM" || MODEL_NAME =="BAGX") //glacier,zion ,ITR:100181 Dashboard opening screen must remove the skyline design completely
	{
		$("#login_background").addClass('pass_city');
	}
	
	var oBrowser = new detectBrowser();
 	if (!oBrowser.isIE)
 	{
 		$("#login_login_button").css('top',"-7px");
 	}
 	else
 		$("#login_login_button").css('top',"-2px");

 	if ($.browser.msie&&($.browser.version == "6.0")&&!$.support.style)
 	{
 		$("#id_warn").html(_T('_login','msg6')); //Text:In order to access the Lightning 4a, please make sure you are using a recent browser(IE 7+, Firefox 3+, Safari 4+, Chrome 3+, Opera 10+)
 	}	
 	else 
 	{	
 		$("#id_warn").empty();	
 	}	


	$("#login_login_button").keydown(function(e) {
		if(e.keyCode == 9) {
			
			setTimeout(function(){
				$('#login_tb #login_userName_text').focus();
			}, 100);
		}
	});

	$("#login_login_button").click(function() {
		pass_login();
		return false;
	});
	check_cookie();
	detectOSLang();
	check_cookie();

	_LOCAL_LOGIN = getCookie("local_login"); //fish20141222+ ITR:92193	
	if(_LOCAL_LOGIN==0)
	{
		$("body").attr("rel","remote");
	}
	else if(_LOCAL_LOGIN==1)
	{
		$("body").attr("rel","local");
	}	
	detect_login();

	loadScript("/web/jquery/locale/date-all.js", null);
}
</script>
<body onLoad="page_load();">
<form name="form" id="form" method="post" action="/cgi-bin/login_mgr.cgi" onSubmit="return false;">
	<input type="hidden" name="cmd" value="wd_login">
	<input type="hidden" name="username" id="username" value="">
	<input type="hidden" name="pwd" id="pwd" value="">
	<input type="hidden" name="port" id="port" value="">
	<div class="_b1">
		<div class="wd_logo" style="background: url(/web/images/logo_WDMyCloud.png) no-repeat;"></div>
		<div class="_b2">
			<div>
				<div class="wd_dev"></div>
			</div>
		</div>
		<div id="b4_main" style="display: none;">
			<div id="id_warn" class="login_fail_warn"></div>
			<div class="_b4">
                <table id="login_tb" cellspacing="0" cellpadding="0" border="0" style="width: 100%; background:#fafafa;">
					<tr>
						<td id="dev_user_td" height="32" align="left" style="white-space: nowrap;">
							<div id="dev_user" class="_text" lang="_network_access" datafld="user" style="margin-left:22px;margin-right:10px;">User</div>
						</td>
						<td height="32" align="right">
						<input type="text" id="login_userName_text" name="login_userName_text" value="admin" autocomplete="on" onKeyPress="Config(event);" onKeyup="chk_admin_key();" size="30" tabindex="0">
						</td>
					</tr>
					<tr>
						<td width="140" height="32" align="left" style="white-space: nowrap;">
							<span class="_text" lang="_login" datafld="pw" style="margin-left:22px;">Password</span>
						</td>
						<td height="32" align="right">
							<input type="password" id="login_pw_password" name="login_pw_password" maxlength="16" onKeyPress="Config(event);" size="30" tabindex="0" >						
						</td>
					</tr>
					<tr>
						<td></td>
						<td id="rememberContainer">
							<table cellspacing="0" border="0" align="right">
								<tr tabindex="0" onKeyPress="rembEvent(event)">
									<td>
										<input type="checkbox" name="login_rememberMe_chkbox" id="login_rememberMe_chkbox" value="ON">
									</td>
									<td style="width: 233px;">
										<label id="rememberMeLabel" for="login_rememberMe_chkbox"><span class="_text" lang="_login" datafld="remember">Remember Me</span></label>
									</td>
								</tr>
							</table>
						</td>
					</tr>
				</table>

				<div style="text-align: right; margin-top: 25px;">
					<button id="login_login_button" type="button"><span class="_text" lang="_login" datafld="login"></span></button>
				</div>
			</div>
			<div style="clear: both;"></div>
		</div>

		<div id="login_background"></div>
	</div>
</form>
<a href="#" id="hide_link" onClick="return false;"></a>

<div id="loading_page" class="loading_page">
  <img src="/web/images/splash/city_sprite.png" border="0">
</div>

<div id="pages"></div>
    
<div id="non_supported_browser">
    <div id="non_supported_browser_container">
        <div id="non_supported_browser_header"><span class="_text" lang="_login" datafld="msg9"></span></div>
        <div id="non_supported_browser_content">
        	<span class="_text" lang="_login" datafld="msg10"></span>
        </div>
    </div>
</div>
    
<!--[if lte IE 9]>
    <style type="text/css">
        #form,
        #loading_page,
        #pages {
            display: none !important;
        }
        #non_supported_browser {
            position: absolute;
            top: 0;
            right: 0;
            bottom: 0;
            left: 0;
            display: block !important;
            width: auto;
            height: auto;
            background rgb(75, 90, 104);
            background: rgba(75, 90, 104, .6);
        }
        #non_supported_browser_container {
            width: 480px;
            margin: 130px auto 0;
            padding: 20px;
            border: 1px solid #E6E6E6;
            background-color: #eee;
            background-image: -webkit-gradient(linear, left top, left bottom, from(#f0f0f0), to(#ececec));
            background-image: -webkit-linear-gradient(top, #f0f0f0, #ececec);
            background-image: -moz-linear-gradient(top, #f0f0f0, #ececec);
            background-image: -ms-linear-gradient(top, #f0f0f0, #ececec);
            background-image: linear-gradient(top, #f0f0f0, #ececec);
            filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#f0f0f0', EndColorStr='#ececec');
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        #non_supported_browser_header {
            font-size: 20px;
            color: #4B5A68;
            margin-bottom: 14px;
        }
        #non_supported_browser_content {
            padding: 20px;
            background: #FAFAFA;
        }
        #non_supported_browser_content p {
            padding: 0;
            margin: 0;
        }
        #non_supported_browser_content p:last-child {
            padding: 0;
            margin: 14px 0 0;
        }
    </style>
<![endif]-->

</body>
</html>
