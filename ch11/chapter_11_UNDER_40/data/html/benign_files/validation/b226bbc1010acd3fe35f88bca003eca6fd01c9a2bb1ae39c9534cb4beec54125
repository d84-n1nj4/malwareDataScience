




<!DOCTYPE html>
<html lang="en-US">
<head>







<!-- v18 header.doc -->

<meta charset="UTF-8"/>
<link rel="icon" href="//www.ibm.com/favicon.ico">
<link rel="canonical" href="http://www.ibm.com/support">

<meta name="dcterms.date" content="2015-07-17">
<meta name="dcterms.rights" content="© Copyright IBM Corp. 2014">
<meta name="description" content="MustGather: WebSphere Commerce performance problems with DB2 databases">
<meta name="geo.country" content="US">
<meta name="keywords" content="zzzz">
<meta name="robots" content="index,follow">
<meta name="viewport" content="width=device-width, initial-scale=1">
<script>
	digitalData = {
		page: {
			category: {
				primaryCategory: "ELSDBANON"
			},
			pageInfo: {
				effectiveDate: "2015-07-17",
				expiryDate: "2029-07-17",
				language: "en-US",
				publishDate: "2015-07-17",
				publisher: "IBM Corporation",
				version: "v18",
				hotjar: {
					enabled: true
				},
				ibm: {
					contentDelivery: "IBM Corporation",
					contentProducer: "IBM Corporation",
					country: "US",
					industry: "ZZ",
					owner: "ibmsupt@us.ibm.com",
					siteID: "ESTDBL",
					subject: "SSYSYL",
					type: "CT741"
				}
			}
		}
	};
</script>
<meta name="DC.Subject" scheme="IBM_SubjectTaxonomy" content="SSYSYL"/>
<meta name="DC.Type" scheme="IBM_ContentClassTaxonomy" content="CT741"/>
<meta name="Security" content="public"/>

<meta name="IBM.Selective" content="sid=1010"/>

<meta name="IBM.ComponentID" content="5724H8800, 5724H8810, 5724H8811, 5724I3800, 5724I3803, 5724I3807, 5724I3808, 5724J0801, 5724J0852, 5724J3960, 5724L6200, 5733W70ND, 5648E9800, 5648E9801, DB2FORLUW, IM0062BOS, IM0063BOS, IM0216BOS, IM0506BOS, RA0178COS, TV0193BOS"/>

<meta name="IBM.ComponentID_mapped" content="5724I3800, 5724H8800, IS0049PRM, 5724I4000, 5724I3900, 5724I3801, 5724I3803, 5724I4100, 5724J0800, DB2FORLUW, 5724J1901, 5724I3804, AM0016PRM, AM0015PRM, 5724I3600, 5724I3808, 5724E7600"/>



<link href="//www.ibm.com/support/docview.wss?uid=swg21961381" rel="canonical"/>


<title>IBM MustGather: WebSphere Commerce performance problems with DB2 databases - United States</title>

<link href="//1.www.s81c.com/common/v18/css/www.css" rel="stylesheet">
<link href="//1.www.s81c.com/common/v18/css/syntaxhighlighter.css" rel="stylesheet">
<link href="//1.www.s81c.com/common/v18/css/tables.css" rel="stylesheet">
<link href="//1.www.s81c.com/common/v18/css/forms.css" rel="stylesheet">
<link href="//1.www.s81c.com/common/v18/css/textcolumns.css" rel="stylesheet">
<link href="/support/include/v18/css/dblue.css?0.9586827728199385" rel="stylesheet">
<script src="//1.www.s81c.com/common/v18/js/www.js"></script>
<script src="//1.www.s81c.com/common/v18/js/syntaxhighlighter.js"></script>
<script src="//1.www.s81c.com/common/v18/js/tables.js"></script>
<script src="//1.www.s81c.com/common/v18/js/dyntabs.js"></script>
<script src="//1.www.s81c.com/common/v18/js/forms.js"></script>
<script src="//1.www.s81c.com/common/v18/js/mustache.js"></script>
<script src="/support/include/v18/js/dblueUtil.js?0.5827443640381729"></script>
<script src="/support/include/v18/js/dblueContentFix.js?0.8251846341677792"></script>

<script>
var SP = {
	"AVPCompanyName": "",
	"WICO": "",
	"CAMCO": "",
	"WIDM": ""
};
var NTPT_PGEXTRA = "";
if (SP.AVPCompanyName != null && SP.AVPCompanyName != "") {
	NTPT_PGEXTRA += "SP.AVPCompanyName=null";
}
if (SP.WICO != null && SP.WICO != "") {
	if (NTPT_PGEXTRA.length > 0) {
		NTPT_PGEXTRA += "&";
	}
	NTPT_PGEXTRA += "SP.WICO=" + SP.WICO;
}
if (SP.CAMCO != null && SP.CAMCO != "") {
	if (NTPT_PGEXTRA.length > 0) {
		NTPT_PGEXTRA += "&";
	}
	NTPT_PGEXTRA += "SP.CAMCO=" + SP.CAMCO;
}
if (SP.WIDM != null && SP.WIDM != "") {
	if (NTPT_PGEXTRA.length > 0) {
		NTPT_PGEXTRA += "&";
	}
	NTPT_PGEXTRA += "SP.WIDM=" + SP.WIDM;
}
try {
	cmCreateProductviewTag("SSYSYL", "WebSphere Commerce Enterprise", "websphere");
} catch (exception) {
}
</script>

<link href="/support/include/watson-dialog/css/QueryWatsonDialog.css?0.08887182463985766" rel="stylesheet">
<script src="/support/include/watson-dialog/js/QueryWatsonDialogForDocview.js?0.32380086669112074"></script>

<link href="/support/include/star-rating/css/ratingWidget4v18.css?0.13957680839686581" rel="stylesheet">
<script src="/support/include/star-rating/js/ratingWidget4v18.js?0.004413124680908154"></script>
<script src="/support/include/star-rating/js/star-rating.js?0.1324798154151845"></script>
<script src="/support/5starfeedback/dblueRatingCardConf4dBlue.js" type="text/javascript">//</script>
<script src="/support/include/overlay/dBlueOverlay.js" type="text/javascript">//</script>
<script>
	var dBlueRatingWidget = {
			objRatingInfo: {rateUpdateStatus:0, comUpdateStatus:0, average_score:0, hits:0},
			strUid: "swg21961381",
			strIP: "9.57.171.172",
			strRatingWidgetTitle: "Rate this page",
			strRatingWidgetContent: "Average rating",
			arrStarHoverText: ["Poor", "Fair", "Average", "Good", "Very good"],
			arrAveRatingHitsText: ["(", "users" + ")"]
		};
</script>




<link href="//www.ibm.com/support/home/widgets/contentSuggestion/dblue-suggestion-widget.css?0.8527946933629575" rel="stylesheet">
<script src="//www.ibm.com/support/home/widgets/contentSuggestion/suggestionSystemConstants.js?0.06499547860213317"></script>
<script src="//www.ibm.com/support/home/widgets/contentSuggestion/sp-content-suggestionsjquery.js?0.3475313826451142"></script>

<script src="/support/include/tealeaf/js/tealeaf_min.js"></script>


<script src="/support/include/watson-chat/js/QueryWatsonChat.js?0.5623814640236335"></script>
<script>
	var ocCodeList = "SSYSYL";
</script>


<link href="/support/include/omnibox/css/omnibox.css?0.2786296698545849" rel="stylesheet">
<script src="/support/include/search/js/searchPars.js?0.6464926379448775"></script>
<script src="/support/include/search/js/dBlueSearchUtil.js?0.13941054954111576"></script>
<script src="/support/include/omnibox/js/omnibox.jquery.js?0.6540770523083324"></script>

<script src="https://www.ibm.com/support/home/widgets/supportNavBar/navbar.jquery.js?0.14123613589092787"></script>
<script>
	var doc_loc = "en-US";
	var req_Str;
	var isDD = false;
	var legal_accept = false;
	var user_loc = "en_US";
	var legal_tile = "Terms and conditions";
	var result_title = "Search result";
	var rs="0";
	<!-- var tpl="18";  -->
	IBMCore.common.util.config.set({
		contactModuleWidget: {
			color: "blue-50"
		},
		masthead: {
			greeting: {
				enabled: false
			},
			type: "alternate"
		},
		footer: {
			type: "alternate"
		},
		survey: {
			global_percent: 0
		},
		feedbacklink: {
			enabled: false
		}
	});
</script>
<script src="/support/dldirector/tqdl04.js"></script>
<script src="/support/legal.js"></script>

</head>
<body id="ibm-com" class="ibm-type dblue">
<div id="ibm-top" class="ibm-landing-page">
<!-- MASTHEAD_BEGIN -->




<!-- v18 masthead -->
<div id="ibm-masthead" role="banner" class="ibm-no-print" aria-label="IBM">
<div id="ibm-mast-options">
<ul role="toolbar" aria-labelledby="ibm-masthead">
<li id="ibm-geo" role="presentation"><a href="http://www.ibm.com/planetwide/select/selector.html" role="button" aria-label="United States selected - Choose a country">United States</a></li>
<li id="ibm-language" role="presentation"><span class="ibm-active" role="button" aria-disabled="true">English</span> <a href="http://www.ibm.com/us/en/" lang="en-US" role="button">English</a></li>
</ul>
</div>
<div id="ibm-universal-nav">

<nav role="navigation" aria-label="IBM">
<div id="ibm-home"><a href="http://www.ibm.com/us/en/">IBM®</a></div>
<ul id="ibm-menu-links" role="toolbar" aria-label="Site map">
<li><a href="http://www.ibm.com/sitemap/us/en/">Site map</a></li>
</ul>
</nav>

<div id="ibm-search-module" role="search" aria-labelledby="ibm-masthead">
<form id="ibm-search-form" action="http://www.ibm.com/Search/" method="get">
<p>
<label for="q">IBM</label>
<input type="text" maxlength="125" value="" placeholder="Search" name="q" id="q" aria-label="Search"/>
<input type="hidden" value="18" name="v"/>
<input type="hidden" value="utf" name="en"/>
<input type="hidden" value="en" name="lang"/>
<input type="hidden" value="us" name="cc"/>
<input type="submit" id="ibm-search" class="ibm-btn-search" value="Submit"/>
</p>
</form>
</div>
</div>
</div>
<!-- MASTHEAD_END -->
<div id="ibm-content-wrapper">
<!-- HEADER BEGIN -->
<header aria-labelledby="ibm-pagetitle-h1" role="banner">
<div id="ibm-leadspace-head">
<h1 id="ibm-pagetitle-h1" style="display:none">&nbsp;</h1>
<div id="ibm-leadspace-social"></div>
</div>
</header>
<!-- HEADER END -->
<!-- MAIN CONTENT-->
<main role="main" aria-labelledby="ibm-pagetitle-h1">
<div id="ibm-pcon">
<div id="ibm-content">
<div id="ibm-content-body" class="ibm-padding-top-0">
<div id="ibm-content-main">





<!-- v18 smallheadermenus -->
<div id="search-header-wrapper" class="ibm-band ibm-padding-top-r1 ibm-padding-bottom-r1 ibm-background-blue-70">
	<div id="search-header-small" class="ibm-columns">
		<div class="ibm-col-1-1 ibm-padding-top-0 ibm-padding-bottom-0">
			<nav role="navigation" aria-label="Breadcrumb" class="ibm-alternate-background">
				<p class="ibm-fright ibm-ind-link" id="spng-whatsnew-link"><a href="http://www.ibm.com/developerworks/community/blogs/IBMElectronicSupport?tags=ibm-support" class="ibm-new-link">What's new?</a></p>
			</nav>
			<h3 class="ibm-h1 ibm-h2-medium ibm-h3-small ibm-light ibm-padding-top-0 ibm-padding-bottom-0 ibm-textcolor-white-core"><a href="//www.ibm.com/support/home" manual_cm_sp="dBlue-_-dbgtsp-_-docview">IBM Support</a></h3>
			<div id="spng-omnibox" style="display:none;"></div>
			<div id="dblue-watson-chat-search-widget" style="display:inline-block; display:none;">
				<form method="post" id="frm" enctype="multipart/form-data" class="ibm-row-form ibm-home-search" action="javascript:void(0)" onsubmit="return false;">
					<div id="ibm-tc-check" style="display: none;">
						<p class="ibm-left ibm-alternate-background">
						<input class="ibm-styled-checkbox" data-init="false" type="checkbox" id="ibm-tc-checkbox" name="tc-adv-checkbox" value="checked" aria-labelledby="tc-check-label">
						<label for="ibm-tc-checkbox" id="tc-check-label">Check here to start a new keyword search.</label>
						</p>
					</div>
				<p class="ibm-padding-top-r1 ibm-padding-bottom-0 ibm-alternate-background">
				<label for="iptSearch" id="iptSearch-label" class="ibm-access">Watson Product Search</label>
				<span>
				<input type="text" placeholder="Search support or find a product" value="" name="search" id="iptSearch" class="ibm-h3-medium ibm-h4-small" aria-labelledby="iptSearch-label" maxlength="125" >
				<a onclick="javascript:void(0); return false;" class="ibm-search-link ibm-textcolor-white-core" id="iptSearchButton" href="#">Search</a>
				</span>
				</p>
				<div style="display:none;" id="divWatsonContainer" class="wd_result_container wd_result_width">
				<div style="display:none;" class="ps_ibm-content wd_result_width" id="divWatsonDialogue">
				<div style="display:none;" id="divWatsonSpinner" class="ibm-spinner ibm-h2"></div>
				<div style="display:none;" class="wd_content_div wd_ul" id="divWatsonContent"></div>
				<hr>
				<p class="wd_search_link"><a id="watsonNOTALink" href="javascript:void(0)" class="ibm-forward-link">None of the above, continue with my search</a></p>
				</div>
				</div>
				</form>
			</div>
		</div>
	</div>
</div>






<!-- v18 wstitle.doc -->
<div class="ibm-columns">
<div class="ibm-col-5-4"><h1 class="ibm-h3 ibm-padding-top-1">MustGather: WebSphere Commerce performance problems with DB2 databases</h1></div>
<div id="com.dblue.docview.body.content.redirect.section" class="ibm-col-5-1"></div>

<div id="com.dblue.docview.body.content.widget" class="ibm-col-5-4">

<!-- Watson Chat widget community section start -->
<div id="com.dblue.docview.watson.chat.widget" style="display:none;"></div>
<!-- Watson Chat widget community section end -->

</div>
</div>


<div class="ibm-columns">





<!-- v18 body.doc -->

<!--BEGIN MAIN BODY CONTENT-->
<!--BEGIN CONTENT-->





<div id="com.dblue.docview.body.content" class="ibm-col-5-4">
<div class="ibm-card">
<div class="ibm-card__content">

<div class="ibm-container ibm-alternate">
  
  
 <h2 class=" ibm-h4 ibm-bold">Technote (troubleshooting)</h2> 
 <div class="ibm-container-body"> 
  <br /> 
  <h2 class=" ibm-h4 ibm-bold">Problem(Abstract)</h2> 
  <p> MustGather: WebSphere Commerce performance problems with DB2 databases </p> 
  <h2 class=" ibm-h4 ibm-bold">Resolving the problem</h2> 
  <div class="ibm-domino-rtf">
   <p></p>
   <div style="position: relative; top: -150px; background: #FFFFFF"> 
    <p>DB2 database slow-downs may be caused by various factors. To start troubleshooting, we recommend reviewing the article <a href="https://www.ibm.com/developerworks/community/blogs/wcs/entry/Troubleshooting_a_performance_slowdown_DB2_side?lang=en">Troubleshooting a performance slowdown - DB2 side</a>. The article will aid you in identifying and resolving the problem using the following steps. </p> 
    <ol style="margin-left: 10px; margin-top: 10px"> 
     <li style="margin-bottom: 10px">When troubleshooting a performance slow-down where DB2 is a suspect, start from the application server layer and review the webcontainer activities using javacores. Verify that there are indeed threads waiting on DB2. Otherwise, the problem is elsewhere.</li> 
     <li style="margin-bottom: 10px">Once you identified a possible DB2 issue, move to the database and collect the number of DB2 connections and their state. Depending on what’s normal for the environment, it may lead to the bottleneck of a performance problem.</li> 
     <li style="margin-bottom: 10px">Next, examine what queries are being executed; and review key metrics such as the frequency of execution, elapsed time and number of rows read. These values may expose room for tuning queries, for instance.</li> 
     <li style="margin-bottom: 10px">The article also provides a solution to review your findings using MON_GET_PKG_CACHE_STMT to confirm your findings. This is equivalent to snapshots for dynamic-sql providing cumulative statistics for all running SQLs.</li>
    </ol> 
    <p>If your investigation leads to a locking issue, refer to the article <a href="https://www.ibm.com/developerworks/community/blogs/wcs/entry/Relatively_new_tools_for_troubleshooting_locking_in_DB2?lang=en">Relatively new tools for troubleshooting locking in DB2</a>.</p> 
    <p>To facilitate the DB2 data collection and analysis, you can use the <a href="https://wcsupport.mybluemix.net/wcdb2/getreport">WebSphere Commerce DB2 Report.</a> The reporting tool relies on a script (which is also used in this MustGather for data collection) that uses monitoring routines and views. Once the data is collected, you can upload it to the site to obtain a report of your WebSphere Commerce database configuration and performance. </p>
    <p>If you have not been able to determine the root cause of the problem, collect the data listed in this technote for IBM Support to assist with the diagnosis. </p> 
    <br /> 
    <div class="ibm-inner-data-table ibm-show-hide" data-widget="showhide" data-type="panel"> 
     <h2 class=" ibm-h4 ibm-bold"> <a>Collecting data for DB2 9.7 FixPack 1 or higher</a> </h2> 
     <div class="ibm-container-body" style="display:block"> 
      <b>I. Configure environment</b> 
      <p><b>Note:
        <this section="" requires="" the="" use="" of="" stored="" procedures.="" alternatively="" for="" collecting="" data="" older="" versions="" db2.=""></this></b></p> 
      <p class="wordwrap">Follow the instructions below to configure your environment to capture the required diagnostic information: </p> 
      <ol style="margin-left: 10px; margin-top: 10px"> 
       <li style="margin-bottom: 10px">Prepare the server to collect javacores using the <a href="http://www-01.ibm.com/support/search.wss?rs=180&amp;tc=SSCMPB9+SSCMP9J&amp;q=MustGatherDocument">MustGather: Performance, hang, or high CPU issues with WebSphere Application Server</a></li> 
       <li style="margin-bottom: 10px">Download the <a href="https://wcsupport.mybluemix.net/static/1/db2report/scripts/db2collect.sh">db2collect.sh</a> script.</li> 
      </ol> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
      <b>II. Reproduce the problem</b> 
      <p></p> 
      <ol> 
       <li style="margin-bottom: 10px">Take note of the specific steps used to reproduce the problem and include any details that may be relevant to the problem.</li> 
       <li style="margin-bottom: 10px">Make sure you you're experiencing the performance problem prior to start collecting data.</li> 
       <li style="margin-bottom: 10px">Run the data collector script using the dba user account<br /> ./db2collect.sh <i>DBNAME</i></li> 
      </ol> 
      <p><b>Note:</b> the script will run 5 iteration of data collection separated by an interval of 3 minutes. Once the data is collected, it will be available in a zip file named db2collect.[date-and-time].zip (e.g. db2collect.2015-07-01-13.12.28.zip).</p> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
      <b>III. Collect data</b> 
      <p>Grab the db2collect.[date-and-time].zip generated during the time of the performance problem. The file will be located in the same path as the db2collect.sh script. Optionally, you can use the <a href="https://wcsupport.mybluemix.net/wcdb2/getreport">WebSphere Commerce DB2 Report</a> tool to review the data.</p> 
      <p>Include the general information requested in <a href="http://www-01.ibm.com/support/docview.wss?uid=swg21440709">MustGather: General Issues in WebSphere Commerce</a>.<br /> </p> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
     </div> 
     <h2 class=" ibm-h4 ibm-bold"> <a class="ibm-show-hide-link" href="#">Collecting data for DB2 9.7 or lower</a> </h2> 
     <div class="ibm-container-body" style="display:block"> 
      <b>I. Configure environment</b> 
      <p class="wordwrap">Follow the instructions below to configure your environment to capture the required diagnostic information: </p> 
      <ol style="margin-left: 10px; margin-top: 10px"> 
       <li style="margin-bottom: 10px">Prepare the server to collect javacores using the <a href="http://www-01.ibm.com/support/search.wss?rs=180&amp;tc=SSCMPB9+SSCMP9J&amp;q=MustGatherDocument">MustGather: Performance, hang, or high CPU issues with WebSphere Application Server</a></li> 
       <li style="margin-bottom: 10px">Enable deadlock event monitor</li> 
       <p>Given that the impact on performance by enabling this monitor is negligible, it is recommended that you enable the monitor and leave it enabled until the problem reoccurs. If the deadlocks occur intermittently during the day, let the event monitor run for period of 24 hours.</p> 
       <ol class=" ibm-alpha-list"> 
        <p></p> 
        <li>Create a temporary directory where the event monitor files will be created:<br /> mkdir tempfolder/deadlock</li> 
        <li>Connect to the database:<br />db2 connect to <i>DBNAME</i></li> 
        <li>Enable timestamp monitor switch using timestamp on:<br /> db2 update monitor switches using timestamp on </li> 
        <li>Create the event monitor using the following command:<br />db2 &quot;create event monitor wcdeadlck for deadlocks with details write to file 'tempfolder/deadlock'&quot; </li> 
        <li>Enable the event monitor:<br />db2 &quot;set event monitor wcdeadlck STATE=1&quot;</li> 
       </ol> 
       <p></p> 
       <p>For more information on creating an event monitor, consult the following page of the DB2 Information Center: CREATE EVENT MONITOR Statement</p> 
      </ol> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
      <b>II. Reproduce the problem</b> 
      <p></p> 
      <ol> 
       <li style="margin-bottom: 10px">Note the specific steps used to reproduce the problem and any details that may be relevant.</li> 
       <li style="margin-bottom: 10px">Gather snapshots</li> 
       <p>While the database is experiencing problems, take a series of snapshots using the following steps:</p> 
       <ol class=" ibm-alpha-list"> 
        <li>Connect to the database:<br /> db2 connect to <i>DBNAME</i></li> 
        <li>Enable monitor switches:<br /> db2 update monitor switches using lock on timestamp on statement on bufferpool on uow on sort on table on</li> 
        <li>Reset monitor switches:<br /> db2 reset monitor all</li> 
        <li>Wait 3 minutes while the database collects the data</li> 
        <li>Obtain a snapshot:<br /> db2 get snapshot for all on <i>DBNAME</i> &gt; db2snap.yyyymmddhhmm.txt </li> 
        <li>Reset the monitor switches to reinitialize the counters once again:<br /> db2 reset monitor all</li> 
        <li>Wait 3 minutes</li> 
        <li>Repeat steps 5-7 three times.</li> 
        <li>When you are done, disable the monitor switches:<br /> db2 update monitor switches using lock off statement off bufferpool off uow off sort off table off</li> 
       </ol> 
       <p></p> 
       <li style="margin-botton: 10px">Gathering statement event monitor if requested by Support</li> 
       <p>Use a statement event monitor to capture time-outs ( SQL0911N Reason code 68 ).</p> 
       <p>[IBM][CLI Driver][DB2/LINUXPPC] SQL0911N The current transaction has been rolled back because of a deadlock or timeout. Reason code &quot;68&quot;. SQLSTATE=40001</p> 
       <p>A statement event monitor will log all the statements being run on the database. As there will be performance degradation, you should only enable this monitor on a production system if requested by the support analyst. You should disable the event monitor as soon as the data concerning the problem has been collected.</p> 
       <p>Also note that as all the statements are logged, the size of the file will grow rapidly. Depending on the number of statements, on a typical production database, the file can grow at a pace of one gigabyte every ten minutes. Ensure that there is enough space on the file system to contain the event monitor. Alternatively, the File Options of the CREATE EVENT MONITOR Statement can be used to specify a maximum file size.</p> 
       <p>Complete the following steps to enable an event monitor for statements:</p> 
       <ol class=" ibm-alpha-list"> 
        <li>Create a temporary directory where the event monitor files will be created:<br /> mkdir tempfolder/timeout</li> 
        <li>Connect to the database:<br /> db2 connect to <i>DBNAME</i></li> 
        <li>Enable timestamp monitor switch to collect start/end and execution times:<br /> db2 update monitor switches using timestamp on </li> 
        <li>Create the event monitor using the following command:<br /> db2 &quot;create event monitor wctimeout for statements write to file 'tempfolder/timeout'&quot;</li> 
        <li>Enable the event monitor using the following command:<br /> db2 &quot;set event monitor wctimeout STATE=1&quot;</li> 
        <p>After capturing the error, the event monitor needs to be disabled and the output formatted to a file:</p> 
        <li>Disable the event monitor using the following command:<br /> db2 &quot;set event monitor wctimeout STATE=0&quot;</li> 
        <li>Format the event monitor logs using the following command:<br /> db2evmon -db <i>DBNAME</i> -evm wctimeout &gt; tempfolder/evtimeout.txt</li> 
        <li>Drop the event monitor: <br />db2 drop event monitor wctimeout</li> 
       </ol> 
      </ol> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
      <b>III. Collect data</b> 
      <p>After capturing the error, the deadlock event monitor needs to be disabled and the output formatted to a file: </p> 
      <ol> 
       <li>Connect to the database:<br /> db2 connect to <i>DBNAME</i></li> 
       <li>Disable the event monitor using the following command:<br /> db2 &quot;set event monitor wcdeadlck STATE=0&quot;</li> 
       <li>Format the event monitor logs using the following command:<br /> db2evmon -db <i>DBNAME</i> -evm wcdeadlck &gt; tempfolder/wcdeadlck.txt</li> 
      </ol> 
      <p></p> 
      <p>Execute the following commands to gather database configuration data:</p> 
      <ol> 
       <li>cd /tempfolder</li> 
       <li>db2level &gt; db2level.txt</li> 
       <li>db2set -all &gt; db2set.txt</li> 
       <li>db2 -z db2mcfg.txt get dbm cfg</li> 
       <li>db2 -z db2cfg.txt get db cfg for <i>DBNAME</i></li> 
       <li>db2pd -osinfo &gt; osinfo.txt</li> 
      </ol> 
      <p></p> 
      <p>Connect to the Commerce database and issue the following commands: </p> 
      <ol> 
       <li>db2 -z reorgchk.txt &quot;reorgchk current statistics on table all&quot;</li> 
       <li>db2 &quot;export to packages.csv of del select * from syscat.packages&quot;</li> 
       <li>db2 &quot;export to tables.csv of del select * from syscat.tables&quot;</li> 
       <li>db2 &quot;export to indexes.csv of del select * from syscat.indexes&quot;</li> 
       <li>db2 &quot;export to bufferpools.csv of del select * from syscat.bufferpools&quot;</li> 
       <li>db2 &quot;export to buffpoolmap.csv of del select * from syscat.tablespaces&quot;</li> 
       <li>db2 &quot;export to all_coldist.csv of del select * from syscat.coldist&quot;</li> 
       <li>db2 -z tblspaces.txt list tablespaces show detail </li> 
      </ol> 
      <p></p> 
      <p>Submit the following files:</p> 
      <div class="dblue-table-container">
       <table cellspacing="0" cellpadding="0" border="1" class="ibm-data-table ibm-alternate"> 
        <thead>
         <tr> 
          <th scope="col">Type of files</th> 
          <th scope="col">File name</th> 
         </tr>
        </thead>
        <tbody>
         <tr> 
          <th scope="row" class="ibm-table-row">DB2 Configuration Files</th> 
          <td> 
           <ul> 
            <li>db2level.txt</li> 
            <li>db2set.txt</li> 
            <li>db2mcfg.txt</li> 
            <li>db2cfg.txt</li> 
            <li>osinfo.txt</li> 
            <li>reorgchk.txt</li> 
            <li>packages.csv</li> 
            <li>tables.csv</li> 
            <li>indexes.csv</li> 
            <li>bufferpools.csv</li> 
            <li>buffpoolmap.csv</li> 
            <li>tblspaces.txt</li> 
           </ul> </td> 
         </tr> 
         <tr> 
          <th scope="row" class="ibm-table-row">DB2 Logs</th> 
          <td> 
           <ul> 
            <li>db2diag.log</li> 
           </ul> </td> 
         </tr> 
         <tr> 
          <th scope="row" class="ibm-table-row">DB2 Snapshot Files</th> 
          <td> 
           <ul> 
            <li>db2snap.yyyymmddhhmm.txt</li> 
           </ul> </td> 
         </tr> 
         <tr> 
          <th scope="row" class="ibm-table-row">DB2 Event Monitor Files</th> 
          <td> 
           <ul> 
            <li>evdeadlock.txt</li> 
            <li>evtimeout.txt</li> 
           </ul> </td> 
         </tr> 
        </tbody>
       </table>
      </div> 
      <p>In addition to the above files, provide the files from the MustGather, Performance, hang, or high CPU issues with WebSphere Application Server</p> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
     </div> 
     <h2 class=" ibm-h4 ibm-bold"> <a class="ibm-show-hide-link" href="#">Submitting data to IBM Support</a> </h2> 
     <div class="ibm-container-body"> 
      <p>To diagnose or identify a problem, it is sometimes necessary to provide Technical Support with data and information from your system. In addition, Technical Support might also need to provide you with tools or utilities to be used in problem determination. You can submit files using one of following methods to help speed problem diagnosis:</p> 
      <ul> 
       <li>IBM Support Assistant (ISA)</li> 
       <li>Service Request (SR)</li> 
       <li>E-Mail</li> 
       <li>FTP to the Enhanced Customer Data Repository (ECuRep)</li> 
      </ul> 
      <a href="http://www.ibm.com/software/support/exchangeinfo.html">Exchanging information with IBM Technical Support for problem determination</a> 
      <div class="ibm-rule"> 
       <hr /> 
      </div> 
     </div> 
    </div> 
    <br /> 
    <br /> 
    <br /> 
   </div>
  </div> 
  <div class="ibm-domino-rtf">
   <p> </p>
  </div>
  <div class="ibm-container-body"> 
  </div> 
   
  
 </div>
</div>
</div>
</div>

</div>

<!--END CONTENT-->
<!--END MAIN BODY CONTENT-->







<!-- v18 sidebar.doc -->
<div class="ibm-col-5-1">

<!-- dBlue rating widget section start -->
<div id="ibm-sidebar-star-rating" class="ibm-card" style="display:none;"></div>
<!-- dBlue rating widget section end -->

<!-- IBM suggestion widget section start -->
<div id="ibm-suggestions-widget"></div>
<!-- IBM suggestion widget section end -->

<div class="ibm-card">
<div class="ibm-card__content">
<h3 class="ibm-h4">Document information</h3>
<p><strong>More support for:</strong>

	<a href="https://www.ibm.com/support/home/product/K790669G74134Q50/websphere/websphere_commerce_enterprise" manual_cm_sp="dBlue-_-dbmsf-_-product">WebSphere Commerce Enterprise</a><br>



	</p>
	<p><strong>Software version:</strong>
	7.0

	</p>
	<p><strong>Operating system(s):</strong>
	AIX, IBM i, Linux, Solaris, Windows

	</p>
	<p><strong>Reference #:</strong>
1961381

</p>
<p><strong>Modified date:</strong>
17 July 2015</p>

</div>
</div>

<!-- IBM Redbooks mobile app section start -->
<div id="ibm-mobile-app-section" class="ibm-card" style="display:none;"></div>
<!-- IBM Redbooks mobile app section end -->

<!-- IBM Subscribe section start -->
<div id="ibm-subscribe-section" class="ibm-card" style="display:none;"></div>
<!-- IBM Subscribe section end -->

<!-- dBlue tagging widget section start -->
<div id="com.dblue.docview.social.tag" class="ibm-card" style="display:none;"></div>
<!-- dBlue tagging widget section end -->

</div>
</div>






<!-- v18 siteassistance -->
<div class="ibm-columns ibm-no-print">
	<div class="ibm-col-1-1">
		<div class="ibm-rule ibm-alternate-1"><hr></div>
	</div>
</div>
<div class="ibm-columns ibm-no-print">
	<div class="ibm-col-6-1 ibm-col-xlarge-6-1 ibm-col-large-6-1 ibm-col-medium-4-1 ibm-col-small-4-1">
		<p class="ibm-ind-link"><a href="//www.ibm.com/support/home/site-availability" class="ibm-confirm-link">Site availability</a></p>
	</div>
	<div class="ibm-col-6-1 ibm-col-xlarge-6-1 ibm-col-large-6-1 ibm-col-medium-4-1 ibm-col-small-4-1">
		<p class="ibm-ind-link"><a href="//www.ibm.com/support/home/site-assistance" class="ibm-help-link">Site assistance</a></p>

		<div id="com.dblue.docview.blueid.iframe"></div>

	</div>
	<div id="ibm-spng-translate" class="ibm-col-6-4 ibm-col-xlarge-6-4 ibm-col-large-6-4 ibm-col-medium-4-2 ibm-col-small-4-2">
		<p class="ibm-right">Translate this page: <script type="text/javascript" src="//transwidget.mybluemix.net/tw.jsp?app=ibm-esupport.dBlue&from=en_us&sl=1&banner=1&style=minimal&corr=0&cd=.ibm.com&ratefunc=showRateThis&clang=C"></script></p>
	</div>
</div>


</div>
</div>
</div>
</div>
</main>
<!-- MAIN CONTENT END -->
<div id="ibm-related-content"></div>
<div id="ibm-merchandising-module"></div>




<!-- v18 contact -->
<div id="ibm-contact-module">
	<h2 class="ibm-bold">Contact and feedback</h2>
	<h3 class="ibm-bold">Need support?</h3>
	<ul class="ibm-live-assistance-list">
		<li><a class="ibm-requestquote-link" href="javascript:void(0)">Submit feedback to IBM Support</a></li>
		<li><p class="ibm-icon-nolink ibm-phone-link">1-800-IBM-7378 (<strong>USA</strong>)</p></li>
		<li><a class="ibm-arrow-forward-link" href="//www.ibm.com/planetwide/index.html#region">Directory of worldwide contacts</a></li>
	</ul>
</div>
</div>
<!-- FOOTER_BEGIN -->
<div id="ibm-footer-module"><!-- Dynamic footer links inserted here inside a <section> --></div>




<!-- v18 footer -->
<footer role="contentinfo" class="ibm-no-print" aria-label="IBM">
<div id="ibm-footer" class="ibm-padding-normal">
<ul>
<li><a href="http://www.ibm.com/contact/us/en/">Contact</a></li>
<li><a href="http://www.ibm.com/privacy/us/en/">Privacy</a></li>
<li><a href="http://www.ibm.com/legal/us/en/">Terms of use</a></li>
<li><a href="http://www.ibm.com/accessibility/us/en/">Accessibility</a></li>
</ul>
</div>
</footer>
<!-- FOOTER_END -->
</div>
</body>
</html>