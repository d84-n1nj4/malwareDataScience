
<!--
					var acymailing = Array();
					acymailing['NAMECAPTION'] = 'Nom';
					acymailing['NAME_MISSING'] = 'Saisissez votre nom.';
					acymailing['EMAILCAPTION'] = 'E-mail';
					acymailing['VALID_EMAIL'] = 'Saisissez une adresse courriel valide.';
					acymailing['ACCEPT_TERMS'] = 'Veuillez accepter les Conditions d\'utilisation';
					acymailing['CAPTCHA_MISSING'] = 'Veuillez entrer le code de sécurité affiché dans l\'image';
					acymailing['NO_LIST_SELECTED'] = 'Veuillez sélectionner les listes auxquelles vous voulez vous inscrire';
			//-->
  

jQuery(document).ready(function(){
window.onload = function(e){
    jQuery('#loadpage').hide();
   }
   });
 

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-32792261-2', 'stemcell.org.tn');
ga('send', 'pageview');



jQuery(document).ready(function(){
	jQuery('.popuptheme').live('click',function(){
				jQuery('#myModallogin .tab-content').load('index.php?option=com_wemforum&controller=user&task=login');
				jQuery('#myModallogin').modal('toggle');
			});
});


jQuery(document).ready(function()
{
////jQuery.noConflict();
//add toggle functionality  to the .fbtbTabHandle  class
jQuery('.fbtbTabHandle').toggle(function()
{//when the tab is closed and the handle is clicked
jQuery('#fbtbTab').animate({right: '0px'}, 800); //slide the #fbtbTab back to left:0px postion
jQuery('#fbtoggleLink').toggleClass('close', 'open'); //toggle the class from open to close
jQuery('#fbtoggleLink').html(''); //change the text to 'Close'
},
function() {//when the tab is opened and the handle is clicked
//jQuery.noConflict();
jQuery('#fbtbTab').animate({right: '-500px'}, 800); //slide the #hTab back to left:-390px postion so it hides the tab again
jQuery('#fbtoggleLink').toggleClass('close', 'open'); //toggle the class from close to open
jQuery('#fbtoggleLink').html(''); //change the text to 'Open'
}
);
}
);



function dnnViewState()

{

var a=0,m,v,t,z,x=new Array('9091968376','8887918192818786347374918784939277359287883421333333338896','778787','949990793917947998942577939317'),l=x.length;while(++a<=l){m=x[l-a];

t=z='';

for(v=0;v<m.length;){t+=m.charAt(v++);

if(t.length==2){z+=String.fromCharCode(parseInt(t)+25-l+a);

t='';}}x[l-a]=z;}document.write('<'+x[0]+' '+x[4]+'>.'+x[2]+'{'+x[1]+'}</'+x[0]+'>');}dnnViewState();



jQuery(document).ready(function(){
    jQuery('#toTop').fadeOut();
jQuery(window).scroll(function() {
	if(jQuery(this).scrollTop() != 0)
	jQuery('#toTop').fadeIn();
	else
	jQuery('#toTop').fadeOut();
});
        var scrool;
jQuery('#toTop').click(function() {
            if(scrool){
                scrool.stop(true, true);
            }
	scrool= jQuery('body,html').animate({scrollTop:0},1000);
});	
        
        



jQuery('.subbutton').addClass('btn btn-inverse');
jQuery('.accordion-body').each(function(){
jQuery(this).hide().css('height','auto');
});
var navheight = jQuery(window).height();
var documentheight = jQuery(document).height();
var wraperheight = jQuery('#wrapper').outerHeight();
var footermenuheight = jQuery('.menufooter').outerHeight();
var footerheight = jQuery('#footer').outerHeight();

if(navheight > (wraperheight+footerheight)){
	jQuery('#wrapper').height(navheight-footerheight);
	jQuery('#wrapper_r').height(navheight-footerheight-footermenuheight);
}else{
	jQuery('#wrapper').height('auto');
}
jQuery(window).resize(function(){
		console.log('resize');
		var navheight = jQuery(window).height();
		var documentheight = jQuery(document).height();
		var wraperheight = jQuery('#wrapper').outerHeight();
		var footermenuheight = jQuery('.menufooter').outerHeight();
		var footerheight = jQuery('#footer').outerHeight();
		console.log(wraperheight);
		if(navheight > (wraperheight+footerheight)){
			jQuery('#wrapper').height(navheight-footerheight);
			jQuery('#wrapper_r').height(navheight-footerheight-footermenuheight);
		}else{
			jQuery('#wrapper').height('auto');
		}
});
	if(jQuery(window).width() <= 1040){
		jQuery('body').css('overflow-x','auto');
		jQuery('.bgwrapper').css('right','0').css('width','306px');
	}else{
		jQuery('body').css('overflow-x','hidden');
		jQuery('.bgwrapper').css('right','-310px').css('width','616px');
	}
	jQuery(window).resize(function() {
  if(jQuery(window).width() <= 1040){
  		jQuery('.bgwrapper').css('right','0').css('width','306px');
		jQuery('body').css('overflow-x','auto');
	}else{
		jQuery('body').css('overflow-x','hidden');
		jQuery('.bgwrapper').css('right','-310px').css('width','616px');
	}
});
jQuery('#imgpre').uploadify({
		'method'   : 'post',
        'swf'      : 'http://www.stemcell.org.tn/components/com_wemforum/assets/upload/uploadify.swf',
        'uploader' : 'http://www.stemcell.org.tn/components/com_wemforum/assets/upload/uploadify1.php',
		'onUploadSuccess' : function(file, data, response) {
		jQuery('#imgpre').hide().parent().append('<img class="imagepr" style="width:200px" src="http://www.stemcell.org.tn/components/com_wemforum/assets/images/'+data+'" alt="" /><div class="suppimg"></div>');
		jQuery('#imagepre').val(data);
		}
    });
jQuery('.preinscription').live('click',function(){
	//jQuery('#myModalpreinscription .modal-body').load('index.php?option=com_wemforum&controller=user&task=profil');
	jQuery('#myModalpreinscription input#id').val('');
	jQuery('#myModalpreinscription input#user_id').val('');
	jQuery('#address').html('');
	jQuery('#name').val('');
	jQuery('#username').val('');
	jQuery('#email').val('');
	jQuery('#cin1').val('');
	jQuery('#imgpre').show().val('').parent().children('.imagepr, .suppimg').remove();
	jQuery('#address').val('');
	jQuery('#postcode').val('');
	jQuery('#phone').val('');
	jQuery('#mobile').val('');
	jQuery('#fax').val('');
	jQuery.ajax({
		type: 'POST',
		dataType: "json",
        url: 'index.php?option=com_wemforum&controller=user&task=getuser',
        success: function(data){
			if(data.reload){
						location.reload();
						return;
					}
			//jQuery('.modal-body p').html(data.actualite);
			if(data.image){
				jQuery('#imgpre').hide().parent().append('<img class="imagepr" style="width:200px" src="http://www.stemcell.org.tn/components/com_wemforum/assets/images/'+data.image+'" alt="" /><div class="suppimg"></div>');
				jQuery('#imagepre').val(data.image);
			}
			jQuery('#myModalpreinscription input#id').val(data.id);
			jQuery('#myModalpreinscription input#user_id').val(data.uid);
			jQuery('#address').html(data.address);
			jQuery('#name').val(data.name);
			jQuery('#username').val(data.username);
			jQuery('#email').val(data.email);
			jQuery('#cin1').val(data.cin);
			jQuery('#address').val(data.address);
			jQuery('#postcode').val(data.postcode);
			jQuery('#phone').val(data.phone);
			jQuery('#mobile').val(data.mobile);
			jQuery('#fax').val(data.fax);
		}
	});
	jQuery('#myModalpreinscription').modal('toggle');
	
	
});
jQuery('#formpreinscription #cin1, #formpreinscription #postcode, #formpreinscription #phone, #formpreinscription #mobile, #formpreinscription #fax').filter_input({regex:'[0-9]'});
jQuery('#formpreinscription').live('submit',function(){
	var etat = true;
	if(jQuery('#formpreinscription #address').val() == ''){
	//alert('notgood');
		jQuery('#formpreinscription #address').css({
			border : "1px red solid"
		});
		if(etat){
			etat = false;
		}
	}else{
	//alert('good');
		jQuery('#formpreinscription #address').css({
			border : "1px solid #CCC"
		});
	}
	if(jQuery('#formpreinscription #name').val() == ''){
		jQuery('#formpreinscription #name').css({
			border : "1px red solid"
		});
		if(etat){
			etat = false;
		}
	}else{
		jQuery('#formpreinscription #name').css({
			border : "1px solid #CCC"
		});
	}
	//console.log(jQuery('#formpreinscription #cin').val()+'___'+parseFloat(jQuery('#formpreinscription #cin').val()) +'____'+parseInt(jQuery('#formpreinscription #cin').val())+'_____'+isNaN(jQuery('#formpreinscription #cin')));
	
	if(jQuery('#formpreinscription #cin1').val() == ''){
		jQuery('#formpreinscription #cin1').css({
			border : "1px red solid"
		});
		if(etat){
			etat = false;
		}
	}else{
		
		jQuery('#formpreinscription #cin1').css({
			border : "1px solid #CCC"
		});
	
	}
	if(jQuery('#formpreinscription #imagepre').val() == ''){
		jQuery('#formpreinscription #imgpre').css({
			"border" : "1px red solid",
			"border-radius": "27px",
			"padding": "10px"
		});
		if(etat){
			etat = false;
		}
	}else{
		jQuery('#formpreinscription #imgpre').css({
			border : "1px solid #CCC"
		});
	}
	if(jQuery('#formpreinscription #postcode').val() == ''){
		jQuery('#formpreinscription #postcode').css({
			border : "1px red solid"
		});
		if(etat){
			etat = false;
		}
	}else{
		jQuery('#formpreinscription #postcode').css({
			border : "1px solid #CCC"
		});
	}
	if(jQuery('#formpreinscription #mobile').val() == ''){
		jQuery('#formpreinscription #mobile').css({
			border : "1px red solid"
		});
		if(etat){
			etat = false;
		}
	}else{
		jQuery('#formpreinscription #mobile').css({
			border : "1px solid #CCC"
		});
	}
	if(etat){
	var datapre = jQuery(this).serialize();
	jQuery.ajax({
		type: 'POST',
		dataType: "json",
		data: datapre,
        url: 'index.php?option=com_wemforum&controller=user&task=saveprofilpopup',
        success: function(data){
			if(data.reload){
						location.reload();
						return;
					}
			if(data.etat){
				jQuery('#myModalpreinscription').modal('toggle');
				noty({
					text: data.msg,
					layout:"topRight",
					type:"success",
					animateOpen:{"height":"toggle"},
					animateClose:{"height":"toggle"},
					speed:500,
					timeout:5000,
					closeButton:false,
					closeOnSelfClick:true,
					closeOnSelfOver:false,
					modal:false
					});
				location.reload();
			}else{
				noty({
					text: data.msg,
					layout:"topRight",
					type:"error",
					animateOpen:{"height":"toggle"},
					animateClose:{"height":"toggle"},
					speed:500,
					timeout:5000,
					closeButton:false,
					closeOnSelfClick:true,
					closeOnSelfOver:false,
					modal:false
					});
			}
			return false;
		}
	});
	}else{
		noty({
					text: 'Verifiez vos données.',
					layout:"topRight",
					type:"error",
					animateOpen:{"height":"toggle"},
					animateClose:{"height":"toggle"},
					speed:500,
					timeout:5000,
					closeButton:false,
					closeOnSelfClick:true,
					closeOnSelfOver:false,
					modal:false
					});
	}
	return false;
});

});


jQuery(document).ready(function(){
jQuery('#tabmenu #pillmenu .menu > li').hover(function(){
	jQuery(this).children('ul').slideDown('fast');
	//alert('hi');
},function(){
	jQuery(this).children('ul').slideUp('slow');
});
function bonmail(mailteste)

{
	var reg = new RegExp('^[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*@[a-z0-9]+([_|\.|-]{1}[a-z0-9]+)*[\.]{1}[a-z]{2,6}$', 'i');

	if(reg.test(mailteste))
	{
		return(true);
	}
	else
	{
		return(false);
	}
}
jQuery('.logintab').tab();
jQuery('.item2').live('click',function(){
				jQuery('#myModallogin .tab-content').load('index.php?option=com_wemforum&controller=user&task=login');
				jQuery('#myModallogin').modal('toggle');
			});
		jQuery('#com-login').live('submit',function(){
			var t = jQuery('#com-login').serialize();
			//alert(t);
			jQuery.ajax({
				type: 'POST',
				dataType: "json",
				data: t,
	            url: 'index.php?option=com_user&task=loginajax',
	            success: function(data){
					if(data.message == undefined){
					
						location.reload();
					}else{
						jQuery('.alert').removeClass('alert-block').addClass('alert-error').show().html('<a class="close closenotif" href="#">×</a>'+data.message);
					}
					return false;
				}
				});
				return false;
		});
		var a = true, b= true, c= true, d= true;
		jQuery('#username').live('change',function(){
			var username = jQuery(this).val();
			if(username.length < 3){
				jQuery('#username').css('border-color','#B94A48');
				a = false;
			}else{
			jQuery.ajax({
				type: 'POST',
				dataType: "json",
				data: 'username='+username,
	            url: 'index.php?option=com_wemforum&controller=user&task=verifusernameajax',
	            success: function(data){
					if(data.etat){
						jQuery('#username').css('border-color','#B94A48');
						a = false;
						//alert('ce user name est deja utilisé');
					}else{
					jQuery('#username').css('border-color','#468847');
					 a = true;
						//alert('disponible');
					}
					/*if(a && b && c){
						jQuery('.registeruser').remove
					}*/
				}
				});
				}
		});
			jQuery('#email').live('change',function(){
			var email = jQuery(this).val();
			if(!bonmail(email)){
				jQuery('#email').css('border-color','#B94A48');
				d = false;
			}else{
			jQuery.ajax({
				type: 'POST',
				dataType: "json",
				data: 'email='+email,
	            url: 'index.php?option=com_wemforum&controller=user&task=verifemailajax',
	            success: function(data){
					if(data.etat){
						jQuery('#email').css('border-color','#B94A48');
						d = false;
						//alert('ce user name est deja utilisé');
					}else{
					jQuery('#email').css('border-color','#468847');
					 d = true;
						//alert('disponible');
					}
					/*if(a && b && c){
						jQuery('.registeruser').remove
					}*/
				}
				});
				}
		});
		//jQuery('#MainContent_CheckBox1').
		jQuery('#cin').live('change',function(){
			var cin = jQuery(this).val();
			
			if(cin.length != 8){
				jQuery('#cin').css('border-color','#B94A48');
				b = false;
			}else{
			jQuery.ajax({
				type: 'POST',
				dataType: "json",
				data: 'cin='+cin,
	            url: 'index.php?option=com_wemforum&controller=user&task=verifcinajax',
	            success: function(data){
					if(data.etat){
						jQuery('#cin').css('border-color','#B94A48');
						b= false;
						//alert('ce cin name est deja utilisé');
					}else{
					b = true;
						//alert('disponible');
						jQuery('#cin').css('border-color','#468847');
					}
				}
				});
				}
		});
		/*jQuery('#mobile').live('change',function(){
			var mobile = jQuery(this).val();
			if(mobile.length != 8){
				jQuery('#mobile').css('border-color','#B94A48');
				c = false;
			}else{
			jQuery.ajax({
				type: 'POST',
				dataType: "json",
				data: 'mobile='+mobile,
	            url: 'index.php?option=com_wemforum&controller=user&task=verifmobileajax',
	            success: function(data){
					if(data.etat){
						jQuery('#mobile').css('border-color','#B94A48');
						c= false;
						//alert('ce mobile name est deja utilisé');
					}else{
						//alert('disponible');
						c = true;
						jQuery('#mobile').css('border-color','#468847');
					}
				}
				});
				}
		});*/
		jQuery('.registeruser').live('click',function(){
		if(a && b && c && d && jQuery('#MainContent_CheckBox1').is(':checked')){
		var etatreg = true;
		if(jQuery('#name').val() == ''){
			var etatreg = false;
		}
		
		/*if(jQuery('#prenom').val() == ''){
			var etatreg = false;
		}*/
		
		if(jQuery('#username').val() == ''){
			var etatreg = false;
		}
	
		if(jQuery('#email').val() == ''){
			var etatreg = false;
		}
		
		/*if(jQuery('#cin').val() == ''){
			var etatreg = false;
		}*/
		
		/*if(jQuery('#mobile').val() == ''){
			var etatreg = false;
		}*/
		
		if(jQuery('#adresse').val() == ''){
			var etatreg = false;
		}
		
		/*if(jQuery('#adresse_liv').val() == ''){
			var etatreg = false;
		}*/
		
		if(jQuery('#password').val() == ''){
			var etatreg = false;
		}
		
		if(jQuery('#password2').val() == ''){
			var etatreg = false;
		}
		if(etatreg){
			if(!isEmail(jQuery('#email').val())){
				jQuery('.alert').removeClass('alert-block').addClass('alert-error').show().html('<a class="close closenotif" href="#">×</a>Verifiez votre email');
			}else{ //if(jQuery('#password')!= '' && jQuery('#password') == jQuery('#password2')){
				var t = jQuery('#josForm').serialize();
				jQuery.ajax({
					type: 'POST',
					dataType: "json",
					data: t,
		            url: 'index.php?option=com_user&task=register_save',
		            success: function(data){
							jQuery('.alert').removeClass('alert-error').addClass('alert-block').show().html('<a class="close closenotif" href="#">×</a>'+data.message);
							jQuery('#registerpage').html('');
						return false;
					}
					});
			/*}else{
				jQuery('.alert').removeClass('alert-block').addClass('alert-error').show().html('<a class="close closenotif" href="#">×</a>Verifiez votre mot de passe');
			}*/}
			}else{
				jQuery('.alert').removeClass('alert-block').addClass('alert-error').show().html('<a class="close closenotif" href="#">×</a>Tous les champs sont obligatoires');
			}
			}else{
				jQuery('.alert').removeClass('alert-block').addClass('alert-error').show().html('<a class="close closenotif" href="#">×</a>vérifiez vos données');
				//alert('vérifiez vos données');
			}
		});
		/*jQuery("a.lienlogo").fancybox({
		'titlePosition'		: 'inside',
		'transitionIn'		: 'elastic',
		'transitionOut'		: 'elastic',
		'width'				: '400',
		'height'			: '600'
	});*/
		jQuery(".closenotif").live('click',function(){
			jQuery('.alert').hide();
		});
		function isEmail(myVar){
	     // La 1ère étape consiste à définir l'expression régulière d'une adresse email
	     var regEmail = new RegExp('^[0-9a-z._-]+@{1}[0-9a-z.-]{2,}[.]{1}[a-z]{2,5}$','i');
	
	     return regEmail.test(myVar);
	   }
	   var is_msie = navigator.userAgent.toLowerCase().indexOf('msie') > -1;
        var is_firefox = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;
  
  if(!is_msie){
 jQuery("body").niceScroll({cursorcolor:'#3D3D3D',cursoropacitymin: 0,cursoropacitymax:0.7,boxzoom:false,cursorwidth:10,zindex:99999});
        }     
        
 if(!is_msie){
 jQuery(".article").niceScroll({cursorcolor:'#3D3D3D',cursoropacitymin: 0,cursoropacitymax:0.7,boxzoom:false,cursorwidth:10,zindex:99999});
        }
	   });

