## *Chapter 1: Basic Static Malware Analysis*
### *Dissecting the PE Format using pefile*

Our first task presented to us in chapter one is parsing of a PE file. Just prior to this, the chapter gives some good insights into _Microsoft Windows Portable Executable Format_. Understanding this format is crucial to knowing the structure of modern Windows program files (i.e., .exe, .dll, and .sys). Wikipedia actually has a nice overview of [Portable Executable](_https://en.wikipedia.org/wiki/Portable_Executable). In order to parse the PE file, we are going to utilize the python module [pefile](https://github.com/erocarrera/pefile_). Using _pefile_ we can access most of the information in the PE files headers, as well as all the sections' details and data. The PE file that we will be parsing is _ircbot.exe_. This executable file is supposed to live on a target computer, and the hacker utilizing the file would run commands through an irc (internet relay chat) server once the executable file gains control of the target computer. The first thing we will do while parsing the PE file is pull section data as shown below:

![Alt Text](../gifs/ch1/pullSectionDatax2.gif)

The output of this python script provides insights into five different sections of the PE file: .text, .rdata, .data, .idata, and .reloc. It provides memory location for each section once loaded as well as memory utilization. The amount of data each section will take up is also provided. The next step to parsing the PE file involves using _pefile_ to list the DLLs a binary will load, and the function calls it will request within those DLLs. The process and output are shown below:

![Alt Text](../gifs/ch1/dumpIATx2.gif/)

The output contains an array of functions that the malware declares and will reference.

### *Examing Malware Images*
We'll next look at examining malware images. This can be done by viewing icon images within the .rsrc section of a binary file. These icon images could be replicas of legitimate software programs made for the target, like the example we will look at, or the icon images could represent the network attack tools used by the attacker. We will look at a malicious PE binary disguised as a Adobe Acrobat document with a seemingly legitimate icon. The process is shown below:

![Alt Text](../gifs/ch1/malwareImagesx2.gif/)

### *Examing Malware Strings*
Per the book, strings are sequences of printable characters within a program binary. Strings in a malicious binary can give an analyst an idea of what the malicious code is intended to do. There could be commands for downloading, and connecting to specific addresses. It's possible for the attacker to fake, encrypt, and compress this data, but there are usually some traces left behind. We're going to use the command line tool _strings_ to print all strings in a binary file to a text file, line by line as shown below:

![Alt Text](../gifs/ch1/malwareStringsx2.gif)

The strings output to the text file show a lot of information. We came across _DOWNLOAD_ commands that could be evidence that the malware can download files. There are also commands related to an HTTP server which is likely how the attacker can connect to the target machine.

This wraps up the first chapter for me. Definitely a good introduction to static malware analysis as I have never worked with PE binary files before. As a side note, I do have an IRC server setup, and maybe in a future demo I'll try to utilize an _ircbot.exe_ type binary to try an attack on an old windows laptop that's just collecting dust.
